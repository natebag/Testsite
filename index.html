<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MLG.clan - Unified Gaming Platform</title>
  
  <!-- Meta Tags -->
  <meta name="description" content="MLG.clan - The ultimate gaming community platform with clan management, content creation, DAO governance, and achievements">
  <meta name="keywords" content="gaming, esports, clan, DAO, blockchain, MLG, community, tournaments">
  <meta name="author" content="MLG.clan Development Team">
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://unpkg.com; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; img-src 'self' data: blob: https:; connect-src 'self' wss: https:; frame-src 'self' https://www.youtube.com https://player.twitch.tv https://www.tiktok.com https://www.instagram.com https://twitter.com; font-src 'self' data:;">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎮</text></svg>">
  
  <!-- External Dependencies -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  
  <!-- React Dependencies for Clan Management -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Solana Web3.js for Blockchain Integration -->
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  
  <!-- Tailwind Configuration -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'xbox-green': '#6ab04c',
            'xbox-dark': '#2c5530',
            'xbox-light': '#8bc34a',
            'gaming-bg': '#0b1426',
            'gaming-surface': '#1a1a2e',
            'gaming-accent': '#ff9f43',
            'vault-purple': '#8b5cf6',
            'burn-red': '#dc2626',
            'achievement-gold': '#fbbf24'
          },
          fontFamily: {
            'gaming': ['Orbitron', 'monospace'],
            'xbox': ['Segoe UI', 'Arial', 'sans-serif']
          },
          animation: {
            'pulse-glow': 'pulse-glow 2s infinite',
            'vault-pulse': 'vault-pulse 3s infinite',
            'burn-glow': 'burn-glow 2s infinite',
            'achievement-pop': 'achievement-pop 0.5s ease-out',
            'score-glow': 'score-glow 2s infinite',
            'slide-in': 'slide-in 0.3s ease-out',
            'fade-in': 'fade-in 0.3s ease-out',
            'bounce-in': 'bounce-in 0.5s ease-out',
            'loading-pulse': 'loading-pulse 1.5s ease-in-out infinite',
            'notification-slide': 'notification-slide 0.3s ease-out',
            'notification-bounce': 'notification-bounce 0.4s ease-out',
            'realtime-pulse': 'realtime-pulse 2s infinite',
            'connection-pulse': 'connection-pulse 2s infinite'
          }
        }
      }
    }
  </script>
  
  <!-- Custom Styles -->
  <style>
    /* Xbox 360 Dashboard Theme */
    body {
      background: linear-gradient(135deg, #0b1426 0%, #1a1a2e 50%, #2c2c54 100%);
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    
    /* Animations */
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 10px rgba(106, 176, 76, 0.3); }
      50% { box-shadow: 0 0 25px rgba(106, 176, 76, 0.6); }
    }
    
    @keyframes vault-pulse {
      0%, 100% { box-shadow: 0 0 15px rgba(139, 92, 246, 0.4); }
      50% { box-shadow: 0 0 30px rgba(139, 92, 246, 0.7); }
    }
    
    @keyframes burn-glow {
      0%, 100% { box-shadow: 0 0 10px rgba(220, 38, 38, 0.5); }
      50% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.7); }
    }
    
    @keyframes achievement-pop {
      0% { transform: scale(0) rotate(180deg); opacity: 0; }
      50% { transform: scale(1.2) rotate(0deg); }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }
    
    @keyframes score-glow {
      0%, 100% { box-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
      50% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.8); }
    }
    
    @keyframes slide-in {
      0% { transform: translateX(-100%); opacity: 0; }
      100% { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fade-in {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    
    @keyframes bounce-in {
      0% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.1); opacity: 0.8; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    @keyframes loading-pulse {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 1; }
    }
    
    @keyframes notification-slide {
      0% { transform: translateX(100%); opacity: 0; }
      100% { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes notification-bounce {
      0% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.05); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    @keyframes realtime-pulse {
      0%, 100% { box-shadow: 0 0 5px rgba(16, 185, 129, 0.3); }
      50% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.6); }
    }
    
    @keyframes connection-pulse {
      0%, 100% { background-color: rgba(34, 197, 94, 0.1); }
      50% { background-color: rgba(34, 197, 94, 0.3); }
    }
    
    /* Gaming UI Components */
    .xbox-blade {
      background: linear-gradient(135deg, #1a1a2e, #2c2c54);
      border: 2px solid rgba(106, 176, 76, 0.3);
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }
    
    .xbox-blade:hover {
      border-color: #6ab04c;
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(106, 176, 76, 0.2);
    }
    
    .gaming-tile {
      background: linear-gradient(135deg, #065f46, #064e3b);
      border: 2px solid #10b981;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .gaming-tile::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, transparent, rgba(106, 176, 76, 0.1), transparent);
      z-index: -1;
      border-radius: inherit;
    }
    
    .gaming-tile:hover {
      transform: scale(1.02) translateY(-2px);
      box-shadow: 0 15px 35px rgba(16, 185, 129, 0.3);
      border-color: #6ab04c;
    }
    
    .nav-link {
      position: relative;
      transition: all 0.3s ease;
    }
    
    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 50%;
      width: 0;
      height: 3px;
      background: linear-gradient(90deg, #6ab04c, #10b981);
      transition: all 0.3s ease;
      transform: translateX(-50%);
    }
    
    .nav-link:hover::after,
    .nav-link.active::after {
      width: 100%;
    }
    
    .wallet-connect-btn {
      background: linear-gradient(45deg, #10b981, #059669);
      border: 2px solid transparent;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .wallet-connect-btn::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: rotate(45deg);
      transition: all 0.6s ease;
      opacity: 0;
    }
    
    .wallet-connect-btn:hover::before {
      opacity: 1;
      animation: shimmer 1s ease-in-out;
    }
    
    @keyframes shimmer {
      0% { transform: translateX(-100%) rotate(45deg); }
      100% { transform: translateX(100%) rotate(45deg); }
    }
    
    .wallet-connect-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
      border-color: #6ab04c;
    }
    
    /* Status Indicators */
    .status-indicator {
      position: relative;
      display: inline-block;
    }
    
    .status-indicator::after {
      content: '';
      position: absolute;
      top: 2px;
      right: 2px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ef4444;
    }
    
    .status-indicator.online::after { background: #10b981; }
    .status-indicator.away::after { background: #f59e0b; }
    .status-indicator.offline::after { background: #6b7280; }
    
    /* Loading States */
    .skeleton {
      background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
      background-size: 200% 100%;
      animation: loading-pulse 1.5s ease-in-out infinite;
    }
    
    .profile-section-fade-in {
      animation: fade-in 0.6s ease-out;
    }
    
    .profile-data-loading {
      animation: loading-pulse 2s ease-in-out infinite;
    }
    
    .loading-spinner {
      width: 32px;
      height: 32px;
      border: 2px solid #4b5563;
      border-radius: 50%;
      border-top-color: #10b981;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Responsive Design */
    .mobile-menu {
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }
    
    .mobile-menu.open {
      transform: translateX(0);
    }
    
    /* Content Hub Responsive Design */
    @media (max-width: 1024px) {
      .content-submission-container {
        grid-column: span 4;
      }
      
      .content-display-container {
        grid-column: span 4;
        margin-top: 24px;
      }
      
      #content-sort-controls {
        flex-wrap: wrap;
        gap: 8px;
      }
      
      .platform-embed-selector {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    @media (max-width: 768px) {
      #content-sort-controls {
        justify-content: center;
      }
      
      #content-sort-controls button {
        padding: 8px 12px;
        font-size: 0.75rem;
      }
      
      .platform-embed-selector {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .content-grid {
        grid-template-columns: 1fr;
      }
      
      .video-container {
        margin: 0 -16px;
        border-radius: 0;
      }
    }
    
    @media (max-width: 640px) {
      .platform-embed-option {
        padding: 12px 8px;
      }
      
      .platform-embed-option .platform-icon {
        font-size: 1.5rem;
      }
      
      .platform-embed-option .platform-name {
        font-size: 0.75rem;
      }
      
      .search-and-filters {
        flex-direction: column;
        gap: 12px;
      }
      
      .search-and-filters input,
      .search-and-filters select {
        width: 100%;
      }
    }
    
    /* Game-specific styles */
    .achievement-badge {
      background: linear-gradient(45deg, #fbbf24, #f59e0b);
      border: 2px solid #fbbf24;
      position: relative;
    }
    
    .achievement-badge::after {
      content: '🏆';
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 20px;
    }
    
    .clan-emblem {
      width: 60px;
      height: 60px;
      border: 3px solid;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 18px;
    }
    
    .clan-emblem.legendary { border-color: #fbbf24; background: linear-gradient(45deg, #fbbf24, #f59e0b); }
    .clan-emblem.elite { border-color: #8b5cf6; background: linear-gradient(45deg, #8b5cf6, #7c3aed); }
    .clan-emblem.veteran { border-color: #10b981; background: linear-gradient(45deg, #10b981, #059669); }
    .clan-emblem.rookie { border-color: #6b7280; background: linear-gradient(45deg, #6b7280, #4b5563); }
    
    /* Video embed styles */
    .video-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
      border-radius: 12px;
      border: 2px solid rgba(106, 176, 76, 0.3);
      background: #111827;
    }
    
    .video-container iframe,
    .video-container video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 10px;
    }
    
    /* Platform-specific video styles */
    .video-container.youtube {
      border-color: #ff0000;
    }
    
    .video-container.twitter {
      border-color: #1da1f2;
    }
    
    .video-container.tiktok {
      border-color: #fe2c55;
    }
    
    .video-container.twitch {
      border-color: #9146ff;
    }
    
    .video-container.instagram {
      border-color: #e4405f;
    }
    
    /* Video overlay for interaction */
    .video-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
      border-radius: 10px;
      pointer-events: none;
    }
    
    .video-container:hover .video-overlay {
      opacity: 1;
    }
    
    .video-overlay-content {
      color: white;
      text-align: center;
      pointer-events: auto;
    }
    
    /* Platform embed containers */
    .platform-embed {
      border-radius: 12px;
      overflow: hidden;
      border: 2px solid rgba(106, 176, 76, 0.3);
      background: #111827;
    }
    
    .platform-embed.loading {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 200px;
    }
    
    .embed-error {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 200px;
      color: #ef4444;
      background: rgba(239, 68, 68, 0.1);
      border: 2px dashed #ef4444;
    }
    
    /* Content submission platform selector */
    .platform-embed-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      margin: 16px 0;
    }
    
    .platform-embed-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 16px 12px;
      border: 2px solid #4b5563;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #374151;
    }
    
    .platform-embed-option:hover {
      border-color: #10b981;
      transform: translateY(-2px);
    }
    
    .platform-embed-option.selected {
      border-color: #10b981;
      background: rgba(16, 185, 129, 0.1);
    }
    
    .platform-embed-option .platform-icon {
      font-size: 2rem;
      margin-bottom: 8px;
    }
    
    .platform-embed-option .platform-name {
      font-size: 0.875rem;
      font-weight: 600;
      color: #d1d5db;
    }
    
    .platform-embed-option.selected .platform-name {
      color: #10b981;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #1a1a2e;
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #6ab04c, #10b981);
    }
    
    /* Enhanced Navigation Styles */
    .breadcrumb-item {
      display: inline-flex;
      align-items: center;
      transition: color 0.3s ease;
    }
    
    .breadcrumb-item.clickable {
      cursor: pointer;
    }
    
    .breadcrumb-item.clickable:hover {
      color: #10b981;
    }
    
    .breadcrumb-item.active {
      color: #10b981;
    }
    
    .breadcrumb-separator {
      margin: 0 8px;
      color: #6b7280;
    }
    
    .section-loading-overlay {
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(4px);
    }
    
    .mobile-nav-item {
      position: relative;
      overflow: hidden;
    }
    
    .mobile-nav-item:hover .nav-item-indicator {
      width: 4px;
    }
    
    .nav-item-indicator {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 0;
      height: 70%;
      background: #10b981;
      border-radius: 0 4px 4px 0;
      transition: width 0.3s ease;
    }
    
    .mobile-nav-item.active .nav-item-indicator {
      width: 4px;
    }
    
    .desktop-nav-item.active {
      color: #10b981 !important;
    }
    
    .desktop-nav-item.active .absolute {
      width: 100% !important;
    }
    
    .search-result:hover {
      background: rgba(55, 65, 81, 0.5);
    }
    
    .notification-item {
      animation: slideInRight 0.3s ease-out;
    }
    
    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .hamburger-icon.active .hamburger-line:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }
    
    .hamburger-icon.active .hamburger-line:nth-child(2) {
      opacity: 0;
    }
    
    .hamburger-icon.active .hamburger-line:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -6px);
    }
    
    .dropdown-item {
      position: relative;
      overflow: hidden;
    }
    
    .dropdown-item::before {
      content: '';
      position: absolute;
      left: -100%;
      top: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(16, 185, 129, 0.1), transparent);
      transition: left 0.5s;
    }
    
    .dropdown-item:hover::before {
      left: 100%;
    }
    
    #userDropdown.show {
      opacity: 1 !important;
      transform: scale(1) !important;
    }
    
    /* Performance optimizations */
    .section-content {
      will-change: opacity, transform;
    }
    
    .gaming-tile {
      will-change: transform;
    }
    
    /* Touch feedback for mobile */
    @media (max-width: 1024px) {
      .mobile-nav-item:active {
        background: rgba(16, 185, 129, 0.3) !important;
      }
      
      .gaming-tile:active {
        transform: scale(0.98) !important;
      }
    }
    
    /* Accessibility improvements */
    @media (prefers-reduced-motion: reduce) {
      .section-content,
      .mobile-nav-item,
      .desktop-nav-item,
      .gaming-tile {
        transition: none !important;
        animation: none !important;
      }
    }
    
    /* Focus states for keyboard navigation */
    .mobile-nav-item:focus,
    .desktop-nav-item:focus,
    .gaming-tile:focus {
      outline: 2px solid #10b981;
      outline-offset: 2px;
    }
    
    /* Loading spinner enhancement */
    .loading-spinner {
      border: 2px solid #4b5563;
      border-radius: 50%;
      border-top-color: #10b981;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Search result highlighting */
    .search-highlight {
      background: rgba(16, 185, 129, 0.3);
      padding: 1px 3px;
      border-radius: 2px;
    }
    
    /* Keyboard shortcut display */
    kbd {
      background: #374151;
      border: 1px solid #6b7280;
      border-radius: 3px;
      box-shadow: 0 1px 0 #6b7280;
      color: #d1d5db;
      display: inline-block;
      font-family: 'Consolas', monospace;
      font-size: 11px;
      font-weight: 700;
      line-height: 1;
      padding: 2px 4px;
      white-space: nowrap;
    }
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #8bc34a, #059669);
    }
    
    /* Notification styles */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #1a1a2e, #2c2c54);
      border: 2px solid #6ab04c;
      border-radius: 12px;
      padding: 16px;
      max-width: 400px;
      z-index: 1000;
      animation: slide-in 0.3s ease-out;
    }
    
    .notification.success { border-color: #10b981; }
    .notification.error { border-color: #ef4444; }
    .notification.warning { border-color: #f59e0b; }
    
    /* Modal styles */
    .modal-overlay {
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
    }
    
    .modal-content {
      background: linear-gradient(135deg, #1a1a2e, #2c2c54);
      border: 2px solid #6ab04c;
      border-radius: 16px;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    /* Accessibility improvements */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    
    .focus:focus {
      outline: 2px solid #6ab04c;
      outline-offset: 2px;
    }
    
    /* High contrast mode support */
    @media (prefers-contrast: high) {
      .gaming-tile {
        border-width: 3px;
      }
      
      .nav-link::after {
        height: 4px;
      }
    }
    
    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Multi-Platform Video Components Styles - Sub-task 6.8 */
    @import url('./src/styles/video-components.css');
    
    /* Additional video input component styles */
    .multi-platform-video-input {
      background: rgba(16, 185, 129, 0.05);
      border: 1px solid rgba(16, 185, 129, 0.2);
      border-radius: 12px;
      padding: 20px;
      margin: 16px 0;
    }
    
    .video-input-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(16, 185, 129, 0.2);
    }
    
    .input-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 18px;
      font-weight: 700;
      color: #10b981;
      margin: 0;
    }
    
    .title-icon {
      font-size: 20px;
    }
    
    .mode-selector {
      display: flex;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      padding: 4px;
      gap: 4px;
    }
    
    .mode-tab {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      border: none;
      background: transparent;
      color: #b3b3b3;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 12px;
      font-weight: 500;
    }
    
    .mode-tab.active {
      background: #10b981;
      color: #000;
    }
    
    .mode-tab:hover:not(.active) {
      background: rgba(16, 185, 129, 0.1);
      color: #10b981;
    }
    
    .url-input-section,
    .upload-section {
      transition: opacity 0.3s ease;
    }
    
    .url-input-section.hidden,
    .upload-section.hidden {
      display: none;
    }
    
    .url-input-wrapper {
      display: flex;
      gap: 8px;
      align-items: stretch;
    }
    
    .url-input {
      flex: 1;
    }
    
    .add-url-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 16px;
      background: rgba(16, 185, 129, 0.2);
      border: 1px solid rgba(16, 185, 129, 0.4);
      border-radius: 6px;
      color: #10b981;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
      font-weight: 500;
      white-space: nowrap;
    }
    
    .add-url-btn:hover:not(:disabled) {
      background: rgba(16, 185, 129, 0.3);
      border-color: #10b981;
    }
    
    .add-url-btn.ready {
      background: #10b981;
      color: #000;
    }
    
    .add-url-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .platform-detection {
      margin-top: 12px;
      padding: 12px 16px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(16, 185, 129, 0.2);
      border-radius: 8px;
      animation: slideDown 0.3s ease;
    }
    
    .detection-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .detected-platform {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .platform-icon {
      font-size: 16px;
    }
    
    .platform-name {
      font-weight: 600;
      color: #10b981;
    }
    
    .detection-status {
      font-size: 12px;
      color: #b3b3b3;
    }
    
    .video-preview-section {
      margin-top: 24px;
      animation: slideDown 0.3s ease;
    }
    
    .preview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .preview-title {
      font-size: 16px;
      font-weight: 600;
      color: #fff;
      margin: 0;
    }
    
    .clear-all-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: rgba(220, 38, 38, 0.2);
      border: 1px solid rgba(220, 38, 38, 0.4);
      border-radius: 6px;
      color: #dc2626;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 12px;
    }
    
    .clear-all-btn:hover {
      background: rgba(220, 38, 38, 0.3);
      border-color: #dc2626;
    }
    
    .video-preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 16px;
    }
    
    .video-preview-item {
      position: relative;
    }
    
    .remove-video-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 28px;
      height: 28px;
      background: rgba(220, 38, 38, 0.9);
      border: none;
      border-radius: 50%;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      transition: all 0.3s ease;
      z-index: 10;
    }
    
    .remove-video-btn:hover {
      background: #dc2626;
      transform: scale(1.1);
    }
    
    .input-stats {
      display: flex;
      gap: 16px;
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid rgba(16, 185, 129, 0.1);
    }
    
    .stat-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .stat-label {
      font-size: 12px;
      color: #b3b3b3;
    }
    
    .stat-value {
      font-size: 12px;
      font-weight: 600;
      color: #10b981;
      font-family: 'Courier New', monospace;
    }
    
    .spinner {
      width: 12px;
      height: 12px;
      border: 2px solid rgba(16, 185, 129, 0.2);
      border-top: 2px solid #10b981;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Responsive design for video input */
    @media (max-width: 768px) {
      .video-input-header {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
      }
      
      .mode-selector {
        width: 100%;
        justify-content: stretch;
      }
      
      .mode-tab {
        flex: 1;
        justify-content: center;
      }
      
      .url-input-wrapper {
        flex-direction: column;
        gap: 12px;
      }
      
      .video-preview-grid {
        grid-template-columns: 1fr;
      }
    }
    /* Real-time Notification Styles - Sub-task 6.9 */
    .realtime-notification {
      backdrop-filter: blur(10px);
      border: 1px solid rgba(16, 185, 129, 0.3);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    .realtime-notification.high-priority {
      border-color: rgba(239, 68, 68, 0.5);
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(185, 28, 28, 0.1));
      animation: notification-bounce 0.4s ease-out;
    }
    
    .connection-status-connected {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.1));
      animation: connection-pulse 2s infinite;
    }
    
    .connection-status-connecting {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(217, 119, 6, 0.1));
      animation: loading-pulse 1s infinite;
    }
    
    .connection-status-error {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(185, 28, 28, 0.1));
      animation: burn-glow 2s infinite;
    }
    
    .notification-badge {
      animation: notification-bounce 0.3s ease-out;
    }
    
    .live-indicator {
      position: relative;
    }
    
    .live-indicator::after {
      content: '';
      position: absolute;
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background: #ef4444;
      border-radius: 50%;
      animation: realtime-pulse 1s infinite;
    }
    
    .achievement-celebration {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 60;
      pointer-events: none;
    }
    
    @media (max-width: 640px) {
      #realtimeNotifications {
        right: 8px;
        left: 8px;
        max-width: none;
      }
      
      .realtime-notification {
        min-width: auto;
      }
    }
  </style>
</head>

<body class="min-h-screen text-white overflow-x-hidden">
  <!-- Loading Screen -->
  <div id="loadingScreen" class="fixed inset-0 z-50 flex items-center justify-center bg-gaming-bg">
    <div class="text-center">
      <div class="text-6xl mb-4 animate-bounce-in">🎮</div>
      <div class="text-2xl font-bold text-xbox-green mb-4">MLG.clan</div>
      <div class="flex space-x-1">
        <div class="w-3 h-3 bg-xbox-green rounded-full animate-loading-pulse"></div>
        <div class="w-3 h-3 bg-xbox-green rounded-full animate-loading-pulse" style="animation-delay: 0.2s;"></div>
        <div class="w-3 h-3 bg-xbox-green rounded-full animate-loading-pulse" style="animation-delay: 0.4s;"></div>
      </div>
    </div>
  </div>

  <!-- Notification Container -->
  <div id="notificationContainer" class="fixed top-4 right-4 z-40 space-y-4"></div>

  <!-- Header Navigation -->
  <header class="relative z-30 bg-black bg-opacity-50 backdrop-filter backdrop-blur-lg border-b border-xbox-green border-opacity-30">
    <nav class="container mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <!-- Logo and Brand -->
        <div class="flex items-center space-x-4">
          <div class="text-3xl font-bold text-xbox-green flex items-center">
            <span class="text-4xl mr-2">🎮</span>
            MLG.clan
          </div>
          <div class="hidden md:block text-sm text-gray-400">
            Ultimate Gaming Platform
          </div>
        </div>

        <!-- Desktop Navigation -->
        <div class="hidden lg:flex items-center space-x-8">
          <a href="#" class="nav-link text-white hover:text-xbox-green px-4 py-2 rounded transition-colors" data-section="dashboard">
            Dashboard
          </a>
          <a href="#" class="nav-link text-white hover:text-xbox-green px-4 py-2 rounded transition-colors" data-section="clans">
            Clans
          </a>
          <a href="#" class="nav-link text-white hover:text-xbox-green px-4 py-2 rounded transition-colors" data-section="voting">
            Voting
          </a>
          <a href="#" class="nav-link text-white hover:text-xbox-green px-4 py-2 rounded transition-colors" data-section="content">
            Content Hub
          </a>
          <a href="#" class="nav-link text-white hover:text-xbox-green px-4 py-2 rounded transition-colors" data-section="achievements">
            Achievements
          </a>
          <a href="#" class="nav-link text-white hover:text-xbox-green px-4 py-2 rounded transition-colors" data-section="treasury">
            Treasury
          </a>
        </div>

        <!-- User Profile and Wallet -->
        <div class="header-actions flex items-center space-x-4">
          <!-- Real-time Connection Status -->
          <div class="hidden md:flex items-center space-x-2 bg-gaming-surface px-3 py-2 rounded-lg border border-gray-600">
            <div id="connectionStatus" class="text-sm text-yellow-400">🔄 Connecting...</div>
          </div>

          <!-- MLG Token Balance -->
          <div id="tokenBalance" class="hidden md:flex items-center space-x-2 bg-gaming-surface px-4 py-2 rounded-lg border border-xbox-green border-opacity-30">
            <div class="w-6 h-6 bg-gradient-to-r from-xbox-green to-gaming-accent rounded-full flex items-center justify-center text-xs font-bold">
              M
            </div>
            <span class="text-sm font-semibold" id="balanceAmount">--</span>
            <span class="text-xs text-gray-400">MLG</span>
          </div>

          <!-- Wallet Connection -->
          <button id="walletConnectBtn" class="wallet-connect-btn text-white px-6 py-2 rounded-lg font-semibold focus:outline-none focus:ring-2 focus:ring-xbox-green">
            <span id="walletBtnText">Connect Wallet</span>
          </button>

          <!-- User Menu -->
          <div class="relative user-menu">
            <button id="userMenuBtn" class="flex items-center space-x-2 bg-gaming-surface px-4 py-2 rounded-lg border border-xbox-green border-opacity-30 hover:border-xbox-green transition-colors">
              <div id="userAvatar" class="w-8 h-8 bg-gradient-to-r from-xbox-green to-gaming-accent rounded-full flex items-center justify-center text-sm font-bold">
                ?
              </div>
              <span id="userGamertag" class="hidden md:block text-sm font-semibold">Guest</span>
              <i data-lucide="chevron-down" class="w-4 h-4"></i>
            </button>
            
            <div id="userDropdown" class="absolute right-0 top-full mt-2 w-64 bg-gaming-surface border border-xbox-green border-opacity-30 rounded-lg shadow-xl hidden">
              <div class="p-4 border-b border-gray-700">
                <div class="flex items-center space-x-3">
                  <div class="w-12 h-12 bg-gradient-to-r from-xbox-green to-gaming-accent rounded-full flex items-center justify-center text-lg font-bold">
                    ?
                  </div>
                  <div>
                    <div class="font-semibold" id="dropdownGamertag">Guest User</div>
                    <div class="text-sm text-gray-400" id="dropdownStatus">Offline</div>
                  </div>
                </div>
              </div>
              <div class="p-2">
                <a href="#" class="block px-4 py-2 hover:bg-xbox-green hover:bg-opacity-20 rounded transition-colors" data-section="profile">
                  <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>Profile
                </a>
                <a href="#" class="block px-4 py-2 hover:bg-xbox-green hover:bg-opacity-20 rounded transition-colors">
                  <i data-lucide="settings" class="w-4 h-4 inline mr-2"></i>Settings
                </a>
                <a href="#" class="block px-4 py-2 hover:bg-xbox-green hover:bg-opacity-20 rounded transition-colors">
                  <i data-lucide="help-circle" class="w-4 h-4 inline mr-2"></i>Help
                </a>
                <hr class="my-2 border-gray-700">
                <a href="#" class="block px-4 py-2 hover:bg-red-600 hover:bg-opacity-20 rounded transition-colors text-red-400">
                  <i data-lucide="log-out" class="w-4 h-4 inline mr-2"></i>Logout
                </a>
              </div>
            </div>
          </div>

          <!-- Mobile Menu Button -->
          <button id="mobileMenuBtn" class="lg:hidden p-2 rounded-lg bg-gaming-surface border border-xbox-green border-opacity-30">
            <i data-lucide="menu" class="w-6 h-6"></i>
          </button>
        </div>
      </div>
    </nav>

    <!-- Mobile Navigation Menu -->
    <div id="mobileMenu" class="lg:hidden mobile-menu fixed inset-y-0 left-0 z-40 w-64 bg-gaming-bg border-r border-xbox-green border-opacity-30">
      <div class="p-4">
        <div class="flex items-center justify-between mb-8">
          <div class="text-2xl font-bold text-xbox-green">MLG.clan</div>
          <button id="closeMobileMenu" class="p-2 rounded-lg hover:bg-gaming-surface">
            <i data-lucide="x" class="w-6 h-6"></i>
          </button>
        </div>
        
        <nav class="space-y-2">
          <a href="#" class="block px-4 py-3 rounded-lg hover:bg-xbox-green hover:bg-opacity-20 transition-colors" data-section="dashboard">
            <i data-lucide="home" class="w-5 h-5 inline mr-3"></i>Dashboard
          </a>
          <a href="#" class="block px-4 py-3 rounded-lg hover:bg-xbox-green hover:bg-opacity-20 transition-colors" data-section="clans">
            <i data-lucide="users" class="w-5 h-5 inline mr-3"></i>Clans
          </a>
          <a href="#" class="block px-4 py-3 rounded-lg hover:bg-xbox-green hover:bg-opacity-20 transition-colors" data-section="voting">
            <i data-lucide="vote" class="w-5 h-5 inline mr-3"></i>Voting
          </a>
          <a href="#" class="block px-4 py-3 rounded-lg hover:bg-xbox-green hover:bg-opacity-20 transition-colors" data-section="content">
            <i data-lucide="video" class="w-5 h-5 inline mr-3"></i>Content Hub
          </a>
          <a href="#" class="block px-4 py-3 rounded-lg hover:bg-xbox-green hover:bg-opacity-20 transition-colors" data-section="achievements">
            <i data-lucide="trophy" class="w-5 h-5 inline mr-3"></i>Achievements
          </a>
          <a href="#" class="block px-4 py-3 rounded-lg hover:bg-xbox-green hover:bg-opacity-20 transition-colors" data-section="treasury">
            <i data-lucide="dollar-sign" class="w-5 h-5 inline mr-3"></i>Treasury
          </a>
          <a href="#" class="block px-4 py-3 rounded-lg hover:bg-xbox-green hover:bg-opacity-20 transition-colors" data-section="profile">
            <i data-lucide="user" class="w-5 h-5 inline mr-3"></i>Profile
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Breadcrumb Navigation -->
  <div class="bg-black bg-opacity-30 border-b border-gray-800">
    <div class="container mx-auto px-4 py-3">
      <nav id="breadcrumb-nav" class="flex items-center space-x-2 text-sm text-gray-400">
        <span class="breadcrumb-item active">
          <i data-lucide="home" class="w-4 h-4 inline mr-1"></i>
          Dashboard
        </span>
      </nav>
    </div>
  </div>

  <!-- Global Search Bar -->
  <div id="globalSearchOverlay" class="fixed inset-0 bg-black bg-opacity-90 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="w-full max-w-2xl">
        <div class="relative">
          <input type="text" id="globalSearchInput" 
                 class="w-full px-6 py-4 bg-gray-800 text-white rounded-xl border border-xbox-green focus:outline-none focus:ring-2 focus:ring-xbox-green text-lg" 
                 placeholder="Search across all platform content...">
          <button id="closeGlobalSearch" 
                  class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white">
            <i data-lucide="x" class="w-6 h-6"></i>
          </button>
        </div>
        <div id="globalSearchResults" class="mt-4 bg-gray-800 rounded-xl max-h-96 overflow-y-auto hidden">
          <!-- Search results will be populated here -->
        </div>
        <div class="mt-4 text-center text-gray-400 text-sm">
          <p>Search across clans, voting proposals, content, achievements, and more</p>
          <p class="mt-2">Press <kbd class="bg-gray-700 px-2 py-1 rounded text-xs">Esc</kbd> to close</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Performance Monitor (Development) -->
  <div id="performanceMonitor" class="fixed bottom-4 left-4 bg-black bg-opacity-75 text-white p-2 rounded text-xs z-40 hidden">
    <div>Render Time: <span id="renderTime">--</span>ms</div>
    <div>Cache Hits: <span id="cacheHits">0</span></div>
    <div>Cache Misses: <span id="cacheMisses">0</span></div>
  </div>

  <!-- Main Content Area -->
  <main class="container mx-auto px-4 py-8 min-h-screen">
    <!-- Dashboard Section -->
    <section id="dashboardSection" class="section-content">
      <!-- Welcome Header -->
      <div class="mb-8 text-center">
        <h1 class="text-4xl md:text-6xl font-bold text-xbox-green mb-4 animate-fade-in">
          Welcome to MLG.clan
        </h1>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto animate-fade-in">
          The ultimate gaming community platform where clans compete, creators earn, and members govern through blockchain technology
        </p>
      </div>

      <!-- Quick Stats Dashboard -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        <div class="gaming-tile rounded-lg p-4 text-center animate-bounce-in">
          <div class="text-2xl font-bold text-xbox-green" id="userRank">--</div>
          <div class="text-sm text-gray-400">Global Rank</div>
        </div>
        
        <div class="gaming-tile rounded-lg p-4 text-center animate-bounce-in" style="animation-delay: 0.1s;">
          <div class="text-2xl font-bold text-vault-purple" id="votingPower">--</div>
          <div class="text-sm text-gray-400">Voting Power</div>
        </div>
        
        <div class="gaming-tile rounded-lg p-4 text-center animate-bounce-in" style="animation-delay: 0.2s;">
          <div class="text-2xl font-bold text-achievement-gold" id="achievementCount">--</div>
          <div class="text-sm text-gray-400">Achievements</div>
        </div>
        
        <div class="gaming-tile rounded-lg p-4 text-center animate-bounce-in" style="animation-delay: 0.3s;">
          <div class="text-2xl font-bold text-gaming-accent" id="contentCount">--</div>
          <div class="text-sm text-gray-400">Content Pieces</div>
        </div>
      </div>

      <!-- Main Platform Features Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <!-- Clan Management Tile -->
        <div class="gaming-tile rounded-xl p-6 cursor-pointer group" data-section="clans">
          <div class="flex items-center justify-between mb-4">
            <div class="text-2xl">👥</div>
            <div class="clan-emblem legendary text-black text-sm">MLG</div>
          </div>
          <h3 class="text-xl font-bold text-xbox-green mb-2">Clan Management</h3>
          <p class="text-gray-300 text-sm mb-4">Manage your clan, recruit members, and climb the leaderboards</p>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-400">Members: <span id="clanMemberCount">--</span></span>
            <span class="text-xbox-green">Tier: <span id="clanTier">--</span></span>
          </div>
        </div>

        <!-- Voting Vault Tile -->
        <div class="gaming-tile rounded-xl p-6 cursor-pointer group animate-vault-pulse" data-section="voting">
          <div class="flex items-center justify-between mb-4">
            <div class="text-2xl">🗳️</div>
            <div class="text-vault-purple font-bold text-sm">VAULT</div>
          </div>
          <h3 class="text-xl font-bold text-vault-purple mb-2">Vote Vault</h3>
          <p class="text-gray-300 text-sm mb-4">Participate in DAO governance and burn tokens to vote</p>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-400">Active Proposals: <span id="activeProposals">--</span></span>
            <span class="text-vault-purple">Power: <span id="userVotingPower">--</span></span>
          </div>
        </div>

        <!-- Content Hub Tile -->
        <div class="gaming-tile rounded-xl p-6 cursor-pointer group" data-section="content">
          <div class="flex items-center justify-between mb-4">
            <div class="text-2xl">📹</div>
            <div class="text-gaming-accent font-bold text-sm">CREATE</div>
          </div>
          <h3 class="text-xl font-bold text-gaming-accent mb-2">Content Hub</h3>
          <p class="text-gray-300 text-sm mb-4">Upload clips, browse content, and earn rewards for quality submissions</p>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-400">Your Content: <span id="userContentCount">--</span></span>
            <span class="text-gaming-accent">Rewards: <span id="contentRewards">--</span></span>
          </div>
        </div>

        <!-- Achievements Tile -->
        <div class="gaming-tile rounded-xl p-6 cursor-pointer group" data-section="achievements">
          <div class="flex items-center justify-between mb-4">
            <div class="text-2xl">🏆</div>
            <div class="achievement-badge text-black text-sm px-2 py-1 rounded">HALL</div>
          </div>
          <h3 class="text-xl font-bold text-achievement-gold mb-2">Achievement Hall</h3>
          <p class="text-gray-300 text-sm mb-4">Track your progress and showcase your gaming accomplishments</p>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-400">Unlocked: <span id="unlockedAchievements">--</span></span>
            <span class="text-achievement-gold">Score: <span id="gamerScore">--</span>G</span>
          </div>
        </div>

        <!-- Treasury Dashboard Tile -->
        <div class="gaming-tile rounded-xl p-6 cursor-pointer group" data-section="treasury">
          <div class="flex items-center justify-between mb-4">
            <div class="text-2xl">💰</div>
            <div class="text-xbox-green font-bold text-sm">DAO</div>
          </div>
          <h3 class="text-xl font-bold text-xbox-green mb-2">Treasury</h3>
          <p class="text-gray-300 text-sm mb-4">View DAO treasury status and financial metrics</p>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-400">Total Value: <span id="treasuryValue">--</span></span>
            <span class="text-xbox-green">APY: <span id="treasuryAPY">--</span>%</span>
          </div>
        </div>

        <!-- Profile Tile -->
        <div class="gaming-tile rounded-xl p-6 cursor-pointer group" data-section="profile">
          <div class="flex items-center justify-between mb-4">
            <div class="text-2xl">👤</div>
            <div class="status-indicator online"></div>
          </div>
          <h3 class="text-xl font-bold text-white mb-2">Your Profile</h3>
          <p class="text-gray-300 text-sm mb-4">Customize your gaming identity and track your statistics</p>
          <div class="flex items-center justify-between text-sm">
            <span class="text-gray-400">Level: <span id="userLevel">--</span></span>
            <span class="text-white">XP: <span id="userXP">--</span></span>
          </div>
        </div>
      </div>

      <!-- Recent Activity Feed -->
      <div class="xbox-blade rounded-xl p-6">
        <h3 class="text-2xl font-bold text-xbox-green mb-6 flex items-center">
          <i data-lucide="activity" class="w-6 h-6 mr-3"></i>
          Recent Activity
        </h3>
        <div id="activityFeed" class="space-y-4">
          <!-- Activity items will be populated by JavaScript -->
          <div class="flex items-center space-x-4 p-4 bg-gaming-surface rounded-lg">
            <div class="w-2 h-2 bg-xbox-green rounded-full animate-pulse-glow"></div>
            <div>
              <div class="text-sm text-gray-300">Loading recent activity...</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Demo Links Section -->
      <div class="mt-8 xbox-blade rounded-xl p-6">
        <h3 class="text-2xl font-bold text-xbox-green mb-6">🔗 Demo & Test Pages</h3>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
          <a href="mlg-clan-complete.html" class="block p-4 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors border border-xbox-green border-opacity-30">
            <div class="font-semibold text-xbox-green mb-2">Complete Demo</div>
            <div class="text-sm text-gray-400">Full platform demonstration</div>
          </a>
          <a href="src/ui/examples/clan-management-demo.html" class="block p-4 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors border border-xbox-green border-opacity-30">
            <div class="font-semibold text-xbox-green mb-2">Clan Management</div>
            <div class="text-sm text-gray-400">Clan management interface</div>
          </a>
          <a href="src/ui/examples/vote-display-standalone.html" class="block p-4 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors border border-xbox-green border-opacity-30">
            <div class="font-semibold text-xbox-green mb-2">Voting System</div>
            <div class="text-sm text-gray-400">DAO voting interface</div>
          </a>
          <a href="content-submission-prototype.html" class="block p-4 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors border border-xbox-green border-opacity-30">
            <div class="font-semibold text-xbox-green mb-2">Content Submission</div>
            <div class="text-sm text-gray-400">Content upload form</div>
          </a>
          <a href="src/content/content-moderation-demo.html" class="block p-4 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors border border-xbox-green border-opacity-30">
            <div class="font-semibold text-xbox-green mb-2">Content Moderation</div>
            <div class="text-sm text-gray-400">Moderation queue interface</div>
          </a>
          <a href="src/ui/examples/wallet-ui-demo.html" class="block p-4 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors border border-xbox-green border-opacity-30">
            <div class="font-semibold text-xbox-green mb-2">Wallet Integration</div>
            <div class="text-sm text-gray-400">Phantom wallet demo</div>
          </a>
        </div>
      </div>
    </section>

    <!-- Clans Section - Functional Clan Management -->
    <section id="clansSection" class="section-content hidden">
      <div class="mb-8">
        <h2 class="text-3xl font-bold text-xbox-green mb-4 flex items-center">
          <i data-lucide="users" class="w-8 h-8 mr-3"></i>
          Clan Management
        </h2>
        <p class="text-gray-300">Manage your clan, recruit members, and dominate the leaderboards with MLG token staking</p>
      </div>

      <!-- React Clan Management Interface -->
      <div id="clan-management-root" class="min-h-screen">
        <!-- Clan management React component will be rendered here -->
        <div class="text-center py-12">
          <div class="xbox-blade rounded-xl p-8 max-w-md mx-auto">
            <div class="text-4xl mb-4 animate-pulse">🎮</div>
            <div class="text-lg text-gray-300 mb-4">Initializing Clan System...</div>
            <div class="text-sm text-gray-400">Connecting to blockchain and loading clan data</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Voting Section -->
    <section id="votingSection" class="section-content hidden">
      <div class="mb-8">
        <h2 class="text-3xl font-bold text-vault-purple mb-4 flex items-center">
          <i data-lucide="vote" class="w-8 h-8 mr-3"></i>
          Vote Vault
        </h2>
        <p class="text-gray-300">Participate in DAO governance by burning MLG tokens to cast your vote</p>
      </div>

      <!-- Wallet Connection Required Overlay -->
      <div id="votingWalletRequired" class="text-center py-12 hidden">
        <div class="xbox-blade rounded-xl p-8 max-w-md mx-auto">
          <div class="text-6xl mb-4">🔐</div>
          <h3 class="text-2xl font-bold text-vault-purple mb-4">Wallet Required</h3>
          <p class="text-gray-300 mb-6">Connect your Phantom wallet to participate in DAO governance</p>
          <button id="connectWalletForVoting" class="bg-vault-purple hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
            Connect Phantom Wallet
          </button>
        </div>
      </div>

      <!-- Main Voting Interface -->
      <div id="votingMainInterface" class="grid lg:grid-cols-4 gap-6">
        <!-- Vote Status Dashboard -->
        <div class="lg:col-span-1">
          <div id="voteStatusDashboard" class="xbox-blade rounded-xl p-6 animate-vault-pulse">
            <!-- Vote Status Dashboard component will be rendered here -->
          </div>
          
          <!-- SOL Fee Display -->
          <div id="solFeeDisplay" class="xbox-blade rounded-xl p-6 mt-4">
            <!-- SOL Fee Display component will be rendered here -->
          </div>
        </div>

        <!-- Active Proposals and Voting Interface -->
        <div class="lg:col-span-3">
          <!-- Burn to Vote Interface -->
          <div id="burnToVoteInterface" class="xbox-blade rounded-xl p-6 mb-6">
            <!-- Burn to Vote Interface component will be rendered here -->
          </div>
          
          <!-- Active Proposals -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-xl font-bold mb-4 text-vault-purple">Active Proposals</h3>
            <div id="proposalsList">
              <!-- Proposals will be loaded here by the voting system -->
              <div class="text-center py-8">
                <div class="text-4xl mb-4">🗳️</div>
                <div class="text-lg text-gray-300">Loading active proposals...</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Containers -->
      <div id="burnConfirmationModalContainer"></div>
      <div id="transactionConfirmationModalContainer"></div>
    </section>

    <!-- Content Hub Section -->
    <section id="contentSection" class="section-content hidden">
      <div class="mb-8">
        <h2 class="text-3xl font-bold text-gaming-accent mb-4 flex items-center">
          <i data-lucide="video" class="w-8 h-8 mr-3"></i>
          Content Hub
        </h2>
        <p class="text-gray-300">Share your best gaming moments and discover amazing content from the community</p>
      </div>

      <div class="grid lg:grid-cols-4 gap-6">
        <!-- Content Submission System -->
        <div class="lg:col-span-1">
          <div id="content-submission-container" class="space-y-4">
            <!-- Real content submission form will be injected here -->
            <div class="xbox-blade rounded-xl p-6">
              <div class="text-center py-8">
                <div class="loading-spinner mx-auto mb-4" style="width: 32px; height: 32px; border: 2px solid #4b5563; border-radius: 50%; border-top-color: #10b981; animation: spin 1s ease-in-out infinite;"></div>
                <div class="text-lg text-gray-300">Initializing content submission...</div>
              </div>
            </div>
          </div>

          <!-- Creator Stats Dashboard -->
          <div class="xbox-blade rounded-xl p-6 mt-4" id="creator-stats">
            <h3 class="text-xl font-bold text-gaming-accent mb-4">Creator Dashboard</h3>
            <div class="space-y-3">
              <div class="flex justify-between">
                <span class="text-gray-400">Total Uploads</span>
                <span class="font-bold" id="totalUploads">0</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">Total Views</span>
                <span class="font-bold" id="totalViews">0</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">MLG Earned</span>
                <span class="font-bold text-gaming-accent" id="earnedMLG">0</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">Content Rating</span>
                <span class="font-bold text-yellow-400" id="contentRating">⭐⭐⭐⭐⭐</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">Reputation</span>
                <span class="font-bold text-blue-400" id="creatorReputation">Trusted</span>
              </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="mt-4 pt-4 border-t border-gaming-accent border-opacity-20">
              <h4 class="text-sm font-bold text-gaming-accent mb-2">Quick Actions</h4>
              <div class="flex flex-wrap gap-2">
                <button class="px-3 py-1 bg-gaming-accent bg-opacity-20 rounded text-xs hover:bg-opacity-30 transition-colors" id="view-analytics">
                  📊 Analytics
                </button>
                <button class="px-3 py-1 bg-vault-purple bg-opacity-20 rounded text-xs hover:bg-opacity-30 transition-colors" id="content-history">
                  📋 History
                </button>
                <button class="px-3 py-1 bg-red-600 bg-opacity-20 rounded text-xs hover:bg-opacity-30 transition-colors" id="moderation-queue">
                  🛡️ Moderation
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Content Gallery & Feed -->
        <div class="lg:col-span-3">
          <!-- Content Display Controls -->
          <div class="xbox-blade rounded-xl p-6 mb-4">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-bold text-gaming-accent">Community Content</h3>
              <div class="flex items-center space-x-3">
                <!-- Sort Options -->
                <div class="flex space-x-2" id="content-sort-controls">
                  <button class="px-4 py-2 bg-gaming-accent bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-colors text-sm font-medium active" data-sort="trending">
                    🔥 Trending
                  </button>
                  <button class="px-4 py-2 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors text-sm font-medium" data-sort="top">
                    ⭐ Top Rated
                  </button>
                  <button class="px-4 py-2 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors text-sm font-medium" data-sort="latest">
                    ⚡ Latest
                  </button>
                  <button class="px-4 py-2 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors text-sm font-medium" data-sort="hot">
                    🚀 Hot
                  </button>
                </div>
                
                <!-- View Mode Toggle -->
                <div class="flex border border-gaming-accent border-opacity-30 rounded-lg overflow-hidden">
                  <button class="px-3 py-2 bg-gaming-accent bg-opacity-20 hover:bg-opacity-30 transition-colors" id="grid-view" data-view="grid">
                    <i data-lucide="grid-3x3" class="w-4 h-4"></i>
                  </button>
                  <button class="px-3 py-2 hover:bg-gaming-accent hover:bg-opacity-20 transition-colors" id="list-view" data-view="list">
                    <i data-lucide="list" class="w-4 h-4"></i>
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Search and Filter -->
            <div class="flex items-center space-x-4 mb-4">
              <div class="flex-1 relative">
                <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"></i>
                <input 
                  type="text" 
                  placeholder="Search content..." 
                  class="w-full pl-10 pr-4 py-2 bg-gaming-surface border border-gaming-accent border-opacity-20 rounded-lg focus:border-gaming-accent focus:outline-none transition-colors"
                  id="content-search"
                >
              </div>
              
              <select class="px-4 py-2 bg-gaming-surface border border-gaming-accent border-opacity-20 rounded-lg focus:border-gaming-accent focus:outline-none transition-colors" id="content-filter">
                <option value="">All Categories</option>
                <option value="highlights">⚡ Highlights</option>
                <option value="gameplay">🎮 Full Gameplay</option>
                <option value="tutorials">📚 Tutorials</option>
                <option value="funny">😂 Funny Moments</option>
                <option value="competitive">🏆 Competitive</option>
                <option value="speedrun">🏃 Speedruns</option>
              </select>
              
              <select class="px-4 py-2 bg-gaming-surface border border-gaming-accent border-opacity-20 rounded-lg focus:border-gaming-accent focus:outline-none transition-colors" id="platform-filter">
                <option value="">All Platforms</option>
                <option value="xbox">🎮 Xbox</option>
                <option value="playstation">🎮 PlayStation</option>
                <option value="pc">💻 PC</option>
                <option value="mobile">📱 Mobile</option>
              </select>
            </div>
          </div>

          <!-- Real Content Display Container -->
          <div id="content-display-container">
            <!-- Loading state -->
            <div class="xbox-blade rounded-xl p-6" id="content-loading">
              <div class="text-center py-8">
                <div class="loading-spinner mx-auto mb-4" style="width: 32px; height: 32px; border: 2px solid #4b5563; border-radius: 50%; border-top-color: #10b981; animation: spin 1s ease-in-out infinite;"></div>
                <div class="text-lg text-gray-300">Loading community content...</div>
              </div>
            </div>
            
            <!-- Content will be dynamically rendered here by ContentDisplayComponents -->
            <div id="content-grid" class="hidden space-y-4">
              <!-- Real content items will be populated here -->
            </div>
          </div>

          <!-- Moderation Queue (Admin/Moderator Only) -->
          <div id="moderation-queue-container" class="mt-6 hidden">
            <div class="xbox-blade rounded-xl p-6">
              <h3 class="text-xl font-bold text-red-400 mb-4 flex items-center">
                <i data-lucide="shield" class="w-6 h-6 mr-2"></i>
                Content Moderation Queue
              </h3>
              <div id="moderation-queue-content">
                <!-- Moderation interface will be loaded here -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Achievements Section -->
    <section id="achievementsSection" class="section-content hidden">
      <div class="mb-8">
        <h2 class="text-3xl font-bold text-achievement-gold mb-4 flex items-center">
          <i data-lucide="trophy" class="w-8 h-8 mr-3"></i>
          Achievement Hall
        </h2>
        <p class="text-gray-300">Track your progress and showcase your gaming accomplishments</p>
      </div>

      <div class="grid lg:grid-cols-4 gap-6">
        <!-- Gamer Profile -->
        <div class="lg:col-span-1">
          <div class="xbox-blade rounded-xl p-6 text-center">
            <div class="w-20 h-20 bg-gradient-to-r from-achievement-gold to-gaming-accent rounded-full mx-auto mb-4 flex items-center justify-center text-2xl font-bold animate-score-glow">
              ?
            </div>
            <div class="font-bold text-xl mb-2" id="achievementGamertag">Guest</div>
            <div class="text-achievement-gold font-bold text-lg mb-4">
              <span id="displayGamerScore">0</span>G
            </div>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span>Level:</span>
                <span class="font-bold" id="achievementLevel">1</span>
              </div>
              <div class="flex justify-between">
                <span>Completion:</span>
                <span class="font-bold" id="completionRate">0%</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Achievement Grid -->
        <div class="lg:col-span-3">
          <div class="xbox-blade rounded-xl p-6">
            <div class="flex items-center justify-between mb-6">
              <h3 class="text-xl font-bold">Your Achievements</h3>
              <div class="text-sm text-gray-400">
                <span id="unlockedCount">0</span> of <span id="totalCount">0</span> unlocked
              </div>
            </div>
            
            <div id="achievementGrid" class="grid md:grid-cols-2 xl:grid-cols-3 gap-4">
              <!-- Achievement items will be loaded here -->
              <div class="text-center py-8 md:col-span-2 xl:col-span-3">
                <div class="text-4xl mb-4">🏆</div>
                <div class="text-lg text-gray-300">Loading achievements...</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Treasury Section -->
    <section id="treasurySection" class="section-content hidden">
      <div class="mb-8">
        <h2 class="text-3xl font-bold text-xbox-green mb-4 flex items-center">
          <i data-lucide="dollar-sign" class="w-8 h-8 mr-3"></i>
          DAO Treasury Dashboard
        </h2>
        <p class="text-gray-300">Monitor the health and performance of the MLG.clan DAO treasury</p>
      </div>

      <div class="grid lg:grid-cols-3 gap-6">
        <!-- Treasury Overview -->
        <div class="lg:col-span-2 space-y-6">
          <!-- Key Metrics -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-xl font-bold mb-4">Treasury Metrics</h3>
            <div class="grid md:grid-cols-3 gap-4">
              <div class="bg-gaming-surface p-4 rounded-lg text-center">
                <div class="text-2xl font-bold text-xbox-green" id="treasuryTotal">$--</div>
                <div class="text-sm text-gray-400">Total Value</div>
              </div>
              <div class="bg-gaming-surface p-4 rounded-lg text-center">
                <div class="text-2xl font-bold text-gaming-accent" id="monthlyGrowth">--%</div>
                <div class="text-sm text-gray-400">Monthly Growth</div>
              </div>
              <div class="bg-gaming-surface p-4 rounded-lg text-center">
                <div class="text-2xl font-bold text-vault-purple" id="stakingAPY">--%</div>
                <div class="text-sm text-gray-400">Staking APY</div>
              </div>
            </div>
          </div>

          <!-- Asset Allocation -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-xl font-bold mb-4">Asset Allocation</h3>
            <div id="assetAllocation" class="space-y-3">
              <!-- Asset allocation will be loaded here -->
              <div class="text-center py-4">
                <div class="text-lg text-gray-300">Loading asset allocation...</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Treasury Actions -->
        <div class="space-y-4">
          <div class="xbox-blade rounded-xl p-4">
            <h4 class="font-bold text-xbox-green mb-3">Treasury Actions</h4>
            <div class="space-y-2">
              <button class="w-full p-3 bg-xbox-green bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-left">
                <i data-lucide="trending-up" class="w-4 h-4 inline mr-2"></i>
                View Proposals
              </button>
              <button class="w-full p-3 bg-vault-purple bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-left">
                <i data-lucide="pie-chart" class="w-4 h-4 inline mr-2"></i>
                Analytics Dashboard
              </button>
              <button class="w-full p-3 bg-gaming-accent bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-left">
                <i data-lucide="download" class="w-4 h-4 inline mr-2"></i>
                Export Reports
              </button>
            </div>
          </div>

          <div class="xbox-blade rounded-xl p-4">
            <h4 class="font-bold text-xbox-green mb-3">Recent Transactions</h4>
            <div id="recentTransactions" class="space-y-2 max-h-64 overflow-y-auto">
              <!-- Recent transactions will be loaded here -->
              <div class="text-center py-4">
                <div class="text-sm text-gray-300">Loading transactions...</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Profile Section -->
    <section id="profileSection" class="section-content hidden profile-section-fade-in">
      <div class="mb-8">
        <h2 class="text-3xl font-bold text-white mb-4 flex items-center">
          <i data-lucide="user" class="w-8 h-8 mr-3"></i>
          Your Profile Dashboard
        </h2>
        <p class="text-gray-300">Comprehensive overview of your gaming identity, achievements, and platform activities</p>
      </div>

      <!-- Profile Header -->
      <div class="xbox-blade rounded-xl p-6 mb-6">
        <div class="grid md:grid-cols-3 gap-6 items-center">
          <div class="text-center md:text-left">
            <div class="w-20 h-20 bg-gradient-to-r from-xbox-green to-gaming-accent rounded-full mx-auto md:mx-0 mb-4 flex items-center justify-center text-2xl font-bold animate-score-glow">
              <span id="profileAvatarText">?</span>
            </div>
            <button class="text-xbox-green hover:text-xbox-light transition-colors text-sm">
              <i data-lucide="camera" class="w-4 h-4 inline mr-1"></i>
              Change Avatar
            </button>
          </div>
          <div class="space-y-3">
            <div>
              <label class="block text-sm font-semibold mb-2 text-xbox-green">Gamertag</label>
              <input type="text" id="profileGamertag" placeholder="Enter your gamertag" 
                     class="w-full p-3 bg-gaming-surface border border-xbox-green border-opacity-30 rounded-lg focus:border-xbox-green focus:outline-none">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-2 text-xbox-green">Bio</label>
              <textarea id="profileBio" placeholder="Tell the gaming community about yourself..." rows="2"
                        class="w-full p-3 bg-gaming-surface border border-xbox-green border-opacity-30 rounded-lg focus:border-xbox-green focus:outline-none"></textarea>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-gaming-surface p-4 rounded-lg text-center">
              <div class="text-xl font-bold text-xbox-green" id="profileLevel">--</div>
              <div class="text-xs text-gray-400">Level</div>
            </div>
            <div class="bg-gaming-surface p-4 rounded-lg text-center">
              <div class="text-xl font-bold text-achievement-gold" id="profileGamerScore">--</div>
              <div class="text-xs text-gray-400">GamerScore</div>
            </div>
            <div class="bg-gaming-surface p-4 rounded-lg text-center">
              <div class="text-xl font-bold text-gaming-accent" id="profileXP">--</div>
              <div class="text-xs text-gray-400">Experience</div>
            </div>
            <div class="bg-gaming-surface p-4 rounded-lg text-center">
              <div class="text-xl font-bold text-vault-purple" id="profileRank">--</div>
              <div class="text-xs text-gray-400">Global Rank</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Dashboard Grid -->
      <div class="grid lg:grid-cols-12 gap-6">
        
        <!-- Left Column: Personal Stats & Wallet -->
        <div class="lg:col-span-4 space-y-6">
          
          <!-- MLG Token Balance & Wallet Info -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-lg font-bold mb-4 flex items-center">
              <i data-lucide="wallet" class="w-5 h-5 mr-2 text-xbox-green"></i>
              Wallet & Balance
            </h3>
            <div id="profileWalletInfo" class="space-y-4">
              <div class="text-center py-4">
                <div class="text-sm text-gray-400">Connect wallet to view balance</div>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-4 mt-4">
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-xbox-green" id="profileMLGBalance">--</div>
                <div class="text-xs text-gray-400">MLG Balance</div>
              </div>
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-gaming-accent" id="profileVotingPower">--</div>
                <div class="text-xs text-gray-400">Voting Power</div>
              </div>
            </div>
          </div>

          <!-- Clan Integration -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-lg font-bold mb-4 flex items-center">
              <i data-lucide="shield" class="w-5 h-5 mr-2 text-xbox-green"></i>
              Clan Status
            </h3>
            <div id="profileClanInfo">
              <div class="text-center py-4">
                <div class="loading-spinner mx-auto mb-2" style="width: 20px; height: 20px; border: 2px solid #4b5563; border-radius: 50%; border-top-color: #6ab04c; animation: spin 1s ease-in-out infinite;"></div>
                <div class="text-sm text-gray-400">Loading clan information...</div>
              </div>
            </div>
          </div>

          <!-- Quick Settings -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-lg font-bold mb-4 flex items-center">
              <i data-lucide="settings" class="w-5 h-5 mr-2 text-xbox-green"></i>
              Privacy & Notifications
            </h3>
            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <span class="text-sm">Public Profile</span>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" class="sr-only peer" id="publicProfile">
                  <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-xbox-green"></div>
                </label>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm">Show Online Status</span>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" class="sr-only peer" id="showStatus" checked>
                  <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-xbox-green"></div>
                </label>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm">Achievement Alerts</span>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" class="sr-only peer" id="achievementNotifications" checked>
                  <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-xbox-green"></div>
                </label>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm">Governance Updates</span>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" class="sr-only peer" id="governanceNotifications">
                  <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-xbox-green"></div>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Center Column: Activity Dashboard -->
        <div class="lg:col-span-5 space-y-6">
          
          <!-- Voting History Dashboard -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-lg font-bold mb-4 flex items-center">
              <i data-lucide="vote" class="w-5 h-5 mr-2 text-burn-red"></i>
              Voting & Governance History
            </h3>
            <div class="grid grid-cols-3 gap-4 mb-4">
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-burn-red" id="profileTotalVotes">--</div>
                <div class="text-xs text-gray-400">Total Votes</div>
              </div>
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-burn-red" id="profileTokensBurned">--</div>
                <div class="text-xs text-gray-400">MLG Burned</div>
              </div>
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-gaming-accent" id="profileGovernanceRank">--</div>
                <div class="text-xs text-gray-400">Gov. Rank</div>
              </div>
            </div>
            <div class="space-y-3 max-h-48 overflow-y-auto">
              <h4 class="text-sm font-semibold text-xbox-green mb-2">Recent Burn Votes</h4>
              <div id="profileVotingHistory">
                <div class="text-center py-4">
                  <div class="loading-spinner mx-auto mb-2" style="width: 20px; height: 20px; border: 2px solid #4b5563; border-radius: 50%; border-top-color: #dc2626; animation: spin 1s ease-in-out infinite;"></div>
                  <div class="text-sm text-gray-400">Loading voting history...</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Content Performance Metrics -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-lg font-bold mb-4 flex items-center">
              <i data-lucide="video" class="w-5 h-5 mr-2 text-gaming-accent"></i>
              Content Creation Stats
            </h3>
            <div class="grid grid-cols-2 gap-4 mb-4">
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-gaming-accent" id="profileContentUploads">--</div>
                <div class="text-xs text-gray-400">Uploads</div>
              </div>
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-xbox-green" id="profileContentViews">--</div>
                <div class="text-xs text-gray-400">Total Views</div>
              </div>
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-achievement-gold" id="profileContentRewards">--</div>
                <div class="text-xs text-gray-400">MLG Earned</div>
              </div>
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-vault-purple" id="profileContentRating">--</div>
                <div class="text-xs text-gray-400">Avg Rating</div>
              </div>
            </div>
            <div class="space-y-2">
              <h4 class="text-sm font-semibold text-xbox-green mb-2">Content Performance</h4>
              <div class="bg-gaming-surface p-3 rounded-lg">
                <div class="flex justify-between text-sm mb-1">
                  <span>Community Standing</span>
                  <span class="text-xbox-green" id="profileCommunityStanding">Loading...</span>
                </div>
                <div class="w-full bg-gray-700 rounded-full h-2">
                  <div class="bg-xbox-green h-2 rounded-full transition-all duration-300" style="width: 0%" id="profileStandingBar"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Platform Engagement -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-lg font-bold mb-4 flex items-center">
              <i data-lucide="activity" class="w-5 h-5 mr-2 text-vault-purple"></i>
              Platform Activity
            </h3>
            <div class="grid grid-cols-2 gap-4 mb-4">
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-vault-purple" id="profileActiveDays">--</div>
                <div class="text-xs text-gray-400">Active Days</div>
              </div>
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-xbox-green" id="profileCurrentStreak">--</div>
                <div class="text-xs text-gray-400">Day Streak</div>
              </div>
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-gaming-accent" id="profileTotalSessions">--</div>
                <div class="text-xs text-gray-400">Sessions</div>
              </div>
              <div class="bg-gaming-surface p-3 rounded-lg text-center">
                <div class="text-lg font-bold text-achievement-gold" id="profileReputation">--</div>
                <div class="text-xs text-gray-400">Reputation</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column: Achievements & Actions -->
        <div class="lg:col-span-3 space-y-6">
          
          <!-- Achievement Progress -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-lg font-bold mb-4 flex items-center">
              <i data-lucide="trophy" class="w-5 h-5 mr-2 text-achievement-gold"></i>
              Achievement Progress
            </h3>
            <div class="text-center mb-4">
              <div class="text-2xl font-bold text-achievement-gold" id="profileAchievementPercent">--</div>
              <div class="text-xs text-gray-400">Completion Rate</div>
            </div>
            <div class="space-y-3 max-h-64 overflow-y-auto">
              <div id="profileRecentAchievements">
                <div class="text-center py-4">
                  <div class="loading-spinner mx-auto mb-2" style="width: 20px; height: 20px; border: 2px solid #4b5563; border-radius: 50%; border-top-color: #f59e0b; animation: spin 1s ease-in-out infinite;"></div>
                  <div class="text-sm text-gray-400">Loading achievements...</div>
                </div>
              </div>
            </div>
            <button class="view-all-achievements w-full mt-4 p-2 bg-achievement-gold bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-achievement-gold text-sm font-semibold">
              View All Achievements
            </button>
          </div>

          <!-- Transaction History -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-lg font-bold mb-4 flex items-center">
              <i data-lucide="history" class="w-5 h-5 mr-2 text-gaming-accent"></i>
              Recent Transactions
            </h3>
            <div class="space-y-2 max-h-48 overflow-y-auto">
              <div id="profileTransactionHistory">
                <div class="text-center py-4">
                  <div class="text-sm text-gray-400">No recent transactions</div>
                </div>
              </div>
            </div>
            <button class="w-full mt-4 p-2 bg-gaming-accent bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-gaming-accent text-sm font-semibold">
              View on Solana Explorer
            </button>
          </div>

          <!-- Account Actions -->
          <div class="xbox-blade rounded-xl p-6">
            <h3 class="text-lg font-bold mb-4 flex items-center">
              <i data-lucide="user-cog" class="w-5 h-5 mr-2 text-xbox-green"></i>
              Account Management
            </h3>
            <div class="space-y-2">
              <button class="save-profile-btn w-full p-3 bg-xbox-green bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-left text-sm">
                <i data-lucide="save" class="w-4 h-4 inline mr-2"></i>
                Save Profile Changes
              </button>
              <button class="export-data-btn w-full p-3 bg-gaming-accent bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-left text-sm">
                <i data-lucide="download" class="w-4 h-4 inline mr-2"></i>
                Export Gaming Data
              </button>
              <button class="share-profile-btn w-full p-3 bg-vault-purple bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-left text-sm">
                <i data-lucide="share-2" class="w-4 h-4 inline mr-2"></i>
                Share Profile
              </button>
              <button class="privacy-settings-btn w-full p-3 bg-yellow-600 bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-left text-sm text-yellow-400">
                <i data-lucide="alert-triangle" class="w-4 h-4 inline mr-2"></i>
                Privacy Settings
              </button>
              <button class="w-full p-3 bg-red-600 bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-left text-sm text-red-400">
                <i data-lucide="trash-2" class="w-4 h-4 inline mr-2"></i>
                Delete Account
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Achievement Categories Section -->
      <div class="mt-8 xbox-blade rounded-xl p-6">
        <h3 class="text-xl font-bold mb-6 flex items-center">
          <i data-lucide="award" class="w-6 h-6 mr-3 text-achievement-gold"></i>
          Achievement Categories & Progress
        </h3>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
          <div class="bg-gaming-surface p-4 rounded-lg border border-burn-red border-opacity-30">
            <div class="flex items-center mb-3">
              <div class="text-2xl mr-3">🗳️</div>
              <div>
                <h4 class="font-semibold text-burn-red">Voting & Governance</h4>
                <div class="text-xs text-gray-400">Democratic Participation</div>
              </div>
            </div>
            <div class="space-y-2">
              <div class="flex justify-between text-sm">
                <span>Progress</span>
                <span id="votingAchievementProgress">--/--</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-2">
                <div class="bg-burn-red h-2 rounded-full" style="width: 0%" id="votingProgressBar"></div>
              </div>
            </div>
          </div>
          
          <div class="bg-gaming-surface p-4 rounded-lg border border-gaming-accent border-opacity-30">
            <div class="flex items-center mb-3">
              <div class="text-2xl mr-3">📹</div>
              <div>
                <h4 class="font-semibold text-gaming-accent">Content Creation</h4>
                <div class="text-xs text-gray-400">Creative Excellence</div>
              </div>
            </div>
            <div class="space-y-2">
              <div class="flex justify-between text-sm">
                <span>Progress</span>
                <span id="contentAchievementProgress">--/--</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-2">
                <div class="bg-gaming-accent h-2 rounded-full" style="width: 0%" id="contentProgressBar"></div>
              </div>
            </div>
          </div>
          
          <div class="bg-gaming-surface p-4 rounded-lg border border-xbox-green border-opacity-30">
            <div class="flex items-center mb-3">
              <div class="text-2xl mr-3">🛡️</div>
              <div>
                <h4 class="font-semibold text-xbox-green">Clan Leadership</h4>
                <div class="text-xs text-gray-400">Team Building</div>
              </div>
            </div>
            <div class="space-y-2">
              <div class="flex justify-between text-sm">
                <span>Progress</span>
                <span id="clanAchievementProgress">--/--</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-2">
                <div class="bg-xbox-green h-2 rounded-full" style="width: 0%" id="clanProgressBar"></div>
              </div>
            </div>
          </div>
          
          <div class="bg-gaming-surface p-4 rounded-lg border border-achievement-gold border-opacity-30">
            <div class="flex items-center mb-3">
              <div class="text-2xl mr-3">🏆</div>
              <div>
                <h4 class="font-semibold text-achievement-gold">Competitive</h4>
                <div class="text-xs text-gray-400">Tournament Success</div>
              </div>
            </div>
            <div class="space-y-2">
              <div class="flex justify-between text-sm">
                <span>Progress</span>
                <span id="competitiveAchievementProgress">--/--</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-2">
                <div class="bg-achievement-gold h-2 rounded-full" style="width: 0%" id="competitiveProgressBar"></div>
              </div>
            </div>
          </div>
          
          <div class="bg-gaming-surface p-4 rounded-lg border border-vault-purple border-opacity-30">
            <div class="flex items-center mb-3">
              <div class="text-2xl mr-3">👥</div>
              <div>
                <h4 class="font-semibold text-vault-purple">Community</h4>
                <div class="text-xs text-gray-400">Social Impact</div>
              </div>
            </div>
            <div class="space-y-2">
              <div class="flex justify-between text-sm">
                <span>Progress</span>
                <span id="communityAchievementProgress">--/--</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-2">
                <div class="bg-vault-purple h-2 rounded-full" style="width: 0%" id="communityProgressBar"></div>
              </div>
            </div>
          </div>
          
          <div class="bg-gaming-surface p-4 rounded-lg border border-pink-500 border-opacity-30">
            <div class="flex items-center mb-3">
              <div class="text-2xl mr-3">🔥</div>
              <div>
                <h4 class="font-semibold text-pink-400">Streak Rewards</h4>
                <div class="text-xs text-gray-400">Consistency Bonus</div>
              </div>
            </div>
            <div class="space-y-2">
              <div class="flex justify-between text-sm">
                <span>Progress</span>
                <span id="streakAchievementProgress">--/--</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-2">
                <div class="bg-pink-400 h-2 rounded-full" style="width: 0%" id="streakProgressBar"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-black bg-opacity-50 border-t border-xbox-green border-opacity-30 mt-16">
    <div class="container mx-auto px-4 py-8">
      <div class="grid md:grid-cols-4 gap-8">
        <div>
          <div class="text-2xl font-bold text-xbox-green mb-4 flex items-center">
            🎮 MLG.clan
          </div>
          <p class="text-gray-400 text-sm">
            The ultimate gaming community platform powered by blockchain technology.
          </p>
        </div>
        
        <div>
          <h4 class="font-bold text-white mb-4">Platform</h4>
          <div class="space-y-2 text-sm">
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Dashboard</a>
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Clans</a>
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Voting</a>
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Content Hub</a>
          </div>
        </div>
        
        <div>
          <h4 class="font-bold text-white mb-4">Community</h4>
          <div class="space-y-2 text-sm">
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Discord</a>
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Twitter</a>
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Reddit</a>
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Blog</a>
          </div>
        </div>
        
        <div>
          <h4 class="font-bold text-white mb-4">Support</h4>
          <div class="space-y-2 text-sm">
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Help Center</a>
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">API Docs</a>
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Status</a>
            <a href="#" class="block text-gray-400 hover:text-xbox-green transition-colors">Contact</a>
          </div>
        </div>
      </div>
      
      <div class="border-t border-gray-700 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
        <div class="text-gray-400 text-sm">
          © 2025 MLG.clan. All rights reserved.
        </div>
        <div class="flex items-center space-x-4 text-sm text-gray-400 mt-4 md:mt-0">
          <span>MLG Token Contract:</span>
          <code class="bg-gaming-surface px-2 py-1 rounded text-xs">7XJiwLDrjzxDYdZipnJXzpr1iDTmK55XixSFAa7JgNEL</code>
        </div>
      </div>
    </div>
  </footer>

  <!-- Voting System Scripts (loaded for reference, using simplified integration) -->
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>
  <script src="https://unpkg.com/@solana/spl-token@latest/lib/index.iife.js"></script>

  <!-- Content System Scripts -->
  <script type="module" src="./src/ui/components/content-submission-form.js"></script>
  <script type="module" src="./src/content/content-validator.js"></script>
  <script type="module" src="./src/content/content-moderation.js"></script>
  <script type="module" src="./src/content/content-ranking-algorithm.js"></script>
  <script type="module" src="./src/ui/components/content-display-components.js"></script>
  <script type="module" src="./src/content/content-rewards.js"></script>

  <!-- Multi-Platform Video System Scripts - Sub-task 6.8 -->
  <script type="module" src="./src/content/multi-platform-video-embed.js"></script>
  <script type="module" src="./src/content/video-upload-enhancer.js"></script>
  <script type="module" src="./src/ui/components/multi-platform-video-input.js"></script>

  <!-- Clan Management System Scripts -->
  <script type="module" src="./src/clans/clan-management.js"></script>
  <script type="module" src="./src/clans/clan-voting.js"></script>
  <script type="module" src="./src/clans/clan-achievements.js"></script>
  <script type="module" src="./src/clans/clan-statistics.js"></script>
  <script type="module" src="./src/clans/clan-leaderboard.js"></script>

  <!-- Clan UI Components -->
  <script type="text/babel" src="./src/ui/components/clan-management-ui.js"></script>
  <script type="text/babel" src="./src/ui/components/clan-leaderboard-ui.js"></script>

  <!-- JavaScript -->
  <script type="module">
    // =============================================================================
    // MLG.CLAN UNIFIED PLATFORM - MAIN APPLICATION WITH VOTING INTEGRATION
    // =============================================================================
    
    // Import Phantom Wallet and MLG Token Integration
    import { PhantomWalletManager } from './src/wallet/phantom-wallet.js';
    import { MLGTokenManager, mlgTokenManager } from './src/tokens/spl-mlg-token.js';
    import { createConnection, CURRENT_NETWORK, MLG_TOKEN_CONFIG } from './src/config/solana-config.js';
    
    // Simplified voting system integration
    // In production, this would import from the actual voting system components
    
    class MLGPlatformApp {
      constructor() {
        this.currentSection = 'dashboard';
        this.walletConnected = false;
        this.userData = {
          gamertag: 'Guest',
          level: 1,
          xp: 0,
          gamerScore: 0,
          mlgBalance: 0,
          votingPower: 0,
          clanMember: false,
          achievements: []
        };
        this.mockData = this.initializeMockData();
        
        // Initialize WebSocket system
        this.websocket = null;
        this.wsConnectionState = 'disconnected'; // disconnected, connecting, connected, error
        this.wsReconnectAttempts = 0;
        this.wsMaxReconnectAttempts = 5;
        this.wsReconnectDelay = 2000;
        this.wsHeartbeatInterval = null;
        this.wsHeartbeatTimeout = null;
        this.wsSubscriptions = new Set();
        this.wsMessageQueue = [];
        this.wsNotificationQueue = [];
        
        // Initialize voting system
        this.votingSystem = null;
        this.votingComponents = {};
        
        // Initialize content system
        this.contentSubmissionForm = null;
        this.contentValidator = null;
        this.contentModeration = null;
        this.contentDisplayComponents = null;
        this.contentRanking = null;
        this.contentRewards = null;
        
        // Initialize wallet system
        this.phantomWalletManager = null;
        this.mlgTokenManager = null;
        this.solanaConnection = null;
        
        this.init();
      }

      async init() {
        try {
          this.initializeLucideIcons();
          this.setupEventListeners();
          this.setupNavigationHandlers();
          this.setupMockDataGeneration();
          this.initializeVotingSystem();
          await this.initializeContentSystem();
          await this.initializeWalletSystem();
          
          // Initialize WebSocket real-time system
          await this.initializeWebSocketSystem();
          
          await this.loadInitialData();
          this.hideLoadingScreen();
          this.startPeriodicUpdates();
        } catch (error) {
          console.error('Failed to initialize MLG Platform:', error);
          this.showNotification('Failed to initialize platform', 'error');
        }
      }

      initializeLucideIcons() {
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }

      initializeVotingSystem() {
        // Initialize simplified voting system for demo integration
        // In production, this would initialize the actual SolanaVotingSystem
        this.votingSystem = {
          initialized: true,
          connected: false
        };
        
        // Initialize voting UI components (simplified for demo)
        this.votingComponents = {};

        // Setup voting event listeners
        this.setupVotingEventListeners();
        
        // Show wallet required overlay initially
        this.updateVotingInterface();
      }

      setupVotingEventListeners() {
        // Connect wallet button in voting section
        const connectWalletBtn = document.getElementById('connectWalletForVoting');
        if (connectWalletBtn) {
          connectWalletBtn.addEventListener('click', () => this.connectWallet());
        }

        // Listen for wallet connection changes
        document.addEventListener('walletConnected', () => {
          this.updateVotingInterface();
          this.loadVotingData();
        });

        document.addEventListener('walletDisconnected', () => {
          this.updateVotingInterface();
        });
      }

      updateVotingInterface() {
        const walletRequired = document.getElementById('votingWalletRequired');
        const mainInterface = document.getElementById('votingMainInterface');
        
        if (this.walletConnected) {
          // Hide wallet required overlay and show main interface
          if (walletRequired) walletRequired.classList.add('hidden');
          if (mainInterface) mainInterface.classList.remove('hidden');
          
          // Render voting components
          this.renderVotingComponents();
        } else {
          // Show wallet required overlay and hide main interface
          if (walletRequired) walletRequired.classList.remove('hidden');
          if (mainInterface) mainInterface.classList.add('hidden');
        }
      }

      async renderVotingComponents() {
        try {
          // Render vote status dashboard
          this.renderVoteStatusDashboard();

          // Render SOL fee display
          this.renderSOLFeeDisplay();

          // Render burn to vote interface
          this.renderBurnToVoteInterface();

          // Load proposals
          await this.loadActiveProposals();
        } catch (error) {
          console.error('Failed to render voting components:', error);
          this.showNotification('Failed to load voting interface', 'error');
        }
      }

      renderVoteStatusDashboard() {
        const container = document.getElementById('voteStatusDashboard');
        if (!container) return;

        const dailyVotesUsed = this.userData.dailyVotesUsed || 0;
        const burnVotesUsed = this.userData.burnVotesUsed || 0;
        const totalVotingPower = this.userData.votingPower || 0;

        container.innerHTML = `
          <h3 class="text-xl font-bold text-vault-purple mb-4">Your Voting Power</h3>
          <div class="text-center">
            <div class="text-3xl font-bold text-vault-purple mb-2">${totalVotingPower}</div>
            <div class="text-sm text-gray-400 mb-4">Total Votes Available</div>
            <div class="space-y-2">
              <div class="flex justify-between text-sm">
                <span>Daily Vote:</span>
                <span class="text-xbox-green font-bold">${dailyVotesUsed === 0 ? '✓ Available' : '✗ Used'}</span>
              </div>
              <div class="flex justify-between text-sm">
                <span>Burn Votes:</span>
                <span class="text-burn-red font-bold">${burnVotesUsed}</span>
              </div>
              <div class="flex justify-between text-sm">
                <span>MLG Balance:</span>
                <span class="text-vault-purple font-bold">${this.userData.mlgBalance || 0}</span>
              </div>
            </div>
          </div>
        `;
      }

      renderSOLFeeDisplay() {
        const container = document.getElementById('solFeeDisplay');
        if (!container) return;

        container.innerHTML = `
          <h3 class="text-xl font-bold text-vault-purple mb-4">Network Fees</h3>
          <div class="space-y-3">
            <div class="flex justify-between text-sm">
              <span class="text-gray-400">Burn Transaction:</span>
              <span class="font-bold text-orange-400">~0.004 SOL</span>
            </div>
            <div class="flex justify-between text-sm">
              <span class="text-gray-400">Vote Transaction:</span>
              <span class="font-bold text-orange-400">~0.001 SOL</span>
            </div>
            <div class="flex justify-between text-sm border-t border-gray-600 pt-2">
              <span class="text-gray-400">Status:</span>
              <span class="font-bold text-green-400">🟢 Normal</span>
            </div>
          </div>
        `;
      }

      renderBurnToVoteInterface() {
        const container = document.getElementById('burnToVoteInterface');
        if (!container) return;

        const nextBurnCost = this.getNextBurnCost();
        
        container.innerHTML = `
          <h3 class="text-xl font-bold text-vault-purple mb-4">🔥 Burn MLG for Votes</h3>
          <p class="text-gray-300 text-sm mb-4">Burn MLG tokens to gain additional voting power. Cost increases progressively.</p>
          
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
            <div class="text-center">
              <div class="text-2xl font-bold text-burn-red">${nextBurnCost.vote1}</div>
              <div class="text-xs text-gray-400">1st Vote</div>
              <button 
                class="burn-vote-btn w-full mt-2 bg-burn-red hover:bg-red-600 disabled:bg-gray-600 px-3 py-2 rounded font-semibold text-xs transition-colors"
                data-burn-amount="${nextBurnCost.vote1}"
                ${(nextBurnCost.vote1 === '✓' || this.userData.mlgBalance < nextBurnCost.vote1) ? 'disabled' : ''}
              >
                ${nextBurnCost.vote1 === '✓' ? 'Used' : `Burn ${nextBurnCost.vote1} MLG`}
              </button>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-burn-red">${nextBurnCost.vote2}</div>
              <div class="text-xs text-gray-400">2nd Vote</div>
              <button 
                class="burn-vote-btn w-full mt-2 bg-burn-red hover:bg-red-600 disabled:bg-gray-600 px-3 py-2 rounded font-semibold text-xs transition-colors"
                data-burn-amount="${nextBurnCost.vote2}"
                ${(nextBurnCost.vote2 === '✓' || this.userData.mlgBalance < nextBurnCost.vote2) ? 'disabled' : ''}
              >
                ${nextBurnCost.vote2 === '✓' ? 'Used' : `Burn ${nextBurnCost.vote2} MLG`}
              </button>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-burn-red">${nextBurnCost.vote3}</div>
              <div class="text-xs text-gray-400">3rd Vote</div>
              <button 
                class="burn-vote-btn w-full mt-2 bg-burn-red hover:bg-red-600 disabled:bg-gray-600 px-3 py-2 rounded font-semibold text-xs transition-colors"
                data-burn-amount="${nextBurnCost.vote3}"
                ${(nextBurnCost.vote3 === '✓' || this.userData.mlgBalance < nextBurnCost.vote3) ? 'disabled' : ''}
              >
                ${nextBurnCost.vote3 === '✓' ? 'Used' : `Burn ${nextBurnCost.vote3} MLG`}
              </button>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-burn-red">${nextBurnCost.vote4}</div>
              <div class="text-xs text-gray-400">4th Vote</div>
              <button 
                class="burn-vote-btn w-full mt-2 bg-burn-red hover:bg-red-600 disabled:bg-gray-600 px-3 py-2 rounded font-semibold text-xs transition-colors"
                data-burn-amount="${nextBurnCost.vote4}"
                ${(nextBurnCost.vote4 === '✓' || this.userData.mlgBalance < nextBurnCost.vote4) ? 'disabled' : ''}
              >
                ${nextBurnCost.vote4 === '✓' ? 'Used' : `Burn ${nextBurnCost.vote4} MLG`}
              </button>
            </div>
          </div>

          <div class="text-center text-xs text-gray-400">
            💡 Progressive pricing: 1, 2, 3, 4 MLG tokens for additional votes
          </div>
        `;

        // Add event listeners for burn buttons
        container.querySelectorAll('.burn-vote-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const burnAmount = parseInt(e.target.dataset.burnAmount);
            this.handleBurnVote(burnAmount);
          });
        });
      }

      getNextBurnCost() {
        const burnVotesUsed = this.userData.burnVotesUsed || 0;
        return {
          vote1: burnVotesUsed >= 1 ? '✓' : 1,
          vote2: burnVotesUsed >= 2 ? '✓' : 2, 
          vote3: burnVotesUsed >= 3 ? '✓' : 3,
          vote4: burnVotesUsed >= 4 ? '✓' : 4
        };
      }

      async loadVotingData() {
        if (!this.walletConnected) return;

        try {
          // Update voting power display in dashboard tile
          const votingPowerElement = document.getElementById('userVotingPower');
          if (votingPowerElement) {
            votingPowerElement.textContent = this.userData.votingPower || 0;
          }

          // In production, this would call:
          // const votingStatus = await this.votingSystem.getUserVotingStatus(this.userData.walletAddress);
          // const mlgBalance = await this.votingSystem.getMLGTokenBalance(this.userData.walletAddress);

        } catch (error) {
          console.error('Failed to load voting data:', error);
        }
      }

      async loadActiveProposals() {
        const proposalsContainer = document.getElementById('proposalsList');
        if (!proposalsContainer) return;

        try {
          // Use mock proposals for now (in production, this would call this.votingSystem.getActiveProposals())
          const proposals = this.mockData.proposals || [];
          
          if (proposals.length === 0) {
            proposalsContainer.innerHTML = `
              <div class="text-center py-8">
                <div class="text-4xl mb-4">📋</div>
                <div class="text-lg text-gray-300">No active proposals</div>
                <div class="text-sm text-gray-400 mt-2">Check back later for new governance proposals</div>
              </div>
            `;
            return;
          }

          // Render proposals with voting interface
          proposalsContainer.innerHTML = '';
          proposals.forEach(proposal => {
            const proposalCard = this.createProposalCard(proposal);
            proposalsContainer.appendChild(proposalCard);
          });

          // Update active proposals count in dashboard tile
          const activeProposalsElement = document.getElementById('activeProposals');
          if (activeProposalsElement) {
            activeProposalsElement.textContent = proposals.length;
          }

        } catch (error) {
          console.error('Failed to load active proposals:', error);
          proposalsContainer.innerHTML = `
            <div class="text-center py-8">
              <div class="text-4xl mb-4 text-red-500">⚠️</div>
              <div class="text-lg text-gray-300">Failed to load proposals</div>
              <div class="text-sm text-gray-400 mt-2">Please check your connection and try again</div>
            </div>
          `;
        }
      }

      createProposalCard(proposal) {
        const card = document.createElement('div');
        card.className = 'bg-gaming-surface rounded-lg p-6 border border-vault-purple border-opacity-30 hover:border-opacity-50 transition-colors mb-4';
        
        const hasVotingPower = this.walletConnected && this.userData.votingPower > 0;
        
        card.innerHTML = `
          <div class="flex items-start justify-between mb-4">
            <div class="flex-1">
              <h4 class="text-lg font-bold text-vault-purple mb-2">${proposal.title}</h4>
              <p class="text-gray-300 text-sm mb-3">${proposal.description}</p>
              <div class="flex items-center space-x-4 text-xs text-gray-400">
                <span>📊 ${proposal.votes} votes</span>
                <span>⏰ ${proposal.timeLeft} remaining</span>
                <span class="px-2 py-1 bg-vault-purple bg-opacity-20 rounded text-vault-purple">${proposal.status}</span>
              </div>
            </div>
          </div>
          
          <div class="border-t border-gray-700 pt-4">
            <div class="flex items-center justify-between">
              <div class="text-sm text-gray-400">
                Your voting power: <span class="text-vault-purple font-bold">${this.userData.votingPower || 0}</span>
              </div>
              
              <div class="flex space-x-2">
                <button 
                  class="voting-btn bg-green-600 hover:bg-green-500 disabled:bg-gray-600 disabled:cursor-not-allowed px-4 py-2 rounded font-semibold text-sm transition-colors" 
                  data-proposal-id="${proposal.id}" 
                  data-vote="yes"
                  ${!hasVotingPower ? 'disabled' : ''}
                >
                  👍 Yes
                </button>
                <button 
                  class="voting-btn bg-red-600 hover:bg-red-500 disabled:bg-gray-600 disabled:cursor-not-allowed px-4 py-2 rounded font-semibold text-sm transition-colors" 
                  data-proposal-id="${proposal.id}" 
                  data-vote="no"
                  ${!hasVotingPower ? 'disabled' : ''}
                >
                  👎 No
                </button>
                <button 
                  class="voting-btn bg-yellow-600 hover:bg-yellow-500 disabled:bg-gray-600 disabled:cursor-not-allowed px-4 py-2 rounded font-semibold text-sm transition-colors" 
                  data-proposal-id="${proposal.id}" 
                  data-vote="abstain"
                  ${!hasVotingPower ? 'disabled' : ''}
                >
                  🤷 Abstain
                </button>
              </div>
            </div>
            
            ${!hasVotingPower ? `
              <div class="mt-3 text-center text-yellow-400 text-xs">
                💡 Connect wallet and burn MLG tokens to gain voting power
              </div>
            ` : ''}
          </div>
        `;
        
        // Add event listeners for voting buttons
        card.querySelectorAll('.voting-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const proposalId = e.target.dataset.proposalId;
            const vote = e.target.dataset.vote;
            this.handleProposalVote(proposalId, vote);
          });
        });
        
        return card;
      }

      async handleBurnVote(burnAmount) {
        if (typeof burnAmount === 'string') {
          this.showNotification('Vote already used for this tier', 'warning');
          return;
        }

        try {
          // Check if wallet is connected
          if (!this.walletConnected) {
            this.showNotification('Please connect your Phantom wallet first', 'error');
            return;
          }

          // Refresh token balance before checking
          await this.updateTokenBalance();

          // Check if user has enough MLG tokens
          if (this.userData.mlgBalance < burnAmount) {
            this.showNotification(`Insufficient MLG tokens. Need ${burnAmount}, have ${this.userData.mlgBalance}`, 'error');
            return;
          }

          // Get current network fees
          this.showNotification('🔄 Estimating transaction fees...', 'info');
          const feeEstimate = await this.mlgTokenManager.getFeeEstimates(this.userData.walletAddress);
          const estimatedFee = (feeEstimate.burnToken / 1e9).toFixed(4); // Convert lamports to SOL

          // Show confirmation with real fee estimate
          const confirmed = confirm(
            `🔥 Burn ${burnAmount} MLG tokens for 1 additional vote?\n\n` +
            `Network fees: ~${estimatedFee} SOL\n` +
            `Current MLG Balance: ${this.userData.mlgBalance}\n\n` +
            `This action cannot be undone.`
          );

          if (!confirmed) return;

          // Show processing notification
          this.showNotification('🔄 Processing burn transaction...', 'info');

          // Execute real token burn transaction
          const burnResult = await this.mlgTokenManager.burnTokens(
            this.userData.walletAddress,
            burnAmount,
            {
              reason: 'vote_power_increase',
              metadata: { burnVoteNumber: (this.userData.burnVotesUsed || 0) + 1 }
            }
          );

          if (burnResult.success) {
            // Update user data with real balance
            await this.updateTokenBalance();
            this.userData.burnVotesUsed = (this.userData.burnVotesUsed || 0) + 1;
            this.userData.votingPower = (this.userData.votingPower || 0) + 1;

            // Save to localStorage
            localStorage.setItem('mlg_burn_votes_used', this.userData.burnVotesUsed.toString());
            localStorage.setItem('mlg_voting_power', this.userData.votingPower.toString());

            // Update interface
            this.updateUserInterface();
            this.renderVotingComponents();

            // Show success with real transaction details
            const txSignature = burnResult.signature;
            const explorerUrl = `https://explorer.solana.com/tx/${txSignature}${this.solanaConnection._rpcEndpoint.includes('devnet') ? '?cluster=devnet' : ''}`;
            
            this.showNotification(
              `🔥 Successfully burned ${burnAmount} MLG tokens! +1 voting power\n` +
              `Transaction: ${txSignature.substring(0, 8)}...\n` +
              `View on Explorer: ${explorerUrl}`, 
              'success'
            );

            // Fire custom event for other components
            document.dispatchEvent(new CustomEvent('tokenBurned', {
              detail: {
                amount: burnAmount,
                signature: txSignature,
                newBalance: this.userData.mlgBalance,
                votingPower: this.userData.votingPower
              }
            }));

          } else {
            throw new Error(burnResult.error || 'Burn transaction failed');
          }

        } catch (error) {
          console.error('Burn vote failed:', error);
          
          let errorMessage = 'Failed to burn tokens for voting';
          
          if (error.message.includes('insufficient')) {
            errorMessage = 'Insufficient SOL for transaction fees';
          } else if (error.message.includes('rejected')) {
            errorMessage = 'Transaction cancelled by user';
          } else if (error.message.includes('timeout')) {
            errorMessage = 'Transaction timed out. Please try again';
          }
          
          this.showNotification(errorMessage, 'error');
        }
      }

      async handleProposalVote(proposalId, vote) {
        try {
          // Check if user has voting power
          if (this.userData.votingPower <= 0) {
            this.showNotification('No voting power available. Burn MLG tokens to gain votes.', 'warning');
            return;
          }

          // Show confirmation
          const voteEmoji = vote === 'yes' ? '👍' : vote === 'no' ? '👎' : '🤷';
          const confirmed = confirm(
            `${voteEmoji} Cast ${vote} vote on proposal ${proposalId}?\n\n` +
            `This will cost approximately 0.001 SOL in network fees.\n\n` +
            `You have ${this.userData.votingPower} voting power remaining.`
          );

          if (!confirmed) return;

          // Simulate vote transaction
          this.showNotification('🗳️ Casting vote...', 'info');
          
          // Simulate processing time
          await new Promise(resolve => setTimeout(resolve, 1500));

          // Update user voting power
          this.userData.votingPower -= 1;
          
          // Save to localStorage
          localStorage.setItem('mlg_voting_power', this.userData.votingPower.toString());

          // Update mock proposal votes
          const proposal = this.mockData.proposals.find(p => p.id == proposalId);
          if (proposal) {
            proposal.votes += 1;
            // Store that user voted on this proposal
            const userVotes = JSON.parse(localStorage.getItem('mlg_user_votes') || '{}');
            userVotes[proposalId] = vote;
            localStorage.setItem('mlg_user_votes', JSON.stringify(userVotes));
          }

          // Update interface
          this.updateUserInterface();
          this.renderVotingComponents();
          
          // Generate mock transaction signature for demo
          const mockTxSignature = this.generateMockTransactionSignature();

          this.showNotification(
            `${voteEmoji} Vote cast successfully!\nTx: ${mockTxSignature.substring(0, 8)}...`,
            'success'
          );

        } catch (error) {
          console.error('Proposal vote failed:', error);
          this.showNotification('Failed to cast vote', 'error');
        }
      }

      generateMockTransactionSignature() {
        // Generate a realistic-looking Solana transaction signature for demo purposes
        const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz123456789';
        let result = '';
        for (let i = 0; i < 88; i++) {
          result += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return result;
      }

      initializeMockData() {
        return {
          userStats: {
            globalRank: Math.floor(Math.random() * 10000) + 1,
            votingPower: Math.floor(Math.random() * 1000) + 100,
            achievements: Math.floor(Math.random() * 50) + 10,
            contentPieces: Math.floor(Math.random() * 25) + 5
          },
          clanData: {
            name: 'Elite Gamers',
            tag: 'EG',
            members: 42,
            maxMembers: 50,
            rank: Math.floor(Math.random() * 100) + 1,
            winRate: Math.floor(Math.random() * 40) + 60,
            totalMLG: Math.floor(Math.random() * 100000) + 10000
          },
          votingData: {
            activeProposals: Math.floor(Math.random() * 5) + 1,
            burnedTotal: Math.floor(Math.random() * 5000) + 1000,
            votingWeight: Math.floor(Math.random() * 100) + 50
          },
          contentData: {
            totalUploads: Math.floor(Math.random() * 50) + 10,
            totalViews: Math.floor(Math.random() * 10000) + 1000,
            earnedMLG: Math.floor(Math.random() * 1000) + 100
          },
          treasuryData: {
            totalValue: Math.floor(Math.random() * 1000000) + 500000,
            monthlyGrowth: Math.floor(Math.random() * 20) + 5,
            stakingAPY: Math.floor(Math.random() * 15) + 8
          }
        };
      }

      setupEventListeners() {
        // Wallet connection
        document.getElementById('walletConnectBtn').addEventListener('click', () => this.handleWalletConnect());
        
        // User menu
        document.getElementById('userMenuBtn').addEventListener('click', () => this.toggleUserMenu());
        
        // Mobile menu
        document.getElementById('mobileMenuBtn').addEventListener('click', () => this.toggleMobileMenu());
        document.getElementById('closeMobileMenu').addEventListener('click', () => this.closeMobileMenu());
        
        // Section tiles
        document.querySelectorAll('[data-section]').forEach(element => {
          element.addEventListener('click', (e) => {
            e.preventDefault();
            this.navigateToSection(element.dataset.section);
          });
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
          if (!e.target.closest('.user-menu')) {
            document.getElementById('userDropdown').classList.add('hidden');
          }
          if (!e.target.closest('#mobileMenu') && !e.target.closest('#mobileMenuBtn')) {
            this.closeMobileMenu();
          }
        });

        // Escape key to close modals/menus
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            document.getElementById('userDropdown').classList.add('hidden');
            this.closeMobileMenu();
          }
        });
        
        // Profile-specific event handlers
        this.setupProfileEventHandlers();
      }
      
      setupProfileEventHandlers() {
        // Handle achievement button clicks
        document.addEventListener('click', (e) => {
          // View All Achievements button
          if (e.target.closest('.view-all-achievements')) {
            this.navigateToSection('achievements');
          }
          
          // Share Profile button  
          if (e.target.closest('.share-profile-btn')) {
            this.handleShareProfile();
          }
          
          // Export Data button
          if (e.target.closest('.export-data-btn')) {
            this.handleExportProfileData();
          }
          
          // Privacy Settings button
          if (e.target.closest('.privacy-settings-btn')) {
            this.handlePrivacySettings();
          }
          
          // Save Profile Changes button
          if (e.target.closest('.save-profile-btn')) {
            this.handleSaveProfileChanges();
          }
        });
      }
      
      handleShareProfile() {
        if (navigator.share) {
          navigator.share({
            title: `${this.userData.gamertag}'s MLG.clan Profile`,
            text: `Check out my gaming profile on MLG.clan! Level ${Math.floor(this.mockData.userStats.achievements / 5) + 1} with ${this.mockData.userStats.achievements} achievements unlocked.`,
            url: window.location.href + `?profile=${this.userData.gamertag}`
          }).catch(console.error);
        } else {
          // Fallback to clipboard
          const profileURL = window.location.href + `?profile=${this.userData.gamertag}`;
          navigator.clipboard.writeText(profileURL).then(() => {
            this.showNotification('Profile link copied to clipboard!', 'success');
          }).catch(() => {
            this.showNotification('Failed to copy profile link', 'error');
          });
        }
      }
      
      handleExportProfileData() {
        const profileData = {
          gamertag: this.userData.gamertag,
          level: Math.floor(this.mockData.userStats.achievements / 5) + 1,
          experience: this.mockData.userStats.achievements * 100,
          gamerScore: this.mockData.userStats.achievements * 25,
          globalRank: this.mockData.userStats.globalRank,
          achievements: this.achievements ? this.achievements.filter(a => a.unlocked) : [],
          clanMembership: this.userData.clanMember,
          walletAddress: this.userData.walletAddress,
          mlgBalance: this.userData.mlgBalance,
          votingPower: this.userData.votingPower,
          exportDate: new Date().toISOString()
        };
        
        const dataStr = JSON.stringify(profileData, null, 2);
        const dataBlob = new Blob([dataStr], {type: 'application/json'});
        const url = URL.createObjectURL(dataBlob);
        
        const link = document.createElement('a');
        link.href = url;
        link.download = `mlg-profile-${this.userData.gamertag}-${new Date().toISOString().split('T')[0]}.json`;
        link.click();
        
        URL.revokeObjectURL(url);
        this.showNotification('Profile data exported successfully!', 'success');
      }
      
      handlePrivacySettings() {
        // Simple privacy settings modal simulation
        const settings = {
          publicProfile: document.getElementById('publicProfile')?.checked || false,
          showOnlineStatus: document.getElementById('showStatus')?.checked || true,
          achievementNotifications: document.getElementById('achievementNotifications')?.checked || true,
          governanceNotifications: document.getElementById('governanceNotifications')?.checked || false
        };
        
        localStorage.setItem('mlg_privacy_settings', JSON.stringify(settings));
        this.showNotification('Privacy settings updated', 'success');
      }
      
      handleSaveProfileChanges() {
        const gamertag = document.getElementById('profileGamertag')?.value?.trim();
        const bio = document.getElementById('profileBio')?.value?.trim();
        
        if (gamertag && gamertag !== this.userData.gamertag) {
          this.userData.gamertag = gamertag;
          localStorage.setItem('mlg_gamertag', gamertag);
          document.getElementById('profileAvatarText').textContent = gamertag.charAt(0).toUpperCase();
          this.updateUserInterface();
        }
        
        if (bio) {
          localStorage.setItem('mlg_profile_bio', bio);
        }
        
        this.showNotification('Profile changes saved successfully!', 'success');
      }

      setupNavigationHandlers() {
        // Update active nav links
        const updateActiveNav = () => {
          document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
            if (link.dataset.section === this.currentSection) {
              link.classList.add('active');
            }
          });
        };

        // Listen for section changes
        document.addEventListener('sectionChanged', updateActiveNav);
      }

      setupMockDataGeneration() {
        // Generate realistic activity feed
        this.generateActivityFeed();
        
        // Generate achievements
        this.generateAchievements();
        
        // Generate content feed
        this.generateContentFeed();
        
        // Generate proposals
        this.generateProposals();
      }

      async loadInitialData() {
        // Load user data (mock or real)
        await this.loadUserData();
        
        // Update all dashboard stats
        this.updateDashboardStats();
        
        // Load section-specific data
        this.loadSectionData(this.currentSection);
        
        // Initialize voting interface based on wallet connection
        this.updateVotingInterface();
        
        // Load voting data if wallet is connected
        if (this.walletConnected) {
          await this.loadVotingData();
        }
      }

      async loadUserData() {
        // Load voting-specific data (persisted across sessions)
        this.userData.dailyVotesUsed = parseInt(localStorage.getItem('mlg_daily_votes_used') || '0');
        this.userData.burnVotesUsed = parseInt(localStorage.getItem('mlg_burn_votes_used') || '0');
        this.userData.votingPower = parseInt(localStorage.getItem('mlg_voting_power') || '1'); // Start with 1 daily vote
        
        // Load user preferences (gamertag, etc.)
        const savedGamertag = localStorage.getItem('mlg_user_gamertag');
        if (savedGamertag && !this.walletConnected) {
          this.userData.gamertag = savedGamertag;
        }
        
        // Note: Wallet connection is handled by restoreWalletSession() method
        // which is called during wallet system initialization
        
        this.updateUserInterface();
      }

      updateUserInterface() {
        const gamertag = this.userData.gamertag;
        const avatar = gamertag.charAt(0).toUpperCase();
        
        // Update header
        document.getElementById('userGamertag').textContent = gamertag;
        document.getElementById('userAvatar').textContent = avatar;
        document.getElementById('dropdownGamertag').textContent = gamertag;
        
        // Update wallet status
        const walletBtn = document.getElementById('walletConnectBtn');
        const balanceDisplay = document.getElementById('tokenBalance');
        
        if (this.walletConnected) {
          walletBtn.innerHTML = '<span>Connected</span>';
          walletBtn.classList.add('bg-green-600');
          balanceDisplay.classList.remove('hidden');
          document.getElementById('balanceAmount').textContent = this.userData.mlgBalance.toLocaleString();
          document.getElementById('dropdownStatus').textContent = 'Online';
        } else {
          walletBtn.innerHTML = '<span>Connect Wallet</span>';
          walletBtn.classList.remove('bg-green-600');
          balanceDisplay.classList.add('hidden');
          document.getElementById('dropdownStatus').textContent = 'Offline';
        }
      }

      updateDashboardStats() {
        const mock = this.mockData;
        
        // Quick stats
        document.getElementById('userRank').textContent = `#${mock.userStats.globalRank.toLocaleString()}`;
        document.getElementById('votingPower').textContent = mock.userStats.votingPower.toLocaleString();
        document.getElementById('achievementCount').textContent = mock.userStats.achievements;
        document.getElementById('contentCount').textContent = mock.userStats.contentPieces;
        
        // Clan stats in tiles - using updated clan data
        document.getElementById('clanMemberCount').textContent = '45';
        document.getElementById('clanTier').textContent = 'Gold';
        
        // Voting stats
        document.getElementById('activeProposals').textContent = mock.votingData.activeProposals;
        document.getElementById('userVotingPower').textContent = mock.votingData.votingWeight;
        
        // Content stats
        document.getElementById('userContentCount').textContent = mock.contentData.totalUploads;
        document.getElementById('contentRewards').textContent = `${mock.contentData.earnedMLG} MLG`;
        
        // Achievement stats
        document.getElementById('unlockedAchievements').textContent = mock.userStats.achievements;
        document.getElementById('gamerScore').textContent = (mock.userStats.achievements * 25);
        
        // User level and XP
        document.getElementById('userLevel').textContent = Math.floor(mock.userStats.achievements / 5) + 1;
        document.getElementById('userXP').textContent = (mock.userStats.achievements * 100).toLocaleString();
      }

      generateActivityFeed() {
        const activities = [
          { icon: '🏆', text: 'Unlocked "Clan Champion" achievement', time: '2 minutes ago' },
          { icon: '🔥', text: 'Burned 50 MLG tokens in governance vote', time: '15 minutes ago' },
          { icon: '📹', text: 'Uploaded "Epic Clutch Moment" clip', time: '1 hour ago' },
          { icon: '👥', text: 'Invited new member to Elite Gamers clan', time: '3 hours ago' },
          { icon: '💰', text: 'Earned 25 MLG tokens from content rewards', time: '6 hours ago' },
          { icon: '🗳️', text: 'Voted on treasury allocation proposal', time: '1 day ago' }
        ];

        const feedContainer = document.getElementById('activityFeed');
        feedContainer.innerHTML = activities.map(activity => `
          <div class="flex items-center space-x-4 p-4 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors">
            <div class="text-2xl">${activity.icon}</div>
            <div class="flex-1">
              <div class="text-sm text-gray-300">${activity.text}</div>
              <div class="text-xs text-gray-500 mt-1">${activity.time}</div>
            </div>
          </div>
        `).join('');
      }

      generateAchievements() {
        const achievements = [
          { name: 'First Steps', description: 'Join your first clan', icon: '🚀', unlocked: true, score: 25 },
          { name: 'Content Creator', description: 'Upload 10 clips', icon: '📹', unlocked: true, score: 50 },
          { name: 'Governance Guru', description: 'Participate in 5 votes', icon: '🗳️', unlocked: true, score: 75 },
          { name: 'Clan Champion', description: 'Lead your clan to top 10', icon: '👑', unlocked: false, score: 100 },
          { name: 'MLG Master', description: 'Earn 1000 MLG tokens', icon: '💎', unlocked: false, score: 150 },
          { name: 'Community Builder', description: 'Invite 20 new members', icon: '🤝', unlocked: false, score: 200 }
        ];

        // Store for use in achievement section
        this.achievements = achievements;
      }

      generateContentFeed() {
        const content = [
          {
            title: 'Insane 1v5 Clutch!',
            creator: 'ProGamer123',
            views: '15.2K',
            platform: 'YouTube',
            thumbnail: '🎮',
            rating: 4.8
          },
          {
            title: 'Epic Sniper Montage',
            creator: 'SniperElite',
            views: '8.7K',
            platform: 'Twitch',
            thumbnail: '🎯',
            rating: 4.6
          },
          {
            title: 'Funny Moments Compilation',
            creator: 'LaughMaster',
            views: '23.1K',
            platform: 'TikTok',
            thumbnail: '😂',
            rating: 4.9
          }
        ];

        // Store for use in content section
        this.contentFeed = content;
      }

      generateProposals() {
        const proposals = [
          {
            id: 1,
            title: 'Increase Content Creator Rewards',
            description: 'Propose to increase MLG token rewards for high-quality content submissions',
            votes: 1247,
            timeLeft: '3 days',
            status: 'active'
          },
          {
            id: 2,
            title: 'New Tournament Prize Pool',
            description: 'Allocate treasury funds for monthly tournament prizes',
            votes: 892,
            timeLeft: '1 week',
            status: 'active'
          }
        ];

        // Store for use in voting section
        this.proposals = proposals;
      }

      // Enhanced Navigation Router with State Management and URL Routing
      initializeRouter() {
        this.router = {
          currentSection: 'dashboard',
          previousSection: null,
          navigationHistory: [],
          sectionState: new Map(),
          loadingComponents: new Map(),
          cachedData: new Map(),
          breadcrumbs: [],
          deepLinkParams: new Map()
        };
        
        // Initialize URL routing
        this.initializeUrlRouting();
        
        // Load initial route from URL
        this.loadInitialRoute();
        
        // Set up performance monitoring
        this.performanceMonitor = {
          renderTimes: new Map(),
          memoryUsage: [],
          cacheHits: 0,
          cacheMisses: 0
        };
      }
      
      initializeUrlRouting() {
        // Listen for hash changes
        window.addEventListener('hashchange', (e) => {
          this.handleUrlChange();
        });
        
        // Listen for browser back/forward
        window.addEventListener('popstate', (e) => {
          if (e.state && e.state.section) {
            this.navigateToSection(e.state.section, { 
              updateUrl: false, 
              restoreState: true,
              browserNavigation: true 
            });
          }
        });
        
        // Handle deep links on page load
        if (window.location.hash) {
          setTimeout(() => this.handleUrlChange(), 100);
        }
      }
      
      loadInitialRoute() {
        const hash = window.location.hash.substring(1);
        if (hash) {
          const [section, ...params] = hash.split('/');
          this.parseDeepLinkParams(params);
          this.navigateToSection(section || 'dashboard', { updateUrl: false });
        } else {
          this.navigateToSection('dashboard', { updateUrl: false });
        }
      }
      
      parseDeepLinkParams(params) {
        this.router.deepLinkParams.clear();
        for (let i = 0; i < params.length; i += 2) {
          if (params[i] && params[i + 1]) {
            this.router.deepLinkParams.set(params[i], decodeURIComponent(params[i + 1]));
          }
        }
      }
      
      handleUrlChange() {
        const hash = window.location.hash.substring(1);
        if (hash) {
          const [section, ...params] = hash.split('/');
          this.parseDeepLinkParams(params);
          this.navigateToSection(section, { 
            updateUrl: false,
            fromUrlChange: true 
          });
        }
      }
      
      async navigateToSection(sectionName, options = {}) {
        const {
          updateUrl = true,
          restoreState = false,
          preserveState = true,
          browserNavigation = false,
          transition = 'fade',
          fromUrlChange = false
        } = options;
        
        // Performance tracking start
        const startTime = performance.now();
        
        try {
          // Validate section exists
          const targetSection = document.getElementById(`${sectionName}Section`);
          if (!targetSection) {
            console.warn(`Section ${sectionName} not found`);
            return;
          }
          
          // Store current section state before switching
          if (preserveState && this.router.currentSection) {
            await this.preserveSectionState(this.router.currentSection);
          }
          
          // Update navigation history
          if (!browserNavigation) {
            this.updateNavigationHistory(sectionName);
          }
          
          // Update URL and browser history
          if (updateUrl && !fromUrlChange) {
            this.updateUrl(sectionName);
          }
          
          // Handle section transition
          await this.performSectionTransition(this.router.currentSection, sectionName, transition);
          
          // Update current section
          this.router.previousSection = this.router.currentSection;
          this.router.currentSection = sectionName;
          
          // Update navigation UI
          this.updateNavigationUI(sectionName);
          
          // Load section components dynamically
          await this.loadSectionComponents(sectionName);
          
          // Restore or initialize section state
          if (restoreState) {
            await this.restoreSectionState(sectionName);
          } else {
            await this.initializeSectionState(sectionName);
          }
          
          // Handle deep link parameters
          if (this.router.deepLinkParams.size > 0) {
            await this.handleDeepLinkParameters(sectionName);
          }
          
          // Update breadcrumbs
          this.updateBreadcrumbs(sectionName);
          
          // Trigger section-specific initialization
          await this.initializeSection(sectionName);
          
          // Track performance
          const renderTime = performance.now() - startTime;
          this.performanceMonitor.renderTimes.set(sectionName, renderTime);
          
          // Trigger custom event
          document.dispatchEvent(new CustomEvent('sectionNavigated', {
            detail: {
              from: this.router.previousSection,
              to: sectionName,
              renderTime,
              options
            }
          }));
          
        } catch (error) {
          console.error('Navigation error:', error);
          this.showNotification('Navigation failed. Please try again.', 'error');
        }
      }
      
      updateNavigationHistory(sectionName) {
        this.router.navigationHistory.push({
          section: sectionName,
          timestamp: Date.now(),
          state: this.router.sectionState.get(this.router.currentSection)
        });
        
        // Limit history size
        if (this.router.navigationHistory.length > 50) {
          this.router.navigationHistory = this.router.navigationHistory.slice(-25);
        }
      }
      
      updateUrl(sectionName) {
        const params = Array.from(this.router.deepLinkParams.entries())
          .map(([key, value]) => `${key}/${encodeURIComponent(value)}`)
          .join('/');
        
        const url = params ? `#${sectionName}/${params}` : `#${sectionName}`;
        
        // Update URL without triggering navigation
        history.pushState(
          { section: sectionName, timestamp: Date.now() },
          '',
          url
        );
      }
      
      async performSectionTransition(fromSection, toSection, transition = 'fade') {
        const currentEl = fromSection ? document.getElementById(`${fromSection}Section`) : null;
        const targetEl = document.getElementById(`${toSection}Section`);
        
        if (!targetEl) return;
        
        // Add transition classes
        if (currentEl) {
          currentEl.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
          targetEl.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
          
          switch (transition) {
            case 'slide':
              currentEl.style.transform = 'translateX(-100%)';
              targetEl.style.transform = 'translateX(100%)';
              targetEl.classList.remove('hidden');
              
              await new Promise(resolve => setTimeout(resolve, 50));
              
              currentEl.style.opacity = '0';
              targetEl.style.opacity = '1';
              targetEl.style.transform = 'translateX(0)';
              break;
              
            case 'fade':
            default:
              if (currentEl) {
                currentEl.style.opacity = '0';
                await new Promise(resolve => setTimeout(resolve, 150));
                currentEl.classList.add('hidden');
              }
              
              targetEl.classList.remove('hidden');
              targetEl.style.opacity = '0';
              await new Promise(resolve => setTimeout(resolve, 50));
              targetEl.style.opacity = '1';
              break;
          }
          
          // Clean up after transition
          setTimeout(() => {
            if (currentEl) {
              currentEl.classList.add('hidden');
              currentEl.style.transform = '';
              currentEl.style.opacity = '';
            }
            targetEl.style.transform = '';
            targetEl.style.opacity = '';
          }, 300);
        } else {
          // First load - no transition
          document.querySelectorAll('.section-content').forEach(section => {
            section.classList.add('hidden');
          });
          targetEl.classList.remove('hidden');
        }
      }
      
      updateNavigationUI(sectionName) {
        // Update nav link states
        document.querySelectorAll('[data-section]').forEach(element => {
          const isActive = element.dataset.section === sectionName;
          element.classList.toggle('active', isActive);
          
          if (element.tagName === 'A') {
            element.classList.toggle('text-xbox-green', isActive);
            element.classList.toggle('text-white', !isActive);
          }
        });
        
        // Update mobile menu
        this.closeMobileMenu();
        
        // Update user dropdown
        const userDropdown = document.getElementById('userDropdown');
        if (userDropdown) {
          userDropdown.classList.add('hidden');
        }
      }
      
      async loadSectionComponents(sectionName) {
        // Check if components are already loaded
        if (this.router.loadingComponents.has(sectionName)) {
          return this.router.loadingComponents.get(sectionName);
        }
        
        // Create loading promise
        const loadingPromise = this.loadComponentsForSection(sectionName);
        this.router.loadingComponents.set(sectionName, loadingPromise);
        
        try {
          await loadingPromise;
          this.performanceMonitor.cacheHits++;
        } catch (error) {
          console.error(`Failed to load components for ${sectionName}:`, error);
          this.router.loadingComponents.delete(sectionName);
          this.performanceMonitor.cacheMisses++;
          throw error;
        }
      }
      
      async loadComponentsForSection(sectionName) {
        const loadingIndicator = this.showLoadingIndicator(sectionName);
        
        try {
          switch (sectionName) {
            case 'clans':
              await this.loadClanComponents();
              break;
            case 'voting':
              await this.loadVotingComponents();
              break;
            case 'content':
              await this.loadContentComponents();
              break;
            case 'achievements':
              await this.loadAchievementComponents();
              break;
            case 'treasury':
              await this.loadTreasuryComponents();
              break;
            case 'profile':
              await this.loadProfileComponents();
              break;
            default:
              // Dashboard or unknown section
              break;
          }
          
          // Cache loaded components
          this.cacheComponentData(sectionName);
          
        } finally {
          this.hideLoadingIndicator(loadingIndicator);
        }
      }
      
      // Additional helper methods for state management and routing
      showLoadingIndicator(sectionName) {
        const targetSection = document.getElementById(`${sectionName}Section`);
        if (!targetSection) return null;
        
        const indicator = document.createElement('div');
        indicator.className = 'section-loading-overlay absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        indicator.innerHTML = `
          <div class="text-center">
            <div class="loading-spinner mx-auto mb-4" style="width: 40px; height: 40px; border: 3px solid #4b5563; border-radius: 50%; border-top-color: #dc2626; animation: spin 1s ease-in-out infinite;"></div>
            <div class="text-white text-sm">Loading ${sectionName}...</div>
          </div>
        `;
        
        targetSection.style.position = 'relative';
        targetSection.appendChild(indicator);
        
        return indicator;
      }
      
      hideLoadingIndicator(indicator) {
        if (indicator && indicator.parentNode) {
          indicator.parentNode.removeChild(indicator);
        }
      }
      
      async loadClanComponents() {
        if (!this.router.cachedData.has('clans')) {
          const clanData = await this.fetchClanData();
          this.router.cachedData.set('clans', clanData);
        }
        
        const clanRoot = document.getElementById('clan-management-root');
        if (clanRoot && typeof ReactDOM !== 'undefined') {
          ReactDOM.render(React.createElement(ClanManagementInterface), clanRoot);
        }
      }
      
      async loadVotingComponents() {
        if (!this.router.cachedData.has('voting')) {
          const votingData = await this.fetchVotingData();
          this.router.cachedData.set('voting', votingData);
        }
        this.updateVotingInterface();
      }
      
      async loadContentComponents() {
        if (!this.router.cachedData.has('content')) {
          const contentData = await this.fetchContentData();
          this.router.cachedData.set('content', contentData);
        }
        this.loadAndDisplayContent();
      }
      
      async loadAchievementComponents() {
        if (!this.router.cachedData.has('achievements')) {
          const achievementData = await this.fetchAchievementData();
          this.router.cachedData.set('achievements', achievementData);
        }
      }
      
      async loadTreasuryComponents() {
        if (!this.router.cachedData.has('treasury')) {
          const treasuryData = await this.fetchTreasuryData();
          this.router.cachedData.set('treasury', treasuryData);
        }
      }
      
      async loadProfileComponents() {
        if (!this.router.cachedData.has('profile')) {
          const profileData = await this.fetchProfileData();
          this.router.cachedData.set('profile', profileData);
        }
        this.updateProfileDisplay();
      }
      
      // Data fetching methods
      async fetchClanData() {
        // Simulate API call or use cached data
        return new Promise(resolve => {
          setTimeout(() => {
            resolve({
              clans: this.mockData?.clans || [],
              userClan: this.userData?.clanData || null,
              leaderboard: this.mockData?.clanLeaderboard || [],
              timestamp: Date.now()
            });
          }, 100);
        });
      }
      
      async fetchVotingData() {
        return new Promise(resolve => {
          setTimeout(() => {
            resolve({
              proposals: this.proposals || [],
              userVotes: this.userData?.votes || [],
              votingPower: this.userData?.votingPower || 0,
              timestamp: Date.now()
            });
          }, 100);
        });
      }
      
      async fetchContentData() {
        return new Promise(resolve => {
          setTimeout(() => {
            resolve({
              content: this.mockContentData || [],
              userContent: this.userData?.content || [],
              trending: this.mockData?.trendingContent || [],
              timestamp: Date.now()
            });
          }, 100);
        });
      }
      
      async fetchAchievementData() {
        return new Promise(resolve => {
          setTimeout(() => {
            resolve({
              achievements: this.mockData?.achievements || [],
              userAchievements: this.userData?.achievements || [],
              leaderboard: this.mockData?.achievementLeaderboard || [],
              timestamp: Date.now()
            });
          }, 100);
        });
      }
      
      async fetchTreasuryData() {
        return new Promise(resolve => {
          setTimeout(() => {
            resolve({
              balance: this.mockData?.treasuryBalance || 0,
              proposals: this.mockData?.treasuryProposals || [],
              transactions: this.mockData?.treasuryTransactions || [],
              timestamp: Date.now()
            });
          }, 100);
        });
      }
      
      async fetchProfileData() {
        return new Promise(resolve => {
          setTimeout(() => {
            resolve({
              profile: this.userData || {},
              stats: this.mockData?.userStats || {},
              activity: this.mockData?.userActivity || [],
              timestamp: Date.now()
            });
          }, 100);
        });
      }
      
      // State preservation methods
      cacheComponentData(sectionName) {
        const cacheKey = `${sectionName}_${Date.now()}`;
        const cacheData = {
          timestamp: Date.now(),
          sectionName,
          componentStates: this.getComponentStates(sectionName)
        };
        
        try {
          sessionStorage.setItem(cacheKey, JSON.stringify(cacheData));
          this.cleanOldCacheEntries();
        } catch (e) {
          console.warn('Failed to cache component data:', e);
        }
      }
      
      getComponentStates(sectionName) {
        const states = {};
        const section = document.getElementById(`${sectionName}Section`);
        if (!section) return states;
        
        section.querySelectorAll('input, textarea, select').forEach(input => {
          if (input.name || input.id) {
            states[input.name || input.id] = input.value;
          }
        });
        
        section.querySelectorAll('.scrollable').forEach((el, index) => {
          states[`scroll_${index}`] = el.scrollTop;
        });
        
        return states;
      }
      
      cleanOldCacheEntries() {
        const maxAge = 24 * 60 * 60 * 1000; // 24 hours
        const now = Date.now();
        
        Object.keys(sessionStorage).forEach(key => {
          if (key.includes('_') && key.split('_').length >= 2) {
            try {
              const data = JSON.parse(sessionStorage.getItem(key));
              if (data.timestamp && (now - data.timestamp) > maxAge) {
                sessionStorage.removeItem(key);
              }
            } catch (e) {
              sessionStorage.removeItem(key);
            }
          }
        });
      }
      
      async preserveSectionState(sectionName) {
        if (!sectionName) return;
        
        const state = {
          scrollPosition: this.getScrollPosition(sectionName),
          formData: this.collectFormData(sectionName),
          viewState: this.getViewState(sectionName),
          userInput: this.getUserInput(sectionName),
          timestamp: Date.now()
        };
        
        this.router.sectionState.set(sectionName, state);
      }
      
      getScrollPosition(sectionName) {
        const section = document.getElementById(`${sectionName}Section`);
        if (!section) return null;
        
        return {
          main: section.scrollTop,
          elements: Array.from(section.querySelectorAll('.scrollable')).map((el, index) => ({
            index,
            position: el.scrollTop
          }))
        };
      }
      
      collectFormData(sectionName) {
        const section = document.getElementById(`${sectionName}Section`);
        if (!section) return {};
        
        const formData = {};
        section.querySelectorAll('input, textarea, select').forEach(input => {
          if (input.name || input.id) {
            formData[input.name || input.id] = {
              value: input.value,
              checked: input.checked,
              selectedIndex: input.selectedIndex
            };
          }
        });
        
        return formData;
      }
      
      getViewState(sectionName) {
        const viewState = {};
        
        switch (sectionName) {
          case 'content':
            viewState.viewMode = this.currentViewMode;
            viewState.sortOrder = this.getCurrentSortOrder();
            viewState.filters = this.getCurrentFilters();
            break;
          case 'clans':
            viewState.activeTab = this.getCurrentClanTab();
            break;
          case 'voting':
            viewState.filterType = this.getCurrentVotingFilter();
            break;
        }
        
        return viewState;
      }
      
      getCurrentSortOrder() {
        const activeSort = document.querySelector('#content-sort-controls .active');
        return activeSort ? activeSort.dataset.sort : 'trending';
      }
      
      getCurrentFilters() {
        const filters = {};
        document.querySelectorAll('#content-filters input:checked').forEach(input => {
          filters[input.name] = input.value;
        });
        return filters;
      }
      
      getCurrentClanTab() {
        const activeTab = document.querySelector('.clan-tab.active');
        return activeTab ? activeTab.dataset.tab : 'overview';
      }
      
      getCurrentVotingFilter() {
        const activeFilter = document.querySelector('.voting-filter.active');
        return activeFilter ? activeFilter.dataset.filter : 'all';
      }
      
      getUserInput(sectionName) {
        const section = document.getElementById(`${sectionName}Section`);
        if (!section) return {};
        
        const inputs = {};
        section.querySelectorAll('input[type="text"], textarea').forEach(input => {
          if (input.value && input.value.length > 0) {
            inputs[input.name || input.id || input.placeholder] = input.value;
          }
        });
        
        return inputs;
      }
      
      async restoreSectionState(sectionName) {
        const state = this.router.sectionState.get(sectionName);
        if (!state) return;
        
        await new Promise(resolve => setTimeout(resolve, 100));
        
        if (state.scrollPosition) {
          this.setScrollPosition(sectionName, state.scrollPosition);
        }
        
        if (state.formData) {
          this.restoreFormData(sectionName, state.formData);
        }
        
        if (state.viewState) {
          this.restoreViewState(sectionName, state.viewState);
        }
        
        if (state.userInput) {
          this.restoreUserInput(sectionName, state.userInput);
        }
      }
      
      setScrollPosition(sectionName, scrollData) {
        const section = document.getElementById(`${sectionName}Section`);
        if (!section || !scrollData) return;
        
        if (scrollData.main) {
          section.scrollTop = scrollData.main;
        }
        
        if (scrollData.elements) {
          scrollData.elements.forEach(({ index, position }) => {
            const elements = section.querySelectorAll('.scrollable');
            if (elements[index]) {
              elements[index].scrollTop = position;
            }
          });
        }
      }
      
      restoreFormData(sectionName, formData) {
        const section = document.getElementById(`${sectionName}Section`);
        if (!section || !formData) return;
        
        Object.entries(formData).forEach(([key, data]) => {
          const input = section.querySelector(`[name="${key}"], #${key}`);
          if (input) {
            input.value = data.value || '';
            if (typeof data.checked !== 'undefined') {
              input.checked = data.checked;
            }
            if (typeof data.selectedIndex !== 'undefined') {
              input.selectedIndex = data.selectedIndex;
            }
          }
        });
      }
      
      restoreViewState(sectionName, viewState) {
        switch (sectionName) {
          case 'content':
            if (viewState.viewMode) {
              this.handleViewModeChange(viewState.viewMode);
            }
            if (viewState.sortOrder) {
              this.applySortOrder(viewState.sortOrder);
            }
            if (viewState.filters) {
              this.applyFilters(viewState.filters);
            }
            break;
          case 'clans':
            if (viewState.activeTab) {
              this.switchClanTab(viewState.activeTab);
            }
            break;
          case 'voting':
            if (viewState.filterType) {
              this.applyVotingFilter(viewState.filterType);
            }
            break;
        }
      }
      
      applySortOrder(sortOrder) {
        const sortButton = document.querySelector(`[data-sort="${sortOrder}"]`);
        if (sortButton) {
          this.handleContentSort(sortOrder);
          this.updateActiveSort(sortButton);
        }
      }
      
      applyFilters(filters) {
        Object.entries(filters).forEach(([name, value]) => {
          const input = document.querySelector(`input[name="${name}"][value="${value}"]`);
          if (input) {
            input.checked = true;
          }
        });
      }
      
      switchClanTab(tab) {
        const tabButton = document.querySelector(`[data-tab="${tab}"]`);
        if (tabButton) {
          tabButton.click();
        }
      }
      
      applyVotingFilter(filterType) {
        const filterButton = document.querySelector(`[data-filter="${filterType}"]`);
        if (filterButton) {
          filterButton.click();
        }
      }
      
      restoreUserInput(sectionName, userInput) {
        const section = document.getElementById(`${sectionName}Section`);
        if (!section || !userInput) return;
        
        Object.entries(userInput).forEach(([key, value]) => {
          const input = section.querySelector(`[name="${key}"], #${key}, [placeholder="${key}"]`);
          if (input && !input.value) {
            input.value = value;
          }
        });
      }
      
      async initializeSectionState(sectionName) {
        this.router.sectionState.set(sectionName, {
          initialized: true,
          timestamp: Date.now()
        });
        
        switch (sectionName) {
          case 'dashboard':
            this.initializeDashboard();
            break;
          case 'clans':
            this.initializeClans();
            break;
          case 'voting':
            this.initializeVoting();
            break;
          case 'content':
            this.initializeContent();
            break;
          case 'achievements':
            this.initializeAchievements();
            break;
          case 'treasury':
            this.initializeTreasury();
            break;
          case 'profile':
            this.initializeProfile();
            break;
        }
      }
      
      initializeDashboard() {
        this.updateDashboardStats();
        this.loadRecentActivity();
      }
      
      initializeClans() {
        this.loadClanData();
        this.updateClanDisplay();
      }
      
      initializeVoting() {
        this.loadVotingData();
        this.updateVotingInterface();
      }
      
      initializeContent() {
        this.loadAndDisplayContent();
        this.setupContentEventListeners();
      }
      
      initializeAchievements() {
        this.loadAchievementData();
        this.updateAchievementDisplay();
      }
      
      initializeTreasury() {
        this.loadTreasuryData();
        this.updateTreasuryDisplay();
      }
      
      initializeProfile() {
        this.updateProfileDisplay();
        this.loadUserStats();
      }
      
      async handleDeepLinkParameters(sectionName) {
        const params = this.router.deepLinkParams;
        
        switch (sectionName) {
          case 'clans':
            if (params.has('tab')) {
              this.switchClanTab(params.get('tab'));
            }
            if (params.has('clan')) {
              this.showClanDetails(params.get('clan'));
            }
            break;
          case 'voting':
            if (params.has('proposal')) {
              this.showProposalDetails(params.get('proposal'));
            }
            if (params.has('filter')) {
              this.applyVotingFilter(params.get('filter'));
            }
            break;
          case 'content':
            if (params.has('content')) {
              this.showContentDetails(params.get('content'));
            }
            if (params.has('view')) {
              this.handleViewModeChange(params.get('view'));
            }
            break;
          case 'profile':
            if (params.has('user')) {
              this.showUserProfile(params.get('user'));
            }
            break;
        }
        
        // Clear deep link params after processing
        this.router.deepLinkParams.clear();
      }
      
      showClanDetails(clanId) {
        // Implementation for showing specific clan details
        console.log('Showing clan details for:', clanId);
      }
      
      showProposalDetails(proposalId) {
        // Implementation for showing specific proposal details
        console.log('Showing proposal details for:', proposalId);
      }
      
      showContentDetails(contentId) {
        // Implementation for showing specific content details
        console.log('Showing content details for:', contentId);
      }
      
      showUserProfile(userId) {
        // Implementation for showing specific user profile
        console.log('Showing user profile for:', userId);
      }
      
      updateBreadcrumbs(sectionName) {
        const breadcrumbContainer = document.getElementById('breadcrumb-nav');
        if (!breadcrumbContainer) return;
        
        const breadcrumbs = this.generateBreadcrumbs(sectionName);
        breadcrumbContainer.innerHTML = breadcrumbs.map((item, index) => {
          const isLast = index === breadcrumbs.length - 1;
          return `
            <span class="breadcrumb-item ${isLast ? 'active' : 'clickable'}" 
                  ${!isLast ? `onclick="app.navigateToSection('${item.section}')"` : ''}>
              <i data-lucide="${item.icon}" class="w-4 h-4 inline mr-1"></i>
              ${item.label}
            </span>
            ${!isLast ? '<span class="breadcrumb-separator">/</span>' : ''}
          `;
        }).join('');
        
        // Re-initialize lucide icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }
      
      generateBreadcrumbs(sectionName) {
        const breadcrumbs = [{ section: 'dashboard', label: 'Dashboard', icon: 'home' }];
        
        if (sectionName !== 'dashboard') {
          const sectionInfo = {
            clans: { label: 'Clans', icon: 'users' },
            voting: { label: 'Voting', icon: 'vote' },
            content: { label: 'Content Hub', icon: 'video' },
            achievements: { label: 'Achievements', icon: 'trophy' },
            treasury: { label: 'Treasury', icon: 'dollar-sign' },
            profile: { label: 'Profile', icon: 'user' }
          };
          
          if (sectionInfo[sectionName]) {
            breadcrumbs.push({
              section: sectionName,
              label: sectionInfo[sectionName].label,
              icon: sectionInfo[sectionName].icon
            });
          }
        }
        
        return breadcrumbs;
      }
      
      async initializeSection(sectionName) {
        // Section-specific post-navigation initialization
        switch (sectionName) {
          case 'clans':
            // Initialize clan-specific features
            await this.initializeClanFeatures();
            break;
          case 'voting':
            // Initialize voting-specific features
            await this.initializeVotingFeatures();
            break;
          case 'content':
            // Initialize content-specific features
            await this.initializeContentFeatures();
            break;
        }
      }
      
      async initializeClanFeatures() {
        // Clan-specific initialization
        this.setupClanEventListeners();
        this.loadClanNotifications();
      }
      
      async initializeVotingFeatures() {
        // Voting-specific initialization
        this.setupVotingEventListeners();
        this.loadVotingNotifications();
      }
      
      async initializeContentFeatures() {
        // Content-specific initialization
        this.setupContentEventListeners();
        this.loadContentNotifications();
      }
      
      loadClanNotifications() {
        // Load clan-related notifications
        console.log('Loading clan notifications');
      }
      
      loadVotingNotifications() {
        // Load voting-related notifications
        console.log('Loading voting notifications');
      }
      
      loadContentNotifications() {
        // Load content-related notifications
        console.log('Loading content notifications');
      }
      
      // Legacy method cleanup - remove old navigation method
      loadSectionData(section) {
            break;
          case 'profile':
            this.loadProfileData();
            break;
        }
      }
      }

      loadClanData() {
        // Initialize React clan management component if not already rendered
        setTimeout(() => {
          const clanRoot = document.getElementById('clan-management-root');
          if (clanRoot && typeof ReactDOM !== 'undefined') {
            ReactDOM.render(React.createElement(ClanManagementInterface), clanRoot);
          }
        }, 100);
        
        // No additional DOM manipulation needed - React handles all UI rendering
        console.log('Clan management React component initialized');
      }

      loadVotingData() {
        const proposalsList = document.getElementById('proposalsList');
        const mock = this.mockData.votingData;
        
        // Update voting power display
        document.getElementById('displayVotingPower').textContent = mock.votingWeight.toLocaleString();
        document.getElementById('burnedTotal').textContent = mock.burnedTotal.toLocaleString();
        document.getElementById('votingWeight').textContent = `${mock.votingWeight}%`;
        
        proposalsList.innerHTML = this.proposals.map(proposal => `
          <div class="bg-gaming-surface p-6 rounded-lg border border-vault-purple border-opacity-30 mb-4">
            <div class="flex justify-between items-start mb-4">
              <div>
                <h4 class="text-xl font-bold text-vault-purple">${proposal.title}</h4>
                <p class="text-gray-300 mt-2">${proposal.description}</p>
              </div>
              <div class="text-right">
                <div class="text-lg font-bold text-white">${proposal.votes}</div>
                <div class="text-sm text-gray-400">Votes</div>
              </div>
            </div>
            
            <div class="flex justify-between items-center">
              <div class="text-sm text-gray-400">
                Time left: ${proposal.timeLeft}
              </div>
              <button class="bg-vault-purple bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-colors burn-effect">
                <i data-lucide="flame" class="w-4 h-4 inline mr-2"></i>
                Burn to Vote
              </button>
            </div>
          </div>
        `).join('');
        
        // Re-initialize icons for new content
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }

      // =============================================================================
      // CONTENT SYSTEM INITIALIZATION & INTEGRATION
      // =============================================================================

      async initializeContentSystem() {
        try {
          console.log('Initializing content system...');
          
          // Import content system modules
          const contentModules = await this.importContentModules();
          
          // Initialize content submission form
          await this.initializeContentSubmissionForm(contentModules);
          
          // Initialize content display components  
          await this.initializeContentDisplay(contentModules);
          
          // Initialize content moderation system
          await this.initializeContentModeration(contentModules);
          
          // Setup content system event listeners
          this.setupContentEventListeners();
          
          console.log('Content system initialized successfully');
          
        } catch (error) {
          console.error('Failed to initialize content system:', error);
          this.showContentSystemError(error);
        }
      }

      async importContentModules() {
        try {
          // Import all content system modules
          const modules = {};
          
          // Import content submission form
          const { createContentSubmissionForm } = await import('./src/ui/components/content-submission-form.js');
          modules.contentSubmissionForm = createContentSubmissionForm;
          
          // Import content validator
          const { ContentValidator } = await import('./src/content/content-validator.js');
          modules.contentValidator = ContentValidator;
          
          // Import content moderation
          const { ContentModerationSystem } = await import('./src/content/content-moderation.js');
          modules.contentModeration = ContentModerationSystem;
          
          // Import content display components
          const { ContentDisplayComponents } = await import('./src/ui/components/content-display-components.js');
          modules.contentDisplay = ContentDisplayComponents;
          
          // Import content ranking algorithm
          const { ContentRankingAlgorithm } = await import('./src/content/content-ranking-algorithm.js');
          modules.contentRanking = ContentRankingAlgorithm;
          
          // Import content rewards system
          const { ContentRewardsSystem } = await import('./src/content/content-rewards.js');
          modules.contentRewards = ContentRewardsSystem;
          
          // Import multi-platform video system - Sub-task 6.8
          const { MultiPlatformVideoEmbed } = await import('./src/content/multi-platform-video-embed.js');
          modules.multiPlatformVideoEmbed = MultiPlatformVideoEmbed;
          
          const { VideoUploadEnhancer } = await import('./src/content/video-upload-enhancer.js');
          modules.videoUploadEnhancer = VideoUploadEnhancer;
          
          const { createMultiPlatformVideoInput } = await import('./src/ui/components/multi-platform-video-input.js');
          modules.multiPlatformVideoInput = createMultiPlatformVideoInput;
          
          return modules;
          
        } catch (error) {
          console.error('Failed to import content modules:', error);
          throw new Error(`Content module import failed: ${error.message}`);
        }
      }

      async initializeContentSubmissionForm(modules) {
        try {
          // Create content submission form instance
          this.contentSubmissionForm = new modules.contentSubmissionForm({
            containerId: 'content-submission-container',
            onSubmit: (contentData) => this.handleContentSubmission(contentData),
            onError: (error) => this.handleContentSubmissionError(error),
            config: {
              maxFileSize: 100 * 1024 * 1024, // 100MB
              maxFiles: 5,
              dailyUploadLimit: 3,
              enableMultiPlatformEmbed: true,
              supportedPlatforms: ['youtube', 'twitter', 'tiktok', 'twitch', 'instagram', 'vimeo', 'dailymotion'],
              mlgTokenContract: '7XJiwLDrjzxDYdZipnJXzpr1iDTmK55XixSFAa7JgNEL',
              // Enhanced video features - Sub-task 6.8
              videoUploadEnabled: true,
              videoTranscodingEnabled: true,
              thumbnailGenerationEnabled: true,
              multiPlatformVideoInputEnabled: true
            }
          });
          
          // Initialize with wallet connection if available
          if (this.walletConnected) {
            await this.contentSubmissionForm.initialize(
              { connected: true, address: this.userData.walletAddress },
              { endpoint: 'mainnet-beta' }
            );
          }
          
          // Create the form UI
          await this.contentSubmissionForm.createContentSubmissionForm();
          
          // Initialize multi-platform video input - Sub-task 6.8
          await this.initializeMultiPlatformVideoInput(modules);
          
          console.log('Content submission form initialized');
          
        } catch (error) {
          console.error('Failed to initialize content submission form:', error);
          this.showContentLoadingError('content-submission-container', 'Content submission form failed to load');
        }
      }

      async initializeContentDisplay(modules) {
        try {
          // Create content display components instance
          this.contentDisplayComponents = new modules.contentDisplay({
            containerId: 'content-display-container',
            gridId: 'content-grid',
            loadingId: 'content-loading',
            config: {
              enableVoting: true,
              enableModeration: true,
              enableRewards: true,
              autoPlayVideos: false,
              lazyLoadImages: true,
              itemsPerPage: 12,
              viewModes: ['grid', 'list'],
              sortOptions: ['trending', 'top', 'latest', 'hot']
            }
          });
          
          // Initialize content ranking
          this.contentRanking = new modules.contentRanking({
            enableCaching: true,
            updateInterval: 30000, // 30 seconds
            mlgTokenContract: '7XJiwLDrjzxDYdZipnJXzpr1iDTmK55XixSFAa7JgNEL'
          });
          
          // Initialize content rewards
          this.contentRewards = new modules.contentRewards({
            mlgTokenContract: '7XJiwLDrjzxDYdZipnJXzpr1iDTmK55XixSFAa7JgNEL',
            rewardRates: {
              upload: 5,      // 5 MLG for upload
              view: 0.1,      // 0.1 MLG per view
              vote: 1,        // 1 MLG per vote received
              featured: 50    // 50 MLG if content is featured
            }
          });
          
          // Initialize the components
          await this.contentDisplayComponents.initialize();
          
          // Load and display content
          await this.loadAndDisplayContent();
          
          console.log('Content display system initialized');
          
        } catch (error) {
          console.error('Failed to initialize content display:', error);
          this.showContentLoadingError('content-display-container', 'Content display failed to load');
        }
      }

      async initializeMultiPlatformVideoInput(modules) {
        try {
          // Create multi-platform video input container if it doesn't exist
          const contentSubmissionContainer = document.getElementById('content-submission-container');
          if (!contentSubmissionContainer) {
            throw new Error('Content submission container not found');
          }

          // Add video input container to the submission form
          let videoInputContainer = document.getElementById('multi-platform-video-container');
          if (!videoInputContainer) {
            videoInputContainer = document.createElement('div');
            videoInputContainer.id = 'multi-platform-video-container';
            videoInputContainer.className = 'video-input-wrapper';
            
            // Find a good place to insert the video input (after the first blade)
            const firstBlade = contentSubmissionContainer.querySelector('.xbox-blade');
            if (firstBlade && firstBlade.parentNode) {
              firstBlade.parentNode.insertBefore(videoInputContainer, firstBlade.nextSibling);
            } else {
              contentSubmissionContainer.appendChild(videoInputContainer);
            }
          }

          // Initialize multi-platform video input component
          this.multiPlatformVideoInput = new modules.multiPlatformVideoInput({
            containerId: 'multi-platform-video-container',
            mode: 'mixed', // Support both URL and upload
            onVideoAdded: (videoData) => this.handleVideoAdded(videoData),
            onVideoRemoved: (videoData) => this.handleVideoRemoved(videoData),
            onError: (error) => this.handleVideoError(error)
          });

          // Create the video input interface
          await this.multiPlatformVideoInput.create();

          // Initialize the video embed system
          this.multiPlatformVideoEmbed = new modules.multiPlatformVideoEmbed({
            errorHandler: (error) => this.handleVideoEmbedError(error),
            successHandler: (data, platform, videoId) => this.handleVideoEmbedSuccess(data, platform, videoId)
          });

          console.log('Multi-platform video input initialized');

        } catch (error) {
          console.error('Failed to initialize multi-platform video input:', error);
          this.showContentLoadingError('multi-platform-video-container', 'Video input system failed to load');
        }
      }

      async initializeContentModeration(modules) {
        try {
          // Create content moderation system instance
          this.contentModeration = new modules.contentModeration({
            mlgTokenContract: '7XJiwLDrjzxDYdZipnJXzpr1iDTmK55XixSFAa7JgNEL',
            moderationThresholds: {
              spam: 3,        // 3 reports = auto-flag
              inappropriate: 5, // 5 reports = auto-hide
              removal: 10     // 10 reports = auto-remove
            },
            votingCosts: {
              report: 1,      // 1 MLG to report content
              moderate: 2     // 2 MLG to moderate decision
            }
          });
          
          // Initialize content validator
          this.contentValidator = new modules.contentValidator({
            enableContentSafety: true,
            enableMetadataValidation: true,
            enablePerformanceOptimization: true
          });
          
          console.log('Content moderation system initialized');
          
        } catch (error) {
          console.error('Failed to initialize content moderation:', error);
          // Moderation is optional, don't break the app
        }
      }

      setupContentEventListeners() {
        // Content sort controls
        const sortControls = document.querySelectorAll('#content-sort-controls button');
        sortControls.forEach(button => {
          button.addEventListener('click', (e) => {
            const sortType = e.target.dataset.sort;
            this.handleContentSort(sortType);
            this.updateActiveSort(e.target);
          });
        });
        
        // View mode toggle
        const viewModeButtons = document.querySelectorAll('[data-view]');
        viewModeButtons.forEach(button => {
          button.addEventListener('click', (e) => {
            const viewMode = e.target.dataset.view;
            this.handleViewModeChange(viewMode);
          });
        });
        
        // Content search
        const searchInput = document.getElementById('content-search');
        if (searchInput) {
          let searchTimeout;
          searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
              this.handleContentSearch(e.target.value);
            }, 500);
          });
        }
        
        // Content filters
        const contentFilter = document.getElementById('content-filter');
        const platformFilter = document.getElementById('platform-filter');
        
        if (contentFilter) {
          contentFilter.addEventListener('change', (e) => {
            this.handleContentFilter(e.target.value, 'category');
          });
        }
        
        if (platformFilter) {
          platformFilter.addEventListener('change', (e) => {
            this.handleContentFilter(e.target.value, 'platform');
          });
        }
        
        // Creator dashboard actions
        const analyticsBtn = document.getElementById('view-analytics');
        const historyBtn = document.getElementById('content-history');
        const moderationBtn = document.getElementById('moderation-queue');
        
        if (analyticsBtn) {
          analyticsBtn.addEventListener('click', () => this.showCreatorAnalytics());
        }
        
        if (historyBtn) {
          historyBtn.addEventListener('click', () => this.showContentHistory());
        }
        
        if (moderationBtn) {
          moderationBtn.addEventListener('click', () => this.showModerationQueue());
        }
      }

      async loadAndDisplayContent() {
        try {
          // Show loading state
          const loadingElement = document.getElementById('content-loading');
          const gridElement = document.getElementById('content-grid');
          
          if (loadingElement) loadingElement.classList.remove('hidden');
          if (gridElement) gridElement.classList.add('hidden');
          
          // Load content using the ranking algorithm
          const contentItems = await this.contentRanking.getRankedContent({
            sortBy: 'trending',
            limit: 12,
            includeMetadata: true,
            enableCaching: true
          });
          
          // Render content using display components
          await this.contentDisplayComponents.renderContent(contentItems, {
            viewMode: 'grid',
            enableVoting: this.walletConnected,
            enableInteraction: true
          });
          
          // Hide loading and show content
          if (loadingElement) loadingElement.classList.add('hidden');
          if (gridElement) gridElement.classList.remove('hidden');
          
          // Update creator stats
          this.updateCreatorStats();
          
        } catch (error) {
          console.error('Failed to load and display content:', error);
          this.showContentLoadingError('content-display-container', 'Failed to load community content');
        }
      }

      showContentLoadingError(containerId, message) {
        const container = document.getElementById(containerId);
        if (container) {
          container.innerHTML = `
            <div class="xbox-blade rounded-xl p-6">
              <div class="text-center py-8">
                <div class="text-4xl mb-4 text-red-400">⚠️</div>
                <div class="text-lg text-gray-300">${message}</div>
                <div class="text-sm text-gray-400 mt-2">Please refresh the page or try again later</div>
                <button class="mt-4 px-6 py-2 bg-gaming-accent bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors" onclick="location.reload()">
                  Refresh Page
                </button>
              </div>
            </div>
          `;
        }
      }

      showContentSystemError(error) {
        this.showNotification(`Content system initialization failed: ${error.message}`, 'error');
        // Fallback to basic mock data
        this.loadContentData();
      }

      // Content interaction handlers
      async handleContentSubmission(contentData) {
        try {
          console.log('Content submitted:', contentData);
          
          // Check if wallet is connected for token rewards
          if (!this.walletConnected) {
            this.showNotification('Content submitted! Connect wallet to earn MLG token rewards.', 'warning');
          }
          
          // Validate content
          const validationResult = await this.contentValidator.validateContent(contentData);
          if (!validationResult.isValid) {
            throw new Error(validationResult.errors.join(', '));
          }
          
          // Process rewards (both XP and potential MLG tokens)
          if (this.contentRewards) {
            const rewardResult = await this.contentRewards.processUploadReward(
              contentData, 
              this.userData,
              {
                walletAddress: this.userData.walletAddress,
                walletConnected: this.walletConnected,
                tokenManager: this.mlgTokenManager
              }
            );
            
            // If MLG tokens were rewarded, update balance
            if (rewardResult.mlgTokensRewarded && rewardResult.mlgTokensRewarded > 0) {
              await this.updateTokenBalance();
              this.showNotification(
                `Content submitted! Earned ${rewardResult.mlgTokensRewarded} MLG tokens! 🎉`,
                'success'
              );
            } else {
              this.showNotification('Content submitted successfully! 🎉', 'success');
            }
          } else {
            this.showNotification('Content submitted successfully! 🎉', 'success');
          }
          
          // Refresh content display
          await this.loadAndDisplayContent();
          
          // Update creator stats
          this.updateCreatorStats();
          
        } catch (error) {
          console.error('Content submission failed:', error);
          this.showNotification(`Submission failed: ${error.message}`, 'error');
        }
      }

      handleContentSubmissionError(error) {
        console.error('Content submission error:', error);
        this.showNotification(`Upload error: ${error.message}`, 'error');
      }

      // Multi-Platform Video Event Handlers - Sub-task 6.8
      handleVideoAdded(videoData) {
        console.log('Video added to submission:', videoData);
        
        // Update form state to include video data
        if (this.contentSubmissionForm && this.contentSubmissionForm.addVideoToSubmission) {
          this.contentSubmissionForm.addVideoToSubmission(videoData);
        }
        
        // Update UI feedback
        this.showNotification(
          `${videoData.platform ? videoData.platform.toUpperCase() : 'Video'} added to submission`, 
          'success'
        );
        
        // Track analytics
        this.trackEvent('video_added', {
          platform: videoData.platform || 'upload',
          type: videoData.type,
          hasMetadata: !!videoData.metadata
        });
      }

      handleVideoRemoved(videoData) {
        console.log('Video removed from submission:', videoData);
        
        // Update form state to remove video data
        if (this.contentSubmissionForm && this.contentSubmissionForm.removeVideoFromSubmission) {
          this.contentSubmissionForm.removeVideoFromSubmission(videoData);
        }
        
        // Update UI feedback
        this.showNotification('Video removed from submission', 'info');
        
        // Track analytics
        this.trackEvent('video_removed', {
          platform: videoData.platform || 'upload',
          type: videoData.type
        });
      }

      handleVideoError(error) {
        console.error('Video input error:', error);
        this.showNotification(`Video error: ${error.message || error}`, 'error');
        
        // Track error for debugging
        this.trackEvent('video_error', {
          error: error.message || error.toString(),
          timestamp: Date.now()
        });
      }

      handleVideoEmbedError(error) {
        console.error('Video embed error:', error);
        this.showNotification(`Video embedding failed: ${error.message || error}`, 'error');
      }

      handleVideoEmbedSuccess(data, platform, videoId) {
        console.log(`Video embed successful for ${platform}/${videoId}:`, data);
        
        // Track successful embedding
        this.trackEvent('video_embed_success', {
          platform,
          videoId,
          hasMetadata: !!data
        });
      }

      async handleContentSort(sortType) {
        try {
          const contentItems = await this.contentRanking.getRankedContent({
            sortBy: sortType,
            limit: 12,
            includeMetadata: true,
            enableCaching: true
          });
          
          await this.contentDisplayComponents.renderContent(contentItems, {
            viewMode: this.currentViewMode || 'grid',
            enableVoting: this.walletConnected,
            enableInteraction: true
          });
          
        } catch (error) {
          console.error('Failed to sort content:', error);
          this.showNotification('Failed to sort content', 'error');
        }
      }

      updateActiveSort(activeButton) {
        // Remove active class from all buttons
        const sortButtons = document.querySelectorAll('#content-sort-controls button');
        sortButtons.forEach(btn => {
          btn.classList.remove('active', 'bg-gaming-accent', 'bg-opacity-20');
          btn.classList.add('bg-gaming-surface');
        });
        
        // Add active class to clicked button
        activeButton.classList.add('active', 'bg-gaming-accent', 'bg-opacity-20');
        activeButton.classList.remove('bg-gaming-surface');
      }

      handleViewModeChange(viewMode) {
        this.currentViewMode = viewMode;
        
        // Update button states
        const viewButtons = document.querySelectorAll('[data-view]');
        viewButtons.forEach(btn => {
          if (btn.dataset.view === viewMode) {
            btn.classList.add('bg-gaming-accent', 'bg-opacity-20');
          } else {
            btn.classList.remove('bg-gaming-accent', 'bg-opacity-20');
          }
        });
        
        // Update display
        this.contentDisplayComponents.setViewMode(viewMode);
      }

      async handleContentSearch(searchQuery) {
        try {
          if (!searchQuery.trim()) {
            // Load default content if search is empty
            await this.loadAndDisplayContent();
            return;
          }
          
          const searchResults = await this.contentRanking.searchContent(searchQuery, {
            limit: 12,
            includeMetadata: true
          });
          
          await this.contentDisplayComponents.renderContent(searchResults, {
            viewMode: this.currentViewMode || 'grid',
            enableVoting: this.walletConnected,
            enableInteraction: true
          });
          
        } catch (error) {
          console.error('Content search failed:', error);
          this.showNotification('Search failed', 'error');
        }
      }

      async handleContentFilter(filterValue, filterType) {
        try {
          const filterOptions = {
            sortBy: 'trending',
            limit: 12,
            includeMetadata: true
          };
          
          if (filterType === 'category' && filterValue) {
            filterOptions.category = filterValue;
          } else if (filterType === 'platform' && filterValue) {
            filterOptions.platform = filterValue;
          }
          
          const filteredContent = await this.contentRanking.getRankedContent(filterOptions);
          
          await this.contentDisplayComponents.renderContent(filteredContent, {
            viewMode: this.currentViewMode || 'grid',
            enableVoting: this.walletConnected,
            enableInteraction: true
          });
          
        } catch (error) {
          console.error('Content filtering failed:', error);
          this.showNotification('Filter failed', 'error');
        }
      }

      updateCreatorStats() {
        // Update creator dashboard with real data
        const stats = this.getUserContentStats();
        
        document.getElementById('totalUploads').textContent = stats.uploads || '0';
        document.getElementById('totalViews').textContent = stats.views || '0';
        document.getElementById('earnedMLG').textContent = stats.earned || '0';
        document.getElementById('contentRating').textContent = stats.rating || '⭐⭐⭐⭐⭐';
        document.getElementById('creatorReputation').textContent = stats.reputation || 'Trusted';
      }

      getUserContentStats() {
        // In production, this would fetch real user stats
        return {
          uploads: this.userData.contentUploads || 0,
          views: this.userData.contentViews || 0,
          earned: this.userData.contentEarnings || 0,
          rating: this.userData.contentRating || '⭐⭐⭐⭐⭐',
          reputation: this.userData.creatorReputation || 'Trusted'
        };
      }

      showCreatorAnalytics() {
        this.showNotification('Creator analytics dashboard coming soon! 📊', 'success');
        // In production, this would open a detailed analytics modal
      }

      showContentHistory() {
        this.showNotification('Content history view coming soon! 📋', 'success');
        // In production, this would show user's content history
      }

      async showModerationQueue() {
        try {
          if (!this.contentModeration) {
            throw new Error('Moderation system not available');
          }
          
          // Check if user has moderation privileges
          const canModerate = await this.contentModeration.checkModerationPermissions(this.userData);
          
          if (!canModerate) {
            this.showNotification('Insufficient permissions for moderation', 'error');
            return;
          }
          
          // Show moderation queue
          const moderationContainer = document.getElementById('moderation-queue-container');
          if (moderationContainer) {
            moderationContainer.classList.remove('hidden');
            
            // Load moderation queue interface
            const queueContent = document.getElementById('moderation-queue-content');
            if (queueContent) {
              const pendingItems = await this.contentModeration.getModerationQueue();
              await this.renderModerationQueue(queueContent, pendingItems);
            }
          }
          
        } catch (error) {
          console.error('Failed to show moderation queue:', error);
          this.showNotification(`Moderation queue error: ${error.message}`, 'error');
        }
      }

      async renderModerationQueue(container, pendingItems) {
        // Render moderation queue interface
        container.innerHTML = `
          <div class="space-y-4">
            ${pendingItems.length === 0 
              ? '<div class="text-center py-4 text-gray-400">No items pending moderation</div>'
              : pendingItems.map(item => `
                  <div class="bg-gaming-surface rounded-lg p-4 border border-red-400 border-opacity-30">
                    <div class="flex justify-between items-start mb-2">
                      <h4 class="font-bold text-red-400">${item.title}</h4>
                      <span class="text-xs bg-red-600 bg-opacity-20 px-2 py-1 rounded">${item.reportCount} reports</span>
                    </div>
                    <p class="text-sm text-gray-300 mb-3">${item.reason}</p>
                    <div class="flex gap-2">
                      <button class="px-3 py-1 bg-green-600 bg-opacity-20 hover:bg-opacity-30 rounded text-xs" onclick="window.app.moderateContent('${item.id}', 'approve')">
                        ✅ Approve
                      </button>
                      <button class="px-3 py-1 bg-red-600 bg-opacity-20 hover:bg-opacity-30 rounded text-xs" onclick="window.app.moderateContent('${item.id}', 'remove')">
                        ❌ Remove
                      </button>
                      <button class="px-3 py-1 bg-yellow-600 bg-opacity-20 hover:bg-opacity-30 rounded text-xs" onclick="window.app.moderateContent('${item.id}', 'flag')">
                        🏳️ Flag
                      </button>
                    </div>
                  </div>
                `).join('')
            }
          </div>
        `;
      }

      async moderateContent(contentId, action) {
        try {
          await this.contentModeration.moderateContent(contentId, action, this.userData);
          this.showNotification(`Content ${action}ed successfully`, 'success');
          
          // Refresh moderation queue
          await this.showModerationQueue();
          
          // Refresh content display
          await this.loadAndDisplayContent();
          
        } catch (error) {
          console.error('Moderation action failed:', error);
          this.showNotification(`Moderation failed: ${error.message}`, 'error');
        }
      }

      // =============================================================================
      // WALLET SYSTEM INITIALIZATION & INTEGRATION
      // =============================================================================

      async initializeWalletSystem() {
        try {
          console.log('Initializing wallet system...');
          
          // Show initialization status
          this.showNotification('Initializing wallet system...', 'info');
          
          // Create Solana connection with error handling
          try {
            this.solanaConnection = createConnection(CURRENT_NETWORK);
            await this.testSolanaConnection();
          } catch (connectionError) {
            console.error('Solana connection failed:', connectionError);
            throw new Error(`Failed to connect to Solana network: ${connectionError.message}`);
          }
          
          // Initialize Phantom Wallet Manager
          try {
            this.phantomWalletManager = new PhantomWalletManager({
              network: CURRENT_NETWORK,
              connection: this.solanaConnection,
              onConnect: (walletInfo) => this.handleWalletConnected(walletInfo),
              onDisconnect: () => this.handleWalletDisconnected(),
              onError: (error) => this.handleWalletError(error)
            });
          } catch (walletError) {
            console.error('Phantom wallet manager initialization failed:', walletError);
            throw new Error(`Failed to initialize Phantom wallet: ${walletError.message}`);
          }
          
          // Initialize MLG Token Manager
          try {
            this.mlgTokenManager = mlgTokenManager;
            await this.mlgTokenManager.initialize({
              connection: this.solanaConnection,
              network: CURRENT_NETWORK,
              onBalanceUpdate: (balance) => this.handleTokenBalanceUpdate(balance),
              onError: (error) => this.handleTokenError(error)
            });
          } catch (tokenError) {
            console.error('MLG token manager initialization failed:', tokenError);
            throw new Error(`Failed to initialize MLG token system: ${tokenError.message}`);
          }
          
          // Setup wallet event listeners
          this.setupWalletEventListeners();
          
          // Try to restore previous wallet session
          try {
            await this.restoreWalletSession();
          } catch (sessionError) {
            console.warn('Failed to restore wallet session:', sessionError);
            // This is not critical, continue without throwing
          }
          
          console.log('Wallet system initialized successfully');
          this.showWalletSystemStatus(true);
          
        } catch (error) {
          console.error('Failed to initialize wallet system:', error);
          this.showWalletSystemStatus(false, error.message);
          
          // Show user-friendly error message
          let userMessage = 'Failed to initialize wallet system. ';
          if (error.message.includes('network')) {
            userMessage += 'Please check your internet connection and try again.';
          } else if (error.message.includes('Phantom')) {
            userMessage += 'Please ensure Phantom wallet is installed.';
          } else {
            userMessage += 'Please refresh the page and try again.';
          }
          
          this.showNotification(userMessage, 'error');
        }
      }
      
      async testSolanaConnection() {
        try {
          // Test the connection with a simple RPC call
          const version = await this.solanaConnection.getVersion();
          console.log('Solana connection established. Version:', version['solana-core']);
          return true;
        } catch (error) {
          console.error('Solana connection test failed:', error);
          throw error;
        }
      }
      
      showWalletSystemStatus(success, errorMessage = null) {
        // Update wallet system status indicator (create if doesn't exist)
        let statusIndicator = document.getElementById('walletSystemStatus');
        if (!statusIndicator) {
          statusIndicator = document.createElement('div');
          statusIndicator.id = 'walletSystemStatus';
          statusIndicator.className = 'fixed top-4 right-20 z-50 px-3 py-1 rounded text-xs';
          document.body.appendChild(statusIndicator);
        }
        
        if (success) {
          statusIndicator.className = 'fixed top-4 right-20 z-50 px-3 py-1 rounded text-xs bg-green-600 text-white';
          statusIndicator.textContent = '🟢 Wallet System Ready';
          // Hide after 3 seconds
          setTimeout(() => {
            statusIndicator.style.display = 'none';
          }, 3000);
        } else {
          statusIndicator.className = 'fixed top-4 right-20 z-50 px-3 py-1 rounded text-xs bg-red-600 text-white';
          statusIndicator.textContent = '🔴 Wallet System Error';
          statusIndicator.title = errorMessage;
          // Keep visible for user to see the error
        }
      }

      async restoreWalletSession() {
        try {
          if (this.phantomWalletManager.isSessionValid()) {
            const sessionInfo = await this.phantomWalletManager.restoreSession();
            if (sessionInfo && sessionInfo.connected) {
              this.walletConnected = true;
              this.userData.walletAddress = sessionInfo.publicKey.toString();
              this.userData.gamertag = sessionInfo.gamertag || 'Connected User';
              
              // Fetch real MLG token balance
              await this.updateTokenBalance();
              
              // Update UI to reflect connected state
              this.updateUserInterface();
              
              // Fire wallet connected event
              document.dispatchEvent(new CustomEvent('walletConnected', {
                detail: { 
                  walletAddress: this.userData.walletAddress,
                  mlgBalance: this.userData.mlgBalance 
                }
              }));
            }
          }
        } catch (error) {
          console.warn('Failed to restore wallet session:', error);
          // Clear any corrupted session data
          this.phantomWalletManager.clearSession();
        }
      }

      async updateTokenBalance() {
        try {
          if (!this.userData.walletAddress) {
            console.warn('No wallet address available for balance update');
            return;
          }
          
          // Show loading indicator for balance update
          this.showBalanceUpdateStatus('loading');
          
          const balance = await this.mlgTokenManager.getBalance(this.userData.walletAddress);
          this.userData.mlgBalance = balance;
          
          // Update local storage
          localStorage.setItem('mlg_balance', balance.toString());
          
          // Update UI
          this.updateUserInterface();
          
          // Show success status briefly
          this.showBalanceUpdateStatus('success');
          
        } catch (error) {
          console.error('Failed to update token balance:', error);
          
          // Show error status
          this.showBalanceUpdateStatus('error');
          
          // Provide user feedback based on error type
          if (error.message.includes('timeout')) {
            this.showNotification('Balance update timed out. Retrying...', 'warning');
            // Retry once after a delay
            setTimeout(() => this.updateTokenBalance(), 2000);
          } else if (error.message.includes('network') || error.message.includes('RPC')) {
            this.showNotification('Network error updating balance. Please check connection.', 'error');
          } else {
            console.warn('Balance update failed, using cached value');
          }
        }
      }
      
      showBalanceUpdateStatus(status) {
        const balanceDisplay = document.getElementById('balanceAmount');
        if (!balanceDisplay) return;
        
        const originalText = balanceDisplay.textContent;
        
        switch (status) {
          case 'loading':
            balanceDisplay.innerHTML = '<i class="animate-spin">⟳</i> Updating...';
            break;
          case 'success':
            balanceDisplay.style.color = '#10b981'; // green
            setTimeout(() => {
              balanceDisplay.style.color = '';
            }, 1000);
            break;
          case 'error':
            balanceDisplay.style.color = '#dc2626'; // red
            balanceDisplay.title = 'Failed to update balance';
            setTimeout(() => {
              balanceDisplay.style.color = '';
              balanceDisplay.title = '';
            }, 3000);
            break;
        }
      }

      setupWalletEventListeners() {
        // Listen for account changes
        if (window.solana) {
          window.solana.on('accountChanged', (publicKey) => {
            if (publicKey) {
              this.handleAccountChanged(publicKey);
            } else {
              this.handleWalletDisconnected();
            }
          });
        }
        
        // Listen for wallet connection status changes
        document.addEventListener('phantomWalletStatusChanged', (event) => {
          this.handleWalletStatusChange(event.detail);
        });
      }

      async handleWalletConnected(walletInfo) {
        try {
          this.walletConnected = true;
          this.userData.walletAddress = walletInfo.publicKey.toString();
          this.userData.gamertag = walletInfo.gamertag || 'Connected User';
          
          // Update token balance
          await this.updateTokenBalance();
          
          // Update UI
          this.updateUserInterface();
          this.updateDashboardStats();
          
          // Update profile wallet info if on profile section
          if (this.currentSection === 'profile') {
            await this.updateProfileWalletInfo();
          }
          
          // Update treasury data if on treasury section
          if (this.currentSection === 'treasury') {
            await this.loadTreasuryData();
          }
          
          // Show success notification
          this.showNotification('Phantom wallet connected successfully!', 'success');
          
          // Fire wallet connected event for voting system
          document.dispatchEvent(new CustomEvent('walletConnected', {
            detail: { 
              walletAddress: this.userData.walletAddress,
              mlgBalance: this.userData.mlgBalance 
            }
          }));
          
        } catch (error) {
          console.error('Error handling wallet connection:', error);
          this.showNotification('Error connecting wallet', 'error');
        }
      }

      async handleWalletDisconnected() {
        this.walletConnected = false;
        this.userData.mlgBalance = 0;
        this.userData.walletAddress = null;
        this.userData.gamertag = 'Guest';
        
        // Clear local storage
        localStorage.removeItem('mlg_wallet_connected');
        localStorage.removeItem('mlg_balance');
        localStorage.removeItem('mlg_wallet_address');
        localStorage.removeItem('mlg_gamertag');
        
        // Update UI
        this.updateUserInterface();
        
        // Update profile wallet info if on profile section
        if (this.currentSection === 'profile') {
          await this.updateProfileWalletInfo();
        }
        
        // Update treasury data if on treasury section
        if (this.currentSection === 'treasury') {
          await this.loadTreasuryData();
        }
        
        // Show notification
        this.showNotification('Wallet disconnected', 'success');
        
        // Fire wallet disconnected event
        document.dispatchEvent(new CustomEvent('walletDisconnected'));
      }

      handleWalletError(error) {
        console.error('Wallet error:', error);
        let message = 'Wallet connection error';
        
        if (error.code === 'WALLET_NOT_INSTALLED') {
          message = 'Phantom wallet not installed. Please install from phantom.app';
        } else if (error.code === 'USER_REJECTED') {
          message = 'Connection cancelled by user';
        } else if (error.code === 'CONNECTION_FAILED') {
          message = 'Failed to connect to Phantom wallet';
        }
        
        this.showNotification(message, 'error');
      }

      handleTokenBalanceUpdate(balance) {
        this.userData.mlgBalance = balance;
        this.updateUserInterface();
      }

      handleTokenError(error) {
        console.error('Token error:', error);
        this.showNotification('Error fetching MLG token balance', 'error');
      }

      async handleAccountChanged(publicKey) {
        if (this.walletConnected) {
          const newAddress = publicKey.toString();
          if (newAddress !== this.userData.walletAddress) {
            this.userData.walletAddress = newAddress;
            await this.updateTokenBalance();
            this.showNotification('Wallet account changed', 'info');
          }
        }
      }

      handleWalletStatusChange(status) {
        if (status.connected && !this.walletConnected) {
          // Wallet connected externally
          this.handleWalletConnected(status);
        } else if (!status.connected && this.walletConnected) {
          // Wallet disconnected externally
          this.handleWalletDisconnected();
        }
      }

      // =============================================================================
      // MULTI-PLATFORM VIDEO EMBEDDING SYSTEM
      // =============================================================================

      createMultiPlatformVideoEmbedder() {
        return {
          // YouTube video embedding
          embedYoutube: (url, options = {}) => {
            const videoId = this.extractYoutubeId(url);
            if (!videoId) throw new Error('Invalid YouTube URL');
            
            const embedUrl = `https://www.youtube.com/embed/${videoId}?${new URLSearchParams({
              autoplay: options.autoplay ? '1' : '0',
              rel: '0',
              modestbranding: '1',
              controls: '1'
            }).toString()}`;
            
            return this.createVideoEmbed(embedUrl, 'youtube', options);
          },
          
          // Twitter/X video embedding
          embedTwitter: async (url, options = {}) => {
            try {
              // Extract tweet ID from URL
              const tweetId = this.extractTweetId(url);
              if (!tweetId) throw new Error('Invalid Twitter URL');
              
              // Create Twitter embed using oEmbed API
              const embedHtml = await this.fetchTwitterEmbed(tweetId, options);
              return this.createPlatformEmbed(embedHtml, 'twitter', options);
            } catch (error) {
              console.error('Twitter embed failed:', error);
              return this.createEmbedError('Failed to load Twitter video', url);
            }
          },
          
          // TikTok video embedding
          embedTiktok: async (url, options = {}) => {
            try {
              const videoId = this.extractTiktokId(url);
              if (!videoId) throw new Error('Invalid TikTok URL');
              
              const embedHtml = await this.fetchTiktokEmbed(videoId, options);
              return this.createPlatformEmbed(embedHtml, 'tiktok', options);
            } catch (error) {
              console.error('TikTok embed failed:', error);
              return this.createEmbedError('Failed to load TikTok video', url);
            }
          },
          
          // Twitch clip embedding
          embedTwitch: (url, options = {}) => {
            const clipId = this.extractTwitchClipId(url);
            if (!clipId) throw new Error('Invalid Twitch clip URL');
            
            const embedUrl = `https://clips.twitch.tv/embed?clip=${clipId}&parent=${window.location.hostname}&autoplay=false`;
            return this.createVideoEmbed(embedUrl, 'twitch', options);
          },
          
          // Instagram video/reel embedding
          embedInstagram: async (url, options = {}) => {
            try {
              const postId = this.extractInstagramId(url);
              if (!postId) throw new Error('Invalid Instagram URL');
              
              const embedHtml = await this.fetchInstagramEmbed(postId, options);
              return this.createPlatformEmbed(embedHtml, 'instagram', options);
            } catch (error) {
              console.error('Instagram embed failed:', error);
              return this.createEmbedError('Failed to load Instagram content', url);
            }
          },
          
          // Direct video file embedding
          embedDirectVideo: (fileUrl, options = {}) => {
            const videoElement = document.createElement('video');
            videoElement.src = fileUrl;
            videoElement.controls = true;
            videoElement.preload = options.preload || 'metadata';
            videoElement.className = 'w-full h-full object-cover';
            
            if (options.autoplay) videoElement.autoplay = true;
            if (options.loop) videoElement.loop = true;
            if (options.muted) videoElement.muted = true;
            
            const container = this.createVideoContainer('direct', options);
            container.appendChild(videoElement);
            
            return container;
          },
          
          // Auto-detect platform and embed
          autoEmbed: async (url, options = {}) => {
            const platform = this.detectPlatform(url);
            
            switch (platform) {
              case 'youtube':
                return this.embedYoutube(url, options);
              case 'twitter':
                return await this.embedTwitter(url, options);
              case 'tiktok':
                return await this.embedTiktok(url, options);
              case 'twitch':
                return this.embedTwitch(url, options);
              case 'instagram':
                return await this.embedInstagram(url, options);
              default:
                // Try as direct video file
                if (this.isVideoFile(url)) {
                  return this.embedDirectVideo(url, options);
                }
                throw new Error(`Unsupported platform or invalid URL: ${url}`);
            }
          }
        };
      }

      // Platform detection utilities
      detectPlatform(url) {
        if (url.includes('youtube.com') || url.includes('youtu.be')) return 'youtube';
        if (url.includes('twitter.com') || url.includes('x.com')) return 'twitter';
        if (url.includes('tiktok.com')) return 'tiktok';
        if (url.includes('twitch.tv')) return 'twitch';
        if (url.includes('instagram.com')) return 'instagram';
        return 'unknown';
      }

      isVideoFile(url) {
        const videoExtensions = ['.mp4', '.webm', '.mov', '.avi', '.mkv', '.m4v'];
        return videoExtensions.some(ext => url.toLowerCase().includes(ext));
      }

      // ID extraction utilities
      extractYoutubeId(url) {
        const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
        const match = url.match(regex);
        return match ? match[1] : null;
      }

      extractTweetId(url) {
        const regex = /(?:twitter\.com|x\.com)\/(?:#!\/)?(\w+)\/status(?:es)?\/(\d+)/;
        const match = url.match(regex);
        return match ? match[2] : null;
      }

      extractTiktokId(url) {
        const regex = /tiktok\.com\/@[\w.-]+\/video\/(\d+)/;
        const match = url.match(regex);
        return match ? match[1] : null;
      }

      extractTwitchClipId(url) {
        const regex = /twitch\.tv\/\w+\/clip\/(\w+)/;
        const match = url.match(regex);
        return match ? match[1] : null;
      }

      extractInstagramId(url) {
        const regex = /instagram\.com\/(?:p|reel)\/([A-Za-z0-9_-]+)/;
        const match = url.match(regex);
        return match ? match[1] : null;
      }

      // Embed creation utilities
      createVideoEmbed(embedUrl, platform, options = {}) {
        const container = this.createVideoContainer(platform, options);
        
        const iframe = document.createElement('iframe');
        iframe.src = embedUrl;
        iframe.frameBorder = '0';
        iframe.allowFullscreen = true;
        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
        
        container.appendChild(iframe);
        
        if (options.showOverlay !== false) {
          const overlay = this.createVideoOverlay(platform, options);
          container.appendChild(overlay);
        }
        
        return container;
      }

      createPlatformEmbed(embedHtml, platform, options = {}) {
        const container = this.createVideoContainer(platform, options);
        container.innerHTML = embedHtml;
        return container;
      }

      createVideoContainer(platform, options = {}) {
        const container = document.createElement('div');
        container.className = `video-container ${platform}`;
        
        if (options.aspectRatio) {
          const ratio = options.aspectRatio;
          container.style.paddingBottom = `${(ratio.height / ratio.width) * 100}%`;
        }
        
        if (options.maxWidth) {
          container.style.maxWidth = options.maxWidth;
        }
        
        return container;
      }

      createVideoOverlay(platform, options = {}) {
        const overlay = document.createElement('div');
        overlay.className = 'video-overlay';
        
        const overlayContent = document.createElement('div');
        overlayContent.className = 'video-overlay-content';
        
        const platformIcons = {
          youtube: '📺',
          twitter: '🐦',
          tiktok: '🎵',
          twitch: '🟣',
          instagram: '📷',
          direct: '▶️'
        };
        
        overlayContent.innerHTML = `
          <div class="text-2xl mb-2">${platformIcons[platform] || '▶️'}</div>
          <div class="text-sm font-medium">${platform.charAt(0).toUpperCase() + platform.slice(1)} Video</div>
          ${options.title ? `<div class="text-xs mt-1 opacity-75">${options.title}</div>` : ''}
        `;
        
        overlay.appendChild(overlayContent);
        return overlay;
      }

      createEmbedError(message, url) {
        const errorContainer = document.createElement('div');
        errorContainer.className = 'embed-error';
        
        errorContainer.innerHTML = `
          <div class="text-4xl mb-2">⚠️</div>
          <div class="font-medium mb-2">${message}</div>
          <div class="text-sm opacity-75 mb-4">URL: ${url}</div>
          <button class="px-4 py-2 bg-red-600 bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-sm" onclick="window.open('${url}', '_blank')">
            Open in New Tab
          </button>
        `;
        
        return errorContainer;
      }

      // oEmbed API utilities (for Twitter, TikTok, Instagram)
      async fetchTwitterEmbed(tweetId, options = {}) {
        try {
          const response = await fetch(`https://publish.twitter.com/oembed?url=https://twitter.com/i/status/${tweetId}&theme=dark&omit_script=true`);
          const data = await response.json();
          return data.html;
        } catch (error) {
          console.error('Twitter oEmbed failed:', error);
          throw error;
        }
      }

      async fetchTiktokEmbed(videoId, options = {}) {
        try {
          const response = await fetch(`https://www.tiktok.com/oembed?url=https://www.tiktok.com/@user/video/${videoId}`);
          const data = await response.json();
          return data.html;
        } catch (error) {
          console.error('TikTok oEmbed failed:', error);
          throw error;
        }
      }

      async fetchInstagramEmbed(postId, options = {}) {
        try {
          const response = await fetch(`https://graph.facebook.com/v17.0/instagram_oembed?url=https://www.instagram.com/p/${postId}/&access_token=${this.getInstagramAccessToken()}&omitscript=true`);
          const data = await response.json();
          return data.html;
        } catch (error) {
          console.error('Instagram oEmbed failed:', error);
          throw error;
        }
      }

      getInstagramAccessToken() {
        // In production, this would be securely stored and managed
        // For demo purposes, return placeholder
        return 'YOUR_INSTAGRAM_ACCESS_TOKEN';
      }

      // Platform embed selector for content submission
      createPlatformEmbedSelector(onPlatformSelect) {
        const selector = document.createElement('div');
        selector.className = 'platform-embed-selector';
        
        const platforms = [
          { id: 'youtube', name: 'YouTube', icon: '📺' },
          { id: 'twitter', name: 'Twitter/X', icon: '🐦' },
          { id: 'tiktok', name: 'TikTok', icon: '🎵' },
          { id: 'twitch', name: 'Twitch', icon: '🟣' },
          { id: 'instagram', name: 'Instagram', icon: '📷' },
          { id: 'direct', name: 'Direct Upload', icon: '📁' }
        ];
        
        platforms.forEach(platform => {
          const option = document.createElement('div');
          option.className = 'platform-embed-option';
          option.dataset.platform = platform.id;
          
          option.innerHTML = `
            <div class="platform-icon">${platform.icon}</div>
            <div class="platform-name">${platform.name}</div>
          `;
          
          option.addEventListener('click', () => {
            // Remove selection from other options
            selector.querySelectorAll('.platform-embed-option').forEach(opt => {
              opt.classList.remove('selected');
            });
            
            // Select current option
            option.classList.add('selected');
            
            // Call callback
            if (onPlatformSelect) {
              onPlatformSelect(platform.id, platform);
            }
          });
          
          selector.appendChild(option);
        });
        
        return selector;
      }

      // Enhanced content submission with multi-platform support
      async handleMultiPlatformContentSubmission(contentData) {
        try {
          const videoEmbedder = this.createMultiPlatformVideoEmbedder();
          
          // If URL is provided, create embed
          if (contentData.platformUrl) {
            const embedContainer = await videoEmbedder.autoEmbed(contentData.platformUrl, {
              showOverlay: true,
              title: contentData.title
            });
            
            // Add embed to content data
            contentData.embedHTML = embedContainer.outerHTML;
            contentData.platform = this.detectPlatform(contentData.platformUrl);
          }
          
          // Process with regular content submission
          return await this.handleContentSubmission(contentData);
          
        } catch (error) {
          console.error('Multi-platform content submission failed:', error);
          throw error;
        }
      }

      loadContentData() {
        const contentFeed = document.getElementById('contentFeed');
        const mock = this.mockData.contentData;
        
        // Update content stats
        document.getElementById('totalUploads').textContent = mock.totalUploads;
        document.getElementById('totalViews').textContent = mock.totalViews.toLocaleString();
        document.getElementById('earnedMLG').textContent = mock.earnedMLG.toLocaleString();
        
        contentFeed.innerHTML = this.contentFeed.map(content => `
          <div class="bg-gaming-surface p-6 rounded-lg border border-gaming-accent border-opacity-30">
            <div class="flex items-start space-x-4">
              <div class="text-4xl">${content.thumbnail}</div>
              <div class="flex-1">
                <h4 class="text-lg font-bold text-gaming-accent mb-2">${content.title}</h4>
                <div class="flex items-center space-x-4 text-sm text-gray-400 mb-3">
                  <span>by ${content.creator}</span>
                  <span>•</span>
                  <span>${content.views} views</span>
                  <span>•</span>
                  <span class="text-${content.platform === 'YouTube' ? 'red' : content.platform === 'Twitch' ? 'purple' : 'pink'}-400">
                    ${content.platform}
                  </span>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center space-x-1">
                    ${Array(5).fill().map((_, i) => 
                      `<span class="text-${i < Math.floor(content.rating) ? 'yellow' : 'gray'}-400">⭐</span>`
                    ).join('')}
                    <span class="text-sm text-gray-400 ml-2">${content.rating}</span>
                  </div>
                  <div class="flex space-x-2">
                    <button class="px-3 py-1 bg-gaming-accent bg-opacity-20 rounded hover:bg-opacity-30 transition-colors text-sm">
                      Watch
                    </button>
                    <button class="px-3 py-1 bg-xbox-green bg-opacity-20 rounded hover:bg-opacity-30 transition-colors text-sm">
                      <i data-lucide="heart" class="w-3 h-3 inline mr-1"></i>
                      Like
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `).join('');
        
        // Re-initialize icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }

      loadAchievementData() {
        const achievementGrid = document.getElementById('achievementGrid');
        const unlockedCount = this.achievements.filter(a => a.unlocked).length;
        const totalScore = this.achievements.filter(a => a.unlocked).reduce((sum, a) => sum + a.score, 0);
        
        // Update achievement stats
        document.getElementById('achievementGamertag').textContent = this.userData.gamertag;
        document.getElementById('displayGamerScore').textContent = totalScore;
        document.getElementById('achievementLevel').textContent = Math.floor(totalScore / 100) + 1;
        document.getElementById('completionRate').textContent = `${Math.round((unlockedCount / this.achievements.length) * 100)}%`;
        document.getElementById('unlockedCount').textContent = unlockedCount;
        document.getElementById('totalCount').textContent = this.achievements.length;
        
        achievementGrid.innerHTML = this.achievements.map(achievement => `
          <div class="bg-gaming-surface p-4 rounded-lg border border-achievement-gold border-opacity-30 ${achievement.unlocked ? 'opacity-100' : 'opacity-50'}">
            <div class="text-center mb-3">
              <div class="text-3xl mb-2 ${achievement.unlocked ? 'animate-achievement-pop' : ''}">${achievement.icon}</div>
              <h4 class="font-bold text-achievement-gold">${achievement.name}</h4>
            </div>
            <p class="text-sm text-gray-300 text-center mb-3">${achievement.description}</p>
            <div class="text-center">
              <div class="text-lg font-bold text-achievement-gold">${achievement.score}G</div>
              <div class="text-xs ${achievement.unlocked ? 'text-xbox-green' : 'text-gray-500'}">
                ${achievement.unlocked ? 'Unlocked' : 'Locked'}
              </div>
            </div>
          </div>
        `).join('');
      }

      async loadTreasuryData() {
        const mock = this.mockData.treasuryData;
        
        // Update treasury metrics (DAO level)
        document.getElementById('treasuryTotal').textContent = `$${(mock.totalValue / 1000).toFixed(1)}K`;
        document.getElementById('monthlyGrowth').textContent = `+${mock.monthlyGrowth}%`;
        document.getElementById('stakingAPY').textContent = `${mock.stakingAPY}%`;
        
        // Asset allocation
        const assetAllocation = document.getElementById('assetAllocation');
        const assets = [
          { name: 'MLG Token', percentage: 45, color: 'xbox-green' },
          { name: 'SOL', percentage: 25, color: 'vault-purple' },
          { name: 'USDC', percentage: 20, color: 'blue-400' },
          { name: 'Other', percentage: 10, color: 'gray-400' }
        ];
        
        assetAllocation.innerHTML = assets.map(asset => `
          <div class="flex items-center justify-between p-3 bg-gaming-surface rounded-lg">
            <div class="flex items-center space-x-3">
              <div class="w-4 h-4 bg-${asset.color} rounded-full"></div>
              <span class="font-medium">${asset.name}</span>
            </div>
            <div class="flex items-center space-x-2">
              <span class="text-${asset.color} font-bold">${asset.percentage}%</span>
              <div class="w-20 h-2 bg-gray-700 rounded-full">
                <div class="h-2 bg-${asset.color} rounded-full" style="width: ${asset.percentage}%"></div>
              </div>
            </div>
          </div>
        `).join('');
        
        // Recent transactions - show real wallet transactions if connected
        const recentTransactions = document.getElementById('recentTransactions');
        
        if (this.walletConnected && this.userData.walletAddress) {
          try {
            // Fetch real transaction history from Solana
            const transactions = await this.mlgTokenManager.getRecentTransactions(
              this.userData.walletAddress,
              { limit: 5, includeBurns: true }
            );
            
            if (transactions && transactions.length > 0) {
              recentTransactions.innerHTML = transactions.map(tx => {
                const type = tx.type === 'burn' ? 'Vote' : 
                           tx.type === 'transfer_in' ? 'Reward' :
                           tx.type === 'transfer_out' ? 'Transfer' : 'Transaction';
                           
                const color = type === 'Reward' ? 'xbox-green' : 
                             type === 'Vote' ? 'burn-red' : 'gray-300';
                             
                const amount = `${tx.amount > 0 ? '+' : ''}${tx.amount} MLG`;
                const time = this.formatTimeAgo(tx.timestamp);
                
                return `
                  <div class="flex justify-between items-center p-2 bg-gaming-surface rounded text-sm">
                    <span class="text-${color}">${type}</span>
                    <span class="font-medium">${amount}</span>
                    <span class="text-gray-400">${time}</span>
                  </div>
                `;
              }).join('');
            } else {
              recentTransactions.innerHTML = `
                <div class="text-center py-4">
                  <div class="text-sm text-gray-400">No recent transactions</div>
                </div>
              `;
            }
          } catch (error) {
            console.error('Failed to load transaction history:', error);
            // Fallback to mock data
            this.loadMockTransactions(recentTransactions);
          }
        } else {
          // Show mock data with wallet connection prompt
          recentTransactions.innerHTML = `
            <div class="text-center py-4">
              <div class="text-sm text-gray-400 mb-2">Connect wallet to view your transaction history</div>
              <button onclick="app.handleWalletConnect()" class="text-xbox-green hover:text-xbox-light text-sm">
                Connect Phantom Wallet
              </button>
            </div>
          `;
        }
      }
      
      loadMockTransactions(container) {
        const transactions = [
          { type: 'Stake', amount: '1,000 MLG', time: '2h ago' },
          { type: 'Reward', amount: '+50 MLG', time: '6h ago' },
          { type: 'Vote', amount: '-25 MLG', time: '1d ago' },
          { type: 'Unstake', amount: '500 MLG', time: '2d ago' }
        ];
        
        container.innerHTML = transactions.map(tx => `
          <div class="flex justify-between items-center p-2 bg-gaming-surface rounded text-sm">
            <span class="text-${tx.type === 'Reward' ? 'xbox-green' : tx.type === 'Vote' ? 'burn-red' : 'gray-300'}">${tx.type}</span>
            <span class="font-medium">${tx.amount}</span>
            <span class="text-gray-400">${tx.time}</span>
          </div>
        `).join('');
      }
      
      formatTimeAgo(timestamp) {
        const now = Date.now();
        const diff = now - timestamp;
        const minutes = Math.floor(diff / 60000);
        const hours = Math.floor(minutes / 60);
        const days = Math.floor(hours / 24);
        
        if (days > 0) return `${days}d ago`;
        if (hours > 0) return `${hours}h ago`;
        if (minutes > 0) return `${minutes}m ago`;
        return 'Just now';
      }

      
      async updateProfileWalletInfo() {
        const walletInfoSection = document.getElementById('profileWalletInfo');
        
        if (walletInfoSection) {
          if (this.walletConnected && this.userData.walletAddress) {
            // Show real wallet information
            const shortAddress = `${this.userData.walletAddress.slice(0, 6)}...${this.userData.walletAddress.slice(-4)}`;
            
            walletInfoSection.innerHTML = `
              <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-gaming-surface rounded-lg">
                  <div>
                    <div class="text-sm font-semibold text-xbox-green">Connected Wallet</div>
                    <div class="text-xs text-gray-400 font-mono">${shortAddress}</div>
                  </div>
                  <div class="w-3 h-3 bg-xbox-green rounded-full animate-pulse"></div>
                </div>
                <button class="w-full p-2 bg-gaming-accent bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-gaming-accent text-sm font-semibold"
                        onclick="window.open('https://explorer.solana.com/address/${this.userData.walletAddress}${this.solanaConnection && this.solanaConnection._rpcEndpoint && this.solanaConnection._rpcEndpoint.includes('devnet') ? '?cluster=devnet' : ''}', '_blank')">
                  <i data-lucide="external-link" class="w-3 h-3 inline mr-1"></i>
                  View on Solana Explorer
                </button>
              </div>
            `;
          } else {
            walletInfoSection.innerHTML = `
              <div class="text-center py-4">
                <div class="w-12 h-12 bg-gray-700 rounded-full mx-auto mb-3 flex items-center justify-center">
                  <i data-lucide="wallet" class="w-6 h-6 text-gray-500"></i>
                </div>
                <div class="text-sm text-gray-400 mb-3">Connect your Phantom wallet to view balance and transaction history</div>
                <button class="p-2 bg-xbox-green bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors text-xbox-green text-sm font-semibold" 
                        onclick="window.mlgPlatform.handleWalletConnect()">
                  <i data-lucide="link" class="w-3 h-3 inline mr-1"></i>
                  Connect Wallet
                </button>
              </div>
            `;
          }
          
          // Re-initialize Lucide icons for the new content
          if (typeof lucide !== 'undefined') {
            lucide.createIcons();
          }
        }
      }

      // Convenience method for voting section
      async connectWallet() {
        await this.handleWalletConnect();
      }
      
      // =============================================================================
      // WALLET INTEGRATION TESTING AND VALIDATION
      // =============================================================================
      
      async testWalletIntegration() {
        console.log('🧪 Starting Wallet Integration Tests...');
        this.showNotification('Running wallet integration tests...', 'info');
        
        const testResults = {
          phantomDetection: false,
          solanaConnection: false,
          tokenManagerInit: false,
          walletConnection: false,
          tokenBalance: false,
          transactionSigning: false
        };
        
        try {
          // Test 1: Phantom Wallet Detection
          console.log('Test 1: Phantom Wallet Detection');
          testResults.phantomDetection = PhantomWalletManager.isPhantomAvailable();
          console.log(`✅ Phantom Detection: ${testResults.phantomDetection ? 'PASS' : 'FAIL'}`);
          
          // Test 2: Solana Connection
          console.log('Test 2: Solana Network Connection');
          try {
            await this.testSolanaConnection();
            testResults.solanaConnection = true;
            console.log('✅ Solana Connection: PASS');
          } catch (error) {
            console.log('❌ Solana Connection: FAIL -', error.message);
          }
          
          // Test 3: Token Manager Initialization
          console.log('Test 3: MLG Token Manager');
          testResults.tokenManagerInit = this.mlgTokenManager && typeof this.mlgTokenManager.getBalance === 'function';
          console.log(`✅ Token Manager: ${testResults.tokenManagerInit ? 'PASS' : 'FAIL'}`);
          
          // Test 4: Wallet Connection Status
          console.log('Test 4: Wallet Connection Status');
          testResults.walletConnection = this.walletConnected && this.userData.walletAddress;
          console.log(`✅ Wallet Connected: ${testResults.walletConnection ? 'PASS' : 'SKIP (not connected)'}`);
          
          // Test 5: Token Balance Fetch (only if wallet connected)
          if (testResults.walletConnection) {
            console.log('Test 5: Token Balance Fetch');
            try {
              const balance = await this.mlgTokenManager.getBalance(this.userData.walletAddress);
              testResults.tokenBalance = typeof balance === 'number';
              console.log(`✅ Token Balance: ${testResults.tokenBalance ? 'PASS' : 'FAIL'} (Balance: ${balance})`);
            } catch (error) {
              console.log('❌ Token Balance: FAIL -', error.message);
            }
          }
          
          // Test 6: Transaction Signing Capability (only if wallet connected)
          if (testResults.walletConnection && window.solana) {
            console.log('Test 6: Transaction Signing Capability');
            try {
              // Test if we can create and sign a simple transaction (without sending)
              const testTx = await this.createTestTransaction();
              if (testTx) {
                testResults.transactionSigning = true;
                console.log('✅ Transaction Signing: PASS');
              }
            } catch (error) {
              console.log('❌ Transaction Signing: FAIL -', error.message);
            }
          }
          
          // Generate test report
          this.displayTestResults(testResults);
          
        } catch (error) {
          console.error('Wallet integration test failed:', error);
          this.showNotification('Wallet integration test failed', 'error');
        }
      }
      
      async createTestTransaction() {
        try {
          const { Transaction, SystemProgram, PublicKey } = window.solanaWeb3;
          const transaction = new Transaction();
          
          // Add a simple instruction (transfer 0 SOL to self)
          transaction.add(
            SystemProgram.transfer({
              fromPubkey: new PublicKey(this.userData.walletAddress),
              toPubkey: new PublicKey(this.userData.walletAddress),
              lamports: 0
            })
          );
          
          // Get recent blockhash
          const { blockhash } = await this.solanaConnection.getLatestBlockhash();
          transaction.recentBlockhash = blockhash;
          transaction.feePayer = new PublicKey(this.userData.walletAddress);
          
          return transaction;
        } catch (error) {
          console.error('Failed to create test transaction:', error);
          return null;
        }
      }
      
      displayTestResults(results) {
        const totalTests = Object.keys(results).length;
        const passedTests = Object.values(results).filter(result => result === true).length;
        const successRate = ((passedTests / totalTests) * 100).toFixed(1);
        
        console.log('\n🧪 WALLET INTEGRATION TEST RESULTS');
        console.log('=====================================');
        console.log(`Total Tests: ${totalTests}`);
        console.log(`Passed: ${passedTests}`);
        console.log(`Success Rate: ${successRate}%`);
        console.log('\nDetailed Results:');
        
        Object.entries(results).forEach(([test, result]) => {
          const status = result ? '✅ PASS' : '❌ FAIL';
          const testName = test.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
          console.log(`  ${testName}: ${status}`);
        });
        
        // Show user notification
        if (successRate >= 80) {
          this.showNotification(`Wallet integration tests completed: ${successRate}% success rate`, 'success');
        } else {
          this.showNotification(`Wallet integration tests completed: ${successRate}% success rate. Check console for details.`, 'warning');
        }
        
        // Store results for potential debugging
        window.walletTestResults = results;
        console.log('\n💡 Test results stored in window.walletTestResults for debugging');
      }
      
      // Quick validation method for development
      async validateWalletSetup() {
        const issues = [];
        
        // Check critical components
        if (!this.phantomWalletManager) {
          issues.push('Phantom Wallet Manager not initialized');
        }
        
        if (!this.mlgTokenManager) {
          issues.push('MLG Token Manager not initialized');
        }
        
        if (!this.solanaConnection) {
          issues.push('Solana connection not established');
        }
        
        if (!PhantomWalletManager.isPhantomAvailable()) {
          issues.push('Phantom wallet not detected in browser');
        }
        
        // Check configuration
        if (!MLG_TOKEN_CONFIG.MINT_ADDRESS) {
          issues.push('MLG token mint address not configured');
        }
        
        if (issues.length > 0) {
          console.warn('🚨 Wallet Setup Issues Detected:');
          issues.forEach(issue => console.warn(`  - ${issue}`));
          return false;
        } else {
          console.log('✅ Wallet setup validation passed');
          return true;
        }
      }

      async handleWalletConnect() {
        if (this.walletConnected) {
          // Disconnect wallet using Phantom Wallet Manager
          try {
            await this.phantomWalletManager.disconnectUser();
            // The handleWalletDisconnected method will be called automatically
          } catch (error) {
            console.error('Error disconnecting wallet:', error);
            this.handleWalletDisconnected(); // Force disconnect on error
          }
        } else {
          // Connect to real Phantom wallet
          try {
            this.showNotification('Connecting to Phantom Wallet...', 'info');
            
            // Check if Phantom is installed
            if (!PhantomWalletManager.isPhantomAvailable()) {
              throw new Error('Phantom wallet not detected. Please install Phantom wallet from phantom.app');
            }
            
            // Attempt to connect
            const connectionResult = await this.phantomWalletManager.connect({
              onlyIfTrusted: false // Allow user interaction
            });
            
            if (connectionResult.success) {
              // Connection handled by the wallet manager's onConnect callback
              console.log('Wallet connection successful');
            } else {
              throw new Error(connectionResult.error || 'Failed to connect to Phantom wallet');
            }
            
          } catch (error) {
            console.error('Wallet connection error:', error);
            
            let errorMessage = 'Failed to connect wallet';
            
            if (error.message.includes('not detected') || error.message.includes('not installed')) {
              errorMessage = 'Phantom wallet not found. Please install from phantom.app';
            } else if (error.message.includes('rejected') || error.message.includes('cancelled')) {
              errorMessage = 'Connection cancelled by user';
            } else if (error.message.includes('timeout')) {
              errorMessage = 'Connection timed out. Please try again';
            }
            
            this.showNotification(errorMessage, 'error');
          }
        }
      }

      toggleUserMenu() {
        const dropdown = document.getElementById('userDropdown');
        dropdown.classList.toggle('hidden');
      }

      toggleMobileMenu() {
        const menu = document.getElementById('mobileMenu');
        menu.classList.toggle('open');
      }

      closeMobileMenu() {
        const menu = document.getElementById('mobileMenu');
        menu.classList.remove('open');
      }

      showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="text-lg">
                ${type === 'success' ? '✅' : type === 'error' ? '❌' : type === 'warning' ? '⚠️' : 'ℹ️'}
              </div>
              <div class="font-medium">${message}</div>
            </div>
            <button onclick="this.parentElement.parentElement.remove()" class="text-gray-400 hover:text-white">
              <i data-lucide="x" class="w-4 h-4"></i>
            </button>
          </div>
        `;
        
        document.getElementById('notificationContainer').appendChild(notification);
        
        // Initialize icons for notification
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
        
        // Auto-remove after 5 seconds
        setTimeout(() => {
          if (notification.parentElement) {
            notification.remove();
          }
        }, 5000);
      }

      hideLoadingScreen() {
        const loadingScreen = document.getElementById('loadingScreen');
        setTimeout(() => {
          loadingScreen.style.opacity = '0';
          setTimeout(() => {
            loadingScreen.style.display = 'none';
          }, 300);
        }, 1500);
      }

      startPeriodicUpdates() {
        // Update token balance every 30 seconds if connected
        setInterval(() => {
          if (this.walletConnected) {
            // Simulate small balance changes
            const change = (Math.random() - 0.5) * 10;
            this.userData.mlgBalance = Math.max(0, this.userData.mlgBalance + change);
            document.getElementById('balanceAmount').textContent = Math.floor(this.userData.mlgBalance).toLocaleString();
            localStorage.setItem('mlg_balance', this.userData.mlgBalance.toString());
          }
        }, 30000);
        
        // Update activity feed every 2 minutes
        setInterval(() => {
          // Add random activity
          const activities = [
            { icon: '🎮', text: 'New high score achieved!', time: 'Just now' },
            { icon: '💰', text: 'Earned rewards from staking', time: 'Just now' },
            { icon: '🏆', text: 'Clan moved up in rankings', time: 'Just now' }
          ];
          
          const randomActivity = activities[Math.floor(Math.random() * activities.length)];
          this.addActivityToFeed(randomActivity);
        }, 120000);
      }

      // =============================================================================
      // WEBSOCKET REAL-TIME SYSTEM - SUB-TASK 6.9
      // =============================================================================

      async initializeWebSocketSystem() {
        try {
          console.log('Initializing WebSocket real-time system...');
          
          // Initialize notification UI system first
          this.initializeNotificationUI();
          
          // Initialize user presence system
          this.initializeUserPresence();
          
          // Connect to WebSocket (using mock WebSocket for demo)
          await this.connectWebSocket();
          
          // Set up event subscriptions
          this.setupWebSocketSubscriptions();
          
          console.log('WebSocket real-time system initialized successfully');
          this.showNotification('Real-time updates connected', 'success');
          
        } catch (error) {
          console.error('Failed to initialize WebSocket system:', error);
          this.showNotification('Failed to connect real-time updates', 'warning');
        }
      }

      async connectWebSocket() {
        try {
          this.wsConnectionState = 'connecting';
          this.updateConnectionStatus();
          
          // In production, this would connect to your WebSocket server
          // For demo purposes, we'll simulate WebSocket behavior
          this.websocket = this.createMockWebSocket();
          
          // Set up connection handlers
          this.websocket.onopen = () => this.handleWebSocketOpen();
          this.websocket.onmessage = (event) => this.handleWebSocketMessage(event);
          this.websocket.onclose = (event) => this.handleWebSocketClose(event);
          this.websocket.onerror = (error) => this.handleWebSocketError(error);
          
          // Simulate connection success for demo
          setTimeout(() => {
            if (this.websocket && this.wsConnectionState === 'connecting') {
              this.handleWebSocketOpen();
            }
          }, 1000);
          
        } catch (error) {
          console.error('WebSocket connection failed:', error);
          this.handleWebSocketError(error);
        }
      }

      createMockWebSocket() {
        // Mock WebSocket implementation for demo
        const mockWS = {
          readyState: 0, // CONNECTING
          onopen: null,
          onmessage: null,
          onclose: null,
          onerror: null,
          send: (data) => {
            console.log('WebSocket send:', data);
          },
          close: () => {
            mockWS.readyState = 3; // CLOSED
            if (mockWS.onclose) {
              mockWS.onclose({ code: 1000, reason: 'Normal closure' });
            }
          }
        };

        // Simulate incoming real-time messages
        this.startMockWebSocketMessages(mockWS);
        
        return mockWS;
      }

      startMockWebSocketMessages(mockWS) {
        // Simulate various real-time events for demo
        const messageTypes = [
          'vote_update', 'clan_activity', 'achievement_unlock', 
          'content_moderation', 'system_notification', 'user_presence'
        ];

        setInterval(() => {
          if (mockWS && this.wsConnectionState === 'connected') {
            const messageType = messageTypes[Math.floor(Math.random() * messageTypes.length)];
            const mockMessage = this.generateMockMessage(messageType);
            
            if (mockWS.onmessage) {
              mockWS.onmessage({ data: JSON.stringify(mockMessage) });
            }
          }
        }, 15000 + Math.random() * 30000); // Random interval between 15-45 seconds
      }

      generateMockMessage(type) {
        const messages = {
          vote_update: {
            type: 'vote_update',
            data: {
              proposalId: 'prop_' + Date.now(),
              proposalTitle: 'Increase staking rewards',
              voteType: Math.random() > 0.5 ? 'for' : 'against',
              voterAddress: '0x' + Math.random().toString(16).substr(2, 8),
              votingPower: Math.floor(Math.random() * 1000) + 100,
              totalVotes: Math.floor(Math.random() * 5000) + 1000,
              timestamp: Date.now()
            }
          },
          clan_activity: {
            type: 'clan_activity',
            data: {
              clanId: 'mlg-elite-001',
              activity: Math.random() > 0.5 ? 'member_joined' : 'achievement_earned',
              memberName: 'ProGamer' + Math.floor(Math.random() * 1000),
              details: Math.random() > 0.5 ? 'joined the clan' : 'earned Tournament Winner achievement',
              timestamp: Date.now()
            }
          },
          achievement_unlock: {
            type: 'achievement_unlock',
            data: {
              userId: 'user_' + Math.random().toString(36).substr(2, 9),
              achievementId: 'ach_' + Math.floor(Math.random() * 100),
              achievementName: ['First Vote', 'Content Creator', 'Clan Leader', 'Token Whale'][Math.floor(Math.random() * 4)],
              achievementIcon: ['🗳️', '🎬', '👑', '💎'][Math.floor(Math.random() * 4)],
              rewardAmount: Math.floor(Math.random() * 500) + 50,
              timestamp: Date.now()
            }
          },
          content_moderation: {
            type: 'content_moderation',
            data: {
              contentId: 'content_' + Date.now(),
              action: Math.random() > 0.5 ? 'approved' : 'flagged',
              moderator: 'CommunityMod',
              reason: Math.random() > 0.5 ? 'Quality content' : 'Review required',
              timestamp: Date.now()
            }
          },
          system_notification: {
            type: 'system_notification',
            data: {
              title: 'System Update',
              message: 'New features have been deployed to the platform',
              priority: Math.random() > 0.7 ? 'high' : 'normal',
              timestamp: Date.now()
            }
          },
          user_presence: {
            type: 'user_presence',
            data: {
              userId: 'user_' + Math.random().toString(36).substr(2, 9),
              gamertag: 'Player' + Math.floor(Math.random() * 1000),
              status: Math.random() > 0.5 ? 'online' : 'offline',
              activity: Math.random() > 0.5 ? 'voting' : 'browsing',
              timestamp: Date.now()
            }
          }
        };

        return messages[type] || messages.system_notification;
      }

      handleWebSocketOpen() {
        console.log('WebSocket connected successfully');
        this.wsConnectionState = 'connected';
        this.wsReconnectAttempts = 0;
        this.updateConnectionStatus();
        
        // Start heartbeat
        this.startHeartbeat();
        
        // Send any queued messages
        this.processMessageQueue();
        
        // Subscribe to user-specific channels
        this.subscribeToChannels();
        
        this.showNotification('Real-time updates connected', 'success');
      }

      handleWebSocketMessage(event) {
        try {
          const message = JSON.parse(event.data);
          console.log('WebSocket message received:', message);
          
          // Handle different message types
          switch (message.type) {
            case 'heartbeat':
              this.handleHeartbeat(message);
              break;
            case 'vote_update':
              this.handleVoteUpdate(message.data);
              break;
            case 'clan_activity':
              this.handleClanActivity(message.data);
              break;
            case 'achievement_unlock':
              this.handleAchievementUnlock(message.data);
              break;
            case 'content_moderation':
              this.handleContentModeration(message.data);
              break;
            case 'system_notification':
              this.handleSystemNotification(message.data);
              break;
            case 'user_presence':
              this.handleUserPresence(message.data);
              break;
            default:
              console.log('Unhandled WebSocket message type:', message.type);
          }
        } catch (error) {
          console.error('Error handling WebSocket message:', error);
        }
      }

      handleWebSocketClose(event) {
        console.log('WebSocket connection closed:', event.code, event.reason);
        this.wsConnectionState = 'disconnected';
        this.updateConnectionStatus();
        
        // Clear heartbeat
        this.stopHeartbeat();
        
        // Attempt to reconnect unless it was intentional
        if (event.code !== 1000 && this.wsReconnectAttempts < this.wsMaxReconnectAttempts) {
          this.scheduleReconnect();
        } else {
          this.showNotification('Real-time updates disconnected', 'warning');
        }
      }

      handleWebSocketError(error) {
        console.error('WebSocket error:', error);
        this.wsConnectionState = 'error';
        this.updateConnectionStatus();
        this.showNotification('Connection error - retrying...', 'error');
      }

      scheduleReconnect() {
        this.wsReconnectAttempts++;
        const delay = this.wsReconnectDelay * Math.pow(2, this.wsReconnectAttempts - 1); // Exponential backoff
        
        console.log(`Scheduling WebSocket reconnect in ${delay}ms (attempt ${this.wsReconnectAttempts})`);
        
        setTimeout(() => {
          if (this.wsConnectionState !== 'connected') {
            this.connectWebSocket();
          }
        }, delay);
      }

      startHeartbeat() {
        this.wsHeartbeatInterval = setInterval(() => {
          if (this.websocket && this.wsConnectionState === 'connected') {
            this.sendWebSocketMessage({ type: 'heartbeat', timestamp: Date.now() });
            
            // Set timeout for heartbeat response
            this.wsHeartbeatTimeout = setTimeout(() => {
              console.warn('Heartbeat timeout - connection may be lost');
              if (this.websocket) {
                this.websocket.close();
              }
            }, 5000);
          }
        }, 30000); // Send heartbeat every 30 seconds
      }

      stopHeartbeat() {
        if (this.wsHeartbeatInterval) {
          clearInterval(this.wsHeartbeatInterval);
          this.wsHeartbeatInterval = null;
        }
        if (this.wsHeartbeatTimeout) {
          clearTimeout(this.wsHeartbeatTimeout);
          this.wsHeartbeatTimeout = null;
        }
      }

      handleHeartbeat(message) {
        // Clear heartbeat timeout
        if (this.wsHeartbeatTimeout) {
          clearTimeout(this.wsHeartbeatTimeout);
          this.wsHeartbeatTimeout = null;
        }
      }

      sendWebSocketMessage(message) {
        if (this.websocket && this.wsConnectionState === 'connected') {
          this.websocket.send(JSON.stringify(message));
        } else {
          // Queue message for later
          this.wsMessageQueue.push(message);
        }
      }

      processMessageQueue() {
        while (this.wsMessageQueue.length > 0) {
          const message = this.wsMessageQueue.shift();
          this.sendWebSocketMessage(message);
        }
      }

      subscribeToChannels() {
        // Subscribe to relevant channels based on user state
        const subscriptions = [
          'system_notifications',
          'vote_updates',
          'achievement_updates'
        ];

        if (this.userData.clanMember) {
          subscriptions.push('clan_activities');
        }

        subscriptions.forEach(channel => {
          this.subscribeToChannel(channel);
        });
      }

      subscribeToChannel(channel) {
        this.wsSubscriptions.add(channel);
        this.sendWebSocketMessage({
          type: 'subscribe',
          channel: channel,
          userId: this.userData.gamertag
        });
      }

      unsubscribeFromChannel(channel) {
        this.wsSubscriptions.delete(channel);
        this.sendWebSocketMessage({
          type: 'unsubscribe',
          channel: channel,
          userId: this.userData.gamertag
        });
      }

      updateConnectionStatus() {
        const statusElement = document.getElementById('connectionStatus');
        const statusContainer = statusElement?.parentElement;
        
        if (statusElement && statusContainer) {
          const statusConfig = {
            connecting: { text: 'Connecting...', class: 'text-yellow-400', icon: '🔄', containerClass: 'connection-status-connecting' },
            connected: { text: 'Connected', class: 'text-green-400', icon: '🟢', containerClass: 'connection-status-connected' },
            disconnected: { text: 'Disconnected', class: 'text-red-400', icon: '🔴', containerClass: '' },
            error: { text: 'Connection Error', class: 'text-red-400', icon: '❌', containerClass: 'connection-status-error' }
          };

          const config = statusConfig[this.wsConnectionState];
          statusElement.innerHTML = `${config.icon} ${config.text}`;
          statusElement.className = `text-sm ${config.class}`;
          
          // Update container styling
          statusContainer.className = statusContainer.className.replace(/connection-status-\w+/g, '');
          if (config.containerClass) {
            statusContainer.classList.add(config.containerClass);
          }
        }
      }

      // =============================================================================
      // WEBSOCKET EVENT HANDLERS
      // =============================================================================

      handleVoteUpdate(data) {
        console.log('Vote update received:', data);
        
        // Update voting UI if on voting page
        if (this.currentSection === 'voting') {
          this.updateVotingDisplay(data);
        }
        
        // Show live notification
        this.showRealtimeNotification({
          type: 'vote',
          title: 'Live Vote Update',
          message: `${data.voteType.toUpperCase()} vote cast on "${data.proposalTitle}"`,
          icon: '🗳️',
          data: data
        });
        
        // Update activity feed
        this.addActivityToFeed({
          icon: '🗳️',
          text: `New ${data.voteType} vote on "${data.proposalTitle}"`,
          time: 'Just now',
          realtime: true
        });
        
        // Play sound effect
        this.playNotificationSound('vote');
      }

      handleClanActivity(data) {
        console.log('Clan activity received:', data);
        
        // Update clan UI if on clans page
        if (this.currentSection === 'clans') {
          this.updateClanDisplay(data);
        }
        
        // Show notification for clan members
        if (this.userData.clanMember) {
          this.showRealtimeNotification({
            type: 'clan',
            title: 'Clan Activity',
            message: `${data.memberName} ${data.details}`,
            icon: '👥',
            data: data
          });
        }
        
        // Update activity feed
        this.addActivityToFeed({
          icon: '👥',
          text: `${data.memberName} ${data.details}`,
          time: 'Just now',
          realtime: true
        });
        
        // Update clan member count and status
        this.updateClanMemberPresence(data);
      }

      handleAchievementUnlock(data) {
        console.log('Achievement unlock received:', data);
        
        // Show achievement unlock animation
        this.showAchievementUnlockAnimation(data);
        
        // Update achievement UI if on achievements page
        if (this.currentSection === 'achievements') {
          this.updateAchievementDisplay(data);
        }
        
        // Show notification
        this.showRealtimeNotification({
          type: 'achievement',
          title: 'Achievement Unlocked!',
          message: `${data.achievementName} - ${data.rewardAmount} MLG tokens earned!`,
          icon: data.achievementIcon,
          data: data,
          duration: 6000
        });
        
        // Update activity feed
        this.addActivityToFeed({
          icon: data.achievementIcon,
          text: `Achievement unlocked: ${data.achievementName}`,
          time: 'Just now',
          realtime: true
        });
        
        // Play achievement sound
        this.playNotificationSound('achievement');
        
        // Update user stats if it's the current user
        if (data.userId === this.userData.gamertag) {
          this.userData.achievements.push(data);
          this.userData.mlgBalance += data.rewardAmount;
          this.updateUserDisplay();
        }
      }

      handleContentModeration(data) {
        console.log('Content moderation update:', data);
        
        // Update content UI if on content page
        if (this.currentSection === 'content') {
          this.updateContentModerationDisplay(data);
        }
        
        // Show notification
        this.showRealtimeNotification({
          type: 'moderation',
          title: 'Content Moderation',
          message: `Content ${data.action} by ${data.moderator}: ${data.reason}`,
          icon: data.action === 'approved' ? '✅' : '⚠️',
          data: data
        });
        
        // Update activity feed
        this.addActivityToFeed({
          icon: data.action === 'approved' ? '✅' : '⚠️',
          text: `Content ${data.action}: ${data.reason}`,
          time: 'Just now',
          realtime: true
        });
      }

      handleSystemNotification(data) {
        console.log('System notification:', data);
        
        // Show system notification
        this.showRealtimeNotification({
          type: 'system',
          title: data.title,
          message: data.message,
          icon: '📢',
          data: data,
          priority: data.priority,
          duration: data.priority === 'high' ? 10000 : 5000
        });
        
        // Add to activity feed
        this.addActivityToFeed({
          icon: '📢',
          text: `${data.title}: ${data.message}`,
          time: 'Just now',
          realtime: true
        });
        
        // Play notification sound for high priority
        if (data.priority === 'high') {
          this.playNotificationSound('system');
        }
      }

      handleUserPresence(data) {
        console.log('User presence update:', data);
        
        // Update presence indicators
        this.updateUserPresenceDisplay(data);
        
        // Update clan member list if visible
        if (this.currentSection === 'clans') {
          this.updateClanMemberStatus(data);
        }
        
        // Show online/offline notifications for clan members
        if (this.userData.clanMember && data.status === 'online') {
          this.showRealtimeNotification({
            type: 'presence',
            title: 'Member Online',
            message: `${data.gamertag} is now online`,
            icon: '🟢',
            data: data,
            duration: 3000
          });
        }
      }

      // =============================================================================
      // NOTIFICATION UI SYSTEM
      // =============================================================================

      initializeNotificationUI() {
        // Create notification container if it doesn't exist
        if (!document.getElementById('realtimeNotifications')) {
          const container = document.createElement('div');
          container.id = 'realtimeNotifications';
          container.className = 'fixed top-4 right-4 z-50 space-y-2 max-w-sm';
          document.body.appendChild(container);
        }

        // Create notification center toggle
        this.createNotificationCenter();
        
        // Initialize notification preferences
        this.notificationPreferences = {
          votes: true,
          clanActivities: true,
          achievements: true,
          moderation: true,
          system: true,
          sound: true
        };
      }

      createNotificationCenter() {
        // Add notification center button to header if it doesn't exist
        const headerActions = document.querySelector('.header-actions');
        if (headerActions && !document.getElementById('notificationCenter')) {
          const notificationButton = document.createElement('button');
          notificationButton.id = 'notificationCenter';
          notificationButton.className = 'relative p-2 bg-gaming-surface hover:bg-opacity-80 rounded-lg transition-colors';
          notificationButton.innerHTML = `
            <span class="text-xl">🔔</span>
            <span id="notificationBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
          `;
          notificationButton.onclick = () => this.toggleNotificationCenter();
          
          // Insert before connection status
          const connectionStatus = document.getElementById('connectionStatus');
          if (connectionStatus) {
            headerActions.insertBefore(notificationButton, connectionStatus.parentElement);
          } else {
            headerActions.appendChild(notificationButton);
          }
        }
      }

      showRealtimeNotification(notification) {
        // Check if notification type is enabled
        if (!this.isNotificationEnabled(notification.type)) {
          return;
        }

        const container = document.getElementById('realtimeNotifications');
        if (!container) return;

        // Create notification element
        const notificationEl = document.createElement('div');
        const baseClasses = 'realtime-notification bg-gaming-surface rounded-lg p-4 shadow-lg transform transition-all duration-300 ease-out opacity-0 translate-x-full hover:bg-opacity-90 cursor-pointer min-w-80';
        const priorityClass = notification.priority === 'high' ? 'high-priority' : '';
        
        notificationEl.className = `${baseClasses} ${priorityClass}`;

        notificationEl.innerHTML = `
          <div class="flex items-start space-x-3">
            <div class="text-2xl flex-shrink-0">${notification.icon}</div>
            <div class="flex-1 min-w-0">
              <div class="text-sm font-medium text-white truncate">${notification.title}</div>
              <div class="text-xs text-gray-300 mt-1">${notification.message}</div>
              <div class="text-xs text-gray-400 mt-2">Just now</div>
            </div>
            <button class="text-gray-400 hover:text-white text-sm" onclick="this.parentElement.parentElement.remove()">×</button>
          </div>
        `;

        // Add click handler
        notificationEl.onclick = (e) => {
          if (e.target.tagName !== 'BUTTON') {
            this.handleNotificationClick(notification);
          }
        };

        container.appendChild(notificationEl);

        // Animate in
        setTimeout(() => {
          notificationEl.classList.remove('opacity-0', 'translate-x-full');
        }, 10);

        // Auto-remove after duration
        const duration = notification.duration || 5000;
        setTimeout(() => {
          if (notificationEl.parentNode) {
            notificationEl.classList.add('opacity-0', 'translate-x-full');
            setTimeout(() => {
              if (notificationEl.parentNode) {
                notificationEl.remove();
              }
            }, 300);
          }
        }, duration);

        // Update notification badge
        this.updateNotificationBadge();
        
        // Add to notification history
        this.addToNotificationHistory(notification);
      }

      isNotificationEnabled(type) {
        const typeMap = {
          vote: 'votes',
          clan: 'clanActivities',
          achievement: 'achievements',
          moderation: 'moderation',
          system: 'system',
          presence: 'clanActivities'
        };
        
        const preferenceKey = typeMap[type] || type;
        return this.notificationPreferences[preferenceKey] !== false;
      }

      handleNotificationClick(notification) {
        // Navigate to relevant section based on notification type
        switch (notification.type) {
          case 'vote':
            this.navigateToSection('voting');
            break;
          case 'clan':
          case 'presence':
            this.navigateToSection('clans');
            break;
          case 'achievement':
            this.navigateToSection('achievements');
            break;
          case 'moderation':
            this.navigateToSection('content');
            break;
          default:
            console.log('Notification clicked:', notification);
        }
      }

      addToNotificationHistory(notification) {
        if (!this.notificationHistory) {
          this.notificationHistory = [];
        }
        
        this.notificationHistory.unshift({
          ...notification,
          timestamp: Date.now(),
          read: false
        });
        
        // Keep only last 50 notifications
        if (this.notificationHistory.length > 50) {
          this.notificationHistory = this.notificationHistory.slice(0, 50);
        }
        
        // Save to localStorage
        localStorage.setItem('mlg_notification_history', JSON.stringify(this.notificationHistory));
      }

      updateNotificationBadge() {
        const badge = document.getElementById('notificationBadge');
        if (badge) {
          const unreadCount = this.notificationHistory ? 
            this.notificationHistory.filter(n => !n.read).length : 0;
          
          if (unreadCount > 0) {
            badge.textContent = unreadCount > 99 ? '99+' : unreadCount.toString();
            badge.classList.remove('hidden');
          } else {
            badge.classList.add('hidden');
          }
        }
      }

      toggleNotificationCenter() {
        // Implementation for notification center toggle
        console.log('Toggle notification center');
        // This would show/hide a notification history panel
      }

      // =============================================================================
      // USER PRESENCE SYSTEM
      // =============================================================================

      initializeUserPresence() {
        this.userPresence = {
          status: 'online',
          activity: 'browsing',
          lastSeen: Date.now()
        };

        // Update presence every 30 seconds
        setInterval(() => {
          this.updateUserPresence();
        }, 30000);

        // Set status to away after 5 minutes of inactivity
        this.setupInactivityDetection();
      }

      updateUserPresence() {
        if (this.wsConnectionState === 'connected') {
          this.sendWebSocketMessage({
            type: 'presence_update',
            userId: this.userData.gamertag,
            presence: this.userPresence
          });
        }
      }

      setupInactivityDetection() {
        let lastActivity = Date.now();
        
        const updateActivity = () => {
          lastActivity = Date.now();
          if (this.userPresence.status === 'away') {
            this.userPresence.status = 'online';
            this.updateUserPresence();
          }
        };

        // Listen for user activity
        ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(event => {
          document.addEventListener(event, updateActivity, true);
        });

        // Check for inactivity every minute
        setInterval(() => {
          if (Date.now() - lastActivity > 300000 && this.userPresence.status === 'online') { // 5 minutes
            this.userPresence.status = 'away';
            this.updateUserPresence();
          }
        }, 60000);
      }

      updateUserPresenceDisplay(data) {
        // Update presence indicators in clan member lists, etc.
        const memberElements = document.querySelectorAll(`[data-member-id="${data.userId}"]`);
        memberElements.forEach(element => {
          const statusElement = element.querySelector('.member-status');
          if (statusElement) {
            statusElement.textContent = data.status === 'online' ? '🟢' : '🔴';
            statusElement.title = `${data.gamertag} is ${data.status}`;
          }
        });
      }

      // =============================================================================
      // SOUND EFFECTS
      // =============================================================================

      playNotificationSound(type) {
        if (!this.notificationPreferences.sound) return;

        // Create audio context for sound effects
        if (!this.audioContext) {
          this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
        }

        // Generate different tones for different notification types
        const frequencies = {
          vote: [800, 600],
          clan: [600, 400],
          achievement: [800, 1000, 600],
          system: [400, 800],
          moderation: [500, 300]
        };

        const freq = frequencies[type] || [600];
        this.playTone(freq, 0.1, 200);
      }

      playTone(frequencies, volume = 0.1, duration = 200) {
        if (!this.audioContext) return;

        frequencies.forEach((freq, index) => {
          const oscillator = this.audioContext.createOscillator();
          const gainNode = this.audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(this.audioContext.destination);
          
          oscillator.frequency.value = freq;
          oscillator.type = 'sine';
          
          gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
          gainNode.gain.linearRampToValueAtTime(volume, this.audioContext.currentTime + 0.01);
          gainNode.gain.linearRampToValueAtTime(0, this.audioContext.currentTime + duration / 1000);
          
          oscillator.start(this.audioContext.currentTime + index * 0.1);
          oscillator.stop(this.audioContext.currentTime + duration / 1000 + index * 0.1);
        });
      }

      // =============================================================================
      // UI UPDATE HELPERS
      // =============================================================================

      updateVotingDisplay(data) {
        // Update voting results if on voting page
        const proposalElement = document.querySelector(`[data-proposal-id="${data.proposalId}"]`);
        if (proposalElement) {
          const votesElement = proposalElement.querySelector('.total-votes');
          if (votesElement) {
            votesElement.textContent = data.totalVotes.toLocaleString();
          }
        }
      }

      updateClanDisplay(data) {
        // Update clan member list and activities
        if (data.activity === 'member_joined') {
          // Add new member to clan display if visible
          const membersList = document.getElementById('clanMembersList');
          if (membersList) {
            // Add member to list (implementation would vary based on UI structure)
            console.log('Adding new clan member to display:', data.memberName);
          }
        }
      }

      updateAchievementDisplay(data) {
        // Update achievement list if on achievements page
        const achievementsList = document.getElementById('achievementsList');
        if (achievementsList) {
          // Add new achievement to display
          console.log('Updating achievements display with:', data);
        }
      }

      updateContentModerationDisplay(data) {
        // Update content moderation queue
        const moderationQueue = document.getElementById('moderationQueue');
        if (moderationQueue) {
          // Update content status
          console.log('Updating content moderation display:', data);
        }
      }

      updateClanMemberPresence(data) {
        // Update clan member online/offline status
        if (data.activity === 'member_joined' || data.activity === 'member_online') {
          // Update member count and online indicators
          console.log('Updating clan member presence:', data);
        }
      }

      updateClanMemberStatus(data) {
        // Update individual member status in clan view
        console.log('Updating clan member status:', data);
      }

      showAchievementUnlockAnimation(data) {
        // Show special achievement unlock animation
        const achievementOverlay = document.createElement('div');
        achievementOverlay.className = `
          fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50
          animate-fade-in pointer-events-none
        `;
        
        achievementOverlay.innerHTML = `
          <div class="bg-gaming-surface border-2 border-achievement-gold rounded-lg p-8 text-center animate-achievement-pop max-w-md mx-4">
            <div class="text-6xl mb-4">${data.achievementIcon}</div>
            <h2 class="text-2xl font-bold text-achievement-gold mb-2">Achievement Unlocked!</h2>
            <h3 class="text-xl text-white mb-2">${data.achievementName}</h3>
            <p class="text-gray-300 mb-4">Reward: ${data.rewardAmount} MLG tokens</p>
            <div class="animate-pulse text-achievement-gold">★ ★ ★</div>
          </div>
        `;
        
        document.body.appendChild(achievementOverlay);
        
        // Remove after animation
        setTimeout(() => {
          if (achievementOverlay.parentNode) {
            achievementOverlay.classList.add('opacity-0');
            setTimeout(() => {
              achievementOverlay.remove();
            }, 300);
          }
        }, 4000);
      }

      setupWebSocketSubscriptions() {
        // Set up additional WebSocket event subscriptions
        // This would handle subscription management for different event types
        console.log('Setting up WebSocket subscriptions');
      }

      updateUserDisplay() {
        // Update user stats in the header
        document.getElementById('balanceAmount').textContent = Math.floor(this.userData.mlgBalance).toLocaleString();
        
        // Update user level display if it exists
        const levelElement = document.getElementById('userLevel');
        if (levelElement) {
          levelElement.textContent = this.userData.level;
        }
        
        // Update XP display if it exists
        const xpElement = document.getElementById('userXP');
        if (xpElement) {
          xpElement.textContent = this.userData.xp.toLocaleString();
        }
        
        // Save updated data to localStorage
        localStorage.setItem('mlg_balance', this.userData.mlgBalance.toString());
        localStorage.setItem('mlg_userdata', JSON.stringify(this.userData));
      }

      addActivityToFeed(activity) {
        const feedContainer = document.getElementById('activityFeed');
        if (!feedContainer) return;
        
        const activityElement = document.createElement('div');
        const baseClasses = 'flex items-center space-x-4 p-4 bg-gaming-surface rounded-lg hover:bg-opacity-80 transition-colors';
        const animationClass = activity.realtime ? 'animate-notification-slide' : 'animate-fade-in';
        const realtimeClass = activity.realtime ? 'border border-green-400 animate-realtime-pulse' : '';
        
        activityElement.className = `${baseClasses} ${animationClass} ${realtimeClass}`;
        activityElement.innerHTML = `
          <div class="text-2xl">${activity.icon}</div>
          <div class="flex-1">
            <div class="text-sm ${activity.realtime ? 'text-green-300' : 'text-gray-300'}">${activity.text}</div>
            <div class="text-xs ${activity.realtime ? 'text-green-400' : 'text-gray-500'} mt-1">${activity.time}${activity.realtime ? ' 🔴 LIVE' : ''}</div>
          </div>
        `;
        
        if (feedContainer.firstChild) {
          feedContainer.insertBefore(activityElement, feedContainer.firstChild);
        } else {
          feedContainer.appendChild(activityElement);
        }
        
        // Remove oldest activity if more than 6
        const activities = feedContainer.children;
        if (activities.length > 6) {
          feedContainer.removeChild(activities[activities.length - 1]);
        }
        
        // Remove realtime styling after 10 seconds
        if (activity.realtime) {
          setTimeout(() => {
            activityElement.classList.remove('border', 'border-green-400', 'animate-realtime-pulse');
            const textElement = activityElement.querySelector('.text-green-300');
            const timeElement = activityElement.querySelector('.text-green-400');
            if (textElement) textElement.className = textElement.className.replace('text-green-300', 'text-gray-300');
            if (timeElement) {
              timeElement.className = timeElement.className.replace('text-green-400', 'text-gray-500');
              timeElement.textContent = timeElement.textContent.replace(' 🔴 LIVE', '');
            }
          }, 10000);
        }
      }
      
      // Enhanced Navigation Features
      initializeKeyboardShortcuts() {
        document.addEventListener('keydown', (e) => {
          // Global shortcuts
          if (e.ctrlKey || e.metaKey) {
            switch (e.key) {
              case 'k':
                e.preventDefault();
                this.showGlobalSearch();
                break;
              case '1':
                e.preventDefault();
                this.navigateToSection('dashboard');
                break;
              case '2':
                e.preventDefault();
                this.navigateToSection('clans');
                break;
              case '3':
                e.preventDefault();
                this.navigateToSection('voting');
                break;
              case '4':
                e.preventDefault();
                this.navigateToSection('content');
                break;
              case '5':
                e.preventDefault();
                this.navigateToSection('achievements');
                break;
              case '6':
                e.preventDefault();
                this.navigateToSection('treasury');
                break;
              case '0':
                e.preventDefault();
                this.navigateToSection('profile');
                break;
            }
          }
          
          // Navigation shortcuts without modifier
          if (!e.ctrlKey && !e.metaKey && !e.altKey) {
            switch (e.key) {
              case 'Escape':
                this.hideGlobalSearch();
                this.closeMobileMenu();
                break;
              case 'ArrowLeft':
                if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                  this.navigateBack();
                }
                break;
            }
          }
        });
      }
      
      navigateBack() {
        if (this.router.navigationHistory.length > 1) {
          const previousSection = this.router.navigationHistory[this.router.navigationHistory.length - 2];
          if (previousSection) {
            this.navigateToSection(previousSection.section, { restoreState: true });
          }
        }
      }
      
      initializeGlobalSearch() {
        const searchBtn = document.getElementById('desktopSearchBtn');
        const mobileSearchBtn = document.getElementById('globalSearchBtn');
        const searchInput = document.getElementById('globalSearchInput');
        const closeBtn = document.getElementById('closeGlobalSearch');
        const searchOverlay = document.getElementById('globalSearchOverlay');
        
        if (searchBtn) {
          searchBtn.addEventListener('click', () => this.showGlobalSearch());
        }
        
        if (mobileSearchBtn) {
          mobileSearchBtn.addEventListener('click', () => this.showGlobalSearch());
        }
        
        if (closeBtn) {
          closeBtn.addEventListener('click', () => this.hideGlobalSearch());
        }
        
        if (searchInput) {
          searchInput.addEventListener('input', (e) => {
            this.performGlobalSearch(e.target.value);
          });
          
          searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
              this.executeFirstSearchResult();
            }
          });
        }
        
        if (searchOverlay) {
          searchOverlay.addEventListener('click', (e) => {
            if (e.target === searchOverlay) {
              this.hideGlobalSearch();
            }
          });
        }
      }
      
      showGlobalSearch() {
        const overlay = document.getElementById('globalSearchOverlay');
        const input = document.getElementById('globalSearchInput');
        
        if (overlay && input) {
          overlay.classList.remove('hidden');
          setTimeout(() => {
            input.focus();
          }, 100);
        }
      }
      
      hideGlobalSearch() {
        const overlay = document.getElementById('globalSearchOverlay');
        const results = document.getElementById('globalSearchResults');
        const input = document.getElementById('globalSearchInput');
        
        if (overlay) {
          overlay.classList.add('hidden');
        }
        
        if (results) {
          results.classList.add('hidden');
          results.innerHTML = '';
        }
        
        if (input) {
          input.value = '';
        }
      }
      
      async performGlobalSearch(query) {
        if (!query || query.length < 2) {
          this.hideSearchResults();
          return;
        }
        
        const resultsContainer = document.getElementById('globalSearchResults');
        if (!resultsContainer) return;
        
        // Show loading state
        resultsContainer.innerHTML = `
          <div class="p-4 text-center">
            <div class="loading-spinner mx-auto mb-2" style="width: 20px; height: 20px;"></div>
            <div class="text-gray-400 text-sm">Searching...</div>
          </div>
        `;
        resultsContainer.classList.remove('hidden');
        
        try {
          // Simulate search across all sections
          await new Promise(resolve => setTimeout(resolve, 300));
          
          const results = await this.searchAllSections(query);
          this.displaySearchResults(results);
          
        } catch (error) {
          console.error('Search failed:', error);
          resultsContainer.innerHTML = `
            <div class="p-4 text-center text-red-400">
              Search failed. Please try again.
            </div>
          `;
        }
      }
      
      async searchAllSections(query) {
        const results = [];
        const searchTerm = query.toLowerCase();
        
        // Search clans
        if (this.mockData?.clans) {
          this.mockData.clans.forEach(clan => {
            if (clan.name.toLowerCase().includes(searchTerm)) {
              results.push({
                type: 'clan',
                title: clan.name,
                description: `${clan.memberCount} members • ${clan.tier} tier`,
                section: 'clans',
                params: { clan: clan.id }
              });
            }
          });
        }
        
        // Search voting proposals
        if (this.proposals) {
          this.proposals.forEach(proposal => {
            if (proposal.title.toLowerCase().includes(searchTerm) || 
                proposal.description.toLowerCase().includes(searchTerm)) {
              results.push({
                type: 'proposal',
                title: proposal.title,
                description: proposal.description.substring(0, 100) + '...',
                section: 'voting',
                params: { proposal: proposal.id }
              });
            }
          });
        }
        
        // Search content
        if (this.mockContentData) {
          this.mockContentData.forEach(content => {
            if (content.title.toLowerCase().includes(searchTerm)) {
              results.push({
                type: 'content',
                title: content.title,
                description: `By ${content.creator} • ${content.views} views`,
                section: 'content',
                params: { content: content.id }
              });
            }
          });
        }
        
        // Search achievements
        if (this.mockData?.achievements) {
          this.mockData.achievements.forEach(achievement => {
            if (achievement.title.toLowerCase().includes(searchTerm)) {
              results.push({
                type: 'achievement',
                title: achievement.title,
                description: achievement.description,
                section: 'achievements',
                params: { achievement: achievement.id }
              });
            }
          });
        }
        
        return results.slice(0, 10); // Limit to 10 results
      }
      
      displaySearchResults(results) {
        const container = document.getElementById('globalSearchResults');
        if (!container) return;
        
        if (results.length === 0) {
          container.innerHTML = `
            <div class="p-4 text-center text-gray-400">
              No results found. Try different keywords.
            </div>
          `;
          container.classList.remove('hidden');
          return;
        }
        
        const html = results.map((result, index) => {
          const typeIcons = {
            clan: 'users',
            proposal: 'vote',
            content: 'video',
            achievement: 'trophy'
          };
          
          return `
            <div class="search-result p-3 hover:bg-gray-700 cursor-pointer transition-colors border-b border-gray-700 last:border-b-0" 
                 data-section="${result.section}" 
                 data-params='${JSON.stringify(result.params || {})}'>
              <div class="flex items-start space-x-3">
                <i data-lucide="${typeIcons[result.type] || 'search'}" class="w-4 h-4 mt-1 text-xbox-green"></i>
                <div class="flex-1">
                  <div class="text-white font-medium">${result.title}</div>
                  <div class="text-gray-400 text-sm">${result.description}</div>
                  <div class="text-xs text-xbox-green mt-1 capitalize">${result.type}</div>
                </div>
              </div>
            </div>
          `;
        }).join('');
        
        container.innerHTML = html;
        container.classList.remove('hidden');
        
        // Add click handlers
        container.querySelectorAll('.search-result').forEach(result => {
          result.addEventListener('click', () => {
            const section = result.dataset.section;
            const params = JSON.parse(result.dataset.params || '{}');
            
            // Set deep link parameters
            Object.entries(params).forEach(([key, value]) => {
              this.router.deepLinkParams.set(key, value);
            });
            
            this.navigateToSection(section);
            this.hideGlobalSearch();
          });
        });
        
        // Re-initialize lucide icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }
      
      hideSearchResults() {
        const container = document.getElementById('globalSearchResults');
        if (container) {
          container.classList.add('hidden');
          container.innerHTML = '';
        }
      }
      
      executeFirstSearchResult() {
        const firstResult = document.querySelector('.search-result');
        if (firstResult) {
          firstResult.click();
        }
      }
      
      startPerformanceMonitoring() {
        // Show performance monitor in development
        if (window.location.hostname === 'localhost' || window.location.hostname.includes('127.0.0.1')) {
          const monitor = document.getElementById('performanceMonitor');
          if (monitor) {
            monitor.classList.remove('hidden');
          }
        }
        
        // Monitor performance metrics
        setInterval(() => {
          this.updatePerformanceMetrics();
        }, 1000);
        
        // Listen for navigation events
        document.addEventListener('sectionNavigated', (e) => {
          this.updatePerformanceDisplay(e.detail);
        });
      }
      
      updatePerformanceMetrics() {
        // Update memory usage tracking
        if (performance.memory) {
          this.performanceMonitor.memoryUsage.push({
            used: performance.memory.usedJSHeapSize,
            total: performance.memory.totalJSHeapSize,
            timestamp: Date.now()
          });
          
          // Keep only last 60 seconds
          const oneMinuteAgo = Date.now() - 60000;
          this.performanceMonitor.memoryUsage = this.performanceMonitor.memoryUsage.filter(
            entry => entry.timestamp > oneMinuteAgo
          );
        }
      }
      
      updatePerformanceDisplay(navDetail) {
        const renderTimeEl = document.getElementById('renderTime');
        const cacheHitsEl = document.getElementById('cacheHits');
        const cacheMissesEl = document.getElementById('cacheMisses');
        
        if (renderTimeEl && navDetail.renderTime) {
          renderTimeEl.textContent = Math.round(navDetail.renderTime);
        }
        
        if (cacheHitsEl) {
          cacheHitsEl.textContent = this.performanceMonitor.cacheHits;
        }
        
        if (cacheMissesEl) {
          cacheMissesEl.textContent = this.performanceMonitor.cacheMisses;
        }
        
        // Update mobile performance indicator
        const mobileIndicator = document.getElementById('mobilePerformanceIndicator');
        if (mobileIndicator) {
          const avgRenderTime = Array.from(this.performanceMonitor.renderTimes.values())
            .reduce((a, b) => a + b, 0) / this.performanceMonitor.renderTimes.size;
          
          if (avgRenderTime < 100) {
            mobileIndicator.textContent = 'Excellent';
            mobileIndicator.className = 'text-green-400';
          } else if (avgRenderTime < 300) {
            mobileIndicator.textContent = 'Good';
            mobileIndicator.className = 'text-xbox-green';
          } else {
            mobileIndicator.textContent = 'Slow';
            mobileIndicator.className = 'text-red-400';
          }
        }
      }
      
      initializeMobileEnhancements() {
        // Add touch gesture support
        this.initializeTouchGestures();
        
        // Enhanced mobile menu animations
        this.setupMobileMenuAnimations();
        
        // Mobile-specific optimizations
        this.optimizeForMobile();
      }
      
      initializeTouchGestures() {
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;
        
        const main = document.querySelector('main');
        if (!main) return;
        
        main.addEventListener('touchstart', (e) => {
          touchStartX = e.changedTouches[0].screenX;
          touchStartY = e.changedTouches[0].screenY;
        }, { passive: true });
        
        main.addEventListener('touchend', (e) => {
          touchEndX = e.changedTouches[0].screenX;
          touchEndY = e.changedTouches[0].screenY;
          
          this.handleSwipeGesture(touchStartX, touchStartY, touchEndX, touchEndY);
        }, { passive: true });
      }
      
      handleSwipeGesture(startX, startY, endX, endY) {
        const diffX = endX - startX;
        const diffY = endY - startY;
        const minSwipeDistance = 50;
        
        // Only handle horizontal swipes that are more horizontal than vertical
        if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > minSwipeDistance) {
          if (diffX > 0) {
            // Swipe right - go back
            this.navigateBack();
          } else {
            // Swipe left - open mobile menu
            this.toggleMobileMenu();
          }
        }
      }
      
      setupMobileMenuAnimations() {
        const mobileMenu = document.getElementById('mobileMenu');
        const hamburgerIcon = document.querySelector('.hamburger-icon');
        
        if (mobileMenu) {
          // Add CSS transitions for smooth animations
          mobileMenu.style.transition = 'transform 0.3s ease-in-out';
        }
        
        if (hamburgerIcon) {
          // Animate hamburger icon
          const lines = hamburgerIcon.querySelectorAll('.hamburger-line');
          lines.forEach(line => {
            line.style.transition = 'all 0.3s ease';
          });
        }
      }
      
      optimizeForMobile() {
        // Add viewport meta tag if not present
        if (!document.querySelector('meta[name="viewport"]')) {
          const meta = document.createElement('meta');
          meta.name = 'viewport';
          meta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
          document.head.appendChild(meta);
        }
        
        // Optimize touch targets
        const buttons = document.querySelectorAll('button, a[data-section]');
        buttons.forEach(button => {
          if (button.offsetHeight < 44) {
            button.style.minHeight = '44px';
          }
        });
      }
      
      initializeCrossSectionIntegration() {
        // Set up contextual navigation between sections
        this.setupContextualNavigation();
        
        // Initialize notification system
        this.initializeNotificationSystem();
        
        // Set up unified search indexing
        this.initializeUnifiedSearch();
      }
      
      setupContextualNavigation() {
        // Add contextual links between related features
        document.addEventListener('click', (e) => {
          const contextualLink = e.target.closest('[data-contextual-nav]');
          if (contextualLink) {
            const target = contextualLink.dataset.contextualNav;
            const params = JSON.parse(contextualLink.dataset.params || '{}');
            
            Object.entries(params).forEach(([key, value]) => {
              this.router.deepLinkParams.set(key, value);
            });
            
            this.navigateToSection(target);
          }
        });
      }
      
      initializeNotificationSystem() {
        // Cross-section notifications
        this.notificationQueue = [];
        
        // Listen for section-specific events that should trigger notifications
        document.addEventListener('voteSubmitted', (e) => {
          this.addNotification({
            type: 'success',
            message: 'Vote submitted successfully!',
            action: { section: 'voting', label: 'View Results' }
          });
        });
        
        document.addEventListener('clanJoined', (e) => {
          this.addNotification({
            type: 'success',
            message: 'Successfully joined clan!',
            action: { section: 'clans', label: 'View Clan' }
          });
        });
        
        document.addEventListener('contentUploaded', (e) => {
          this.addNotification({
            type: 'success',
            message: 'Content uploaded successfully!',
            action: { section: 'content', label: 'View Content' }
          });
        });
      }
      
      addNotification(notification) {
        this.notificationQueue.push({
          ...notification,
          id: Date.now(),
          timestamp: Date.now()
        });
        
        this.displayNotifications();
      }
      
      displayNotifications() {
        const container = document.getElementById('notificationContainer');
        if (!container) return;
        
        // Clear existing notifications
        container.innerHTML = '';
        
        // Display recent notifications
        this.notificationQueue.slice(-3).forEach(notification => {
          const notificationEl = document.createElement('div');
          notificationEl.className = `notification-item p-4 rounded-lg shadow-lg max-w-sm transform transition-all duration-300 ${
            notification.type === 'success' ? 'bg-green-600' :
            notification.type === 'error' ? 'bg-red-600' :
            notification.type === 'warning' ? 'bg-yellow-600' :
            'bg-blue-600'
          }`;
          
          notificationEl.innerHTML = `
            <div class="flex items-start justify-between">
              <div class="flex-1">
                <div class="text-white font-medium">${notification.message}</div>
                ${notification.action ? `
                  <button class="text-xs text-gray-200 hover:text-white mt-2 underline" 
                          onclick="app.navigateToSection('${notification.action.section}'); this.parentNode.parentNode.parentNode.remove();">
                    ${notification.action.label}
                  </button>
                ` : ''}
              </div>
              <button onclick="this.parentNode.parentNode.remove()" 
                      class="text-white hover:text-gray-300 ml-4">
                <i data-lucide="x" class="w-4 h-4"></i>
              </button>
            </div>
          `;
          
          container.appendChild(notificationEl);
          
          // Auto-remove after 5 seconds
          setTimeout(() => {
            if (notificationEl.parentNode) {
              notificationEl.style.transform = 'translateX(100%)';
              setTimeout(() => {
                if (notificationEl.parentNode) {
                  notificationEl.remove();
                }
              }, 300);
            }
          }, 5000);
        });
        
        // Re-initialize lucide icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }
      
      initializeUnifiedSearch() {
        // Build search index for all content
        this.searchIndex = {
          clans: [],
          proposals: [],
          content: [],
          achievements: [],
          users: []
        };
        
        this.updateSearchIndex();
      }
      
      updateSearchIndex() {
        // This would normally connect to a search service
        // For now, we'll use the existing mock data
        
        if (this.mockData?.clans) {
          this.searchIndex.clans = this.mockData.clans.map(clan => ({
            id: clan.id,
            title: clan.name,
            keywords: [clan.name, clan.description, clan.tier].join(' ').toLowerCase()
          }));
        }
        
        if (this.proposals) {
          this.searchIndex.proposals = this.proposals.map(proposal => ({
            id: proposal.id,
            title: proposal.title,
            keywords: [proposal.title, proposal.description].join(' ').toLowerCase()
          }));
        }
        
        if (this.mockContentData) {
          this.searchIndex.content = this.mockContentData.map(content => ({
            id: content.id,
            title: content.title,
            keywords: [content.title, content.creator, content.description || ''].join(' ').toLowerCase()
          }));
        }
      }

      // Mock API Server for Video Upload - Sub-task 6.8
      async setupMockVideoAPI() {
        // Mock fetch for video upload API
        const originalFetch = window.fetch;
        
        window.fetch = async (url, options) => {
          // Intercept video upload API calls
          if (url === '/api/content/upload' || url.includes('/api/content/upload')) {
            return this.handleMockVideoUpload(options);
          }
          
          // Intercept video metadata API calls
          if (url.includes('/api/video/metadata')) {
            return this.handleMockVideoMetadata(url, options);
          }
          
          // Fall back to original fetch for other requests
          return originalFetch(url, options);
        };
      }

      async handleMockVideoUpload(options) {
        // Simulate processing delay
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        const formData = options.body;
        const uploadId = options.headers?.['X-Upload-Id'] || `upload_${Date.now()}`;
        
        // Mock successful upload response
        const mockResponse = {
          success: true,
          uploadId: uploadId,
          files: {
            original: {
              url: `https://cdn.mlg.clan/uploads/${uploadId}/original.mp4`,
              size: 50 * 1024 * 1024, // 50MB
              duration: 180 // 3 minutes
            },
            transcoded: {
              url: `https://cdn.mlg.clan/uploads/${uploadId}/720p.mp4`,
              size: 30 * 1024 * 1024, // 30MB
              quality: '720p',
              codec: 'h264'
            },
            thumbnails: [
              `https://cdn.mlg.clan/uploads/${uploadId}/thumb_1.jpg`,
              `https://cdn.mlg.clan/uploads/${uploadId}/thumb_2.jpg`,
              `https://cdn.mlg.clan/uploads/${uploadId}/thumb_3.jpg`
            ]
          },
          metadata: {
            title: 'Uploaded Video',
            duration: 180,
            width: 1280,
            height: 720,
            fileSize: 50 * 1024 * 1024
          },
          mlgReward: 5, // 5 MLG tokens for upload
          timestamp: Date.now()
        };

        return new Response(JSON.stringify(mockResponse), {
          status: 200,
          headers: {
            'Content-Type': 'application/json'
          }
        });
      }

      async handleMockVideoMetadata(url, options) {
        // Extract video ID from URL
        const videoId = url.split('/').pop();
        
        // Simulate processing delay
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        // Mock metadata response based on platform
        const mockMetadata = {
          id: videoId,
          title: 'Sample Gaming Video',
          description: 'Epic gaming moment showcase',
          duration: 240,
          views: Math.floor(Math.random() * 100000),
          likes: Math.floor(Math.random() * 10000),
          author: 'ProGamer123',
          thumbnail: `https://img.example.com/${videoId}/hqdefault.jpg`,
          platform: this.detectPlatformFromId(videoId),
          publishedAt: new Date(Date.now() - Math.random() * 86400000 * 30), // Random within last 30 days
          tags: ['gaming', 'highlight', 'epic', 'mlg']
        };

        return new Response(JSON.stringify(mockMetadata), {
          status: 200,
          headers: {
            'Content-Type': 'application/json'
          }
        });
      }

      detectPlatformFromId(videoId) {
        if (videoId.length === 11) return 'youtube';
        if (videoId.includes('-')) return 'twitch';
        if (/^\d+$/.test(videoId)) return 'vimeo';
        return 'unknown';
      }
    }

    // Initialize the application when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      const app = new MLGPlatformApp();
      window.mlgApp = app; // Make available globally for debugging
      window.app = app; // Make available for content moderation actions
      
      // Initialize router after app creation
      app.initializeRouter();
      
      // Set up enhanced features
      app.initializeKeyboardShortcuts();
      app.initializeGlobalSearch();
      app.startPerformanceMonitoring();
      
      // Enhanced mobile menu setup
      app.initializeMobileEnhancements();
      
      // Set up cross-section integration
      app.initializeCrossSectionIntegration();
      
      // Initialize mock video API - Sub-task 6.8
      app.setupMockVideoAPI();
      
      // Expose wallet testing methods globally
      window.testWallet = () => app.testWalletIntegration();
      window.validateWallet = () => app.validateWalletSetup();
      
      console.log('🎮 MLG.clan Platform with Real Phantom Wallet Integration Loaded!');
      console.log('💡 Debug Commands:');
      console.log('  - testWallet() - Run comprehensive wallet integration tests');
      console.log('  - validateWallet() - Quick validation of wallet setup');
      console.log('  - testRealtime() - Trigger demo real-time events');
      console.log('  - mlgTester.runAllTests() - Run comprehensive integration tests');
      console.log('  - app - Access the main application instance');
      
      // Add global function to test real-time features
      window.testRealtime = () => {
        console.log('Testing real-time features...');
        
        // Simulate different types of real-time events
        setTimeout(() => {
          app.handleVoteUpdate({
            proposalId: 'test_prop_001',
            proposalTitle: 'Increase Community Rewards',
            voteType: 'for',
            voterAddress: '0xTest123',
            votingPower: 500,
            totalVotes: 2500,
            timestamp: Date.now()
          });
        }, 1000);
        
        setTimeout(() => {
          app.handleClanActivity({
            clanId: 'mlg-elite-001',
            activity: 'member_joined',
            memberName: 'TestGamer2024',
            details: 'joined the clan',
            timestamp: Date.now()
          });
        }, 2000);
        
        setTimeout(() => {
          app.handleAchievementUnlock({
            userId: 'test_user',
            achievementId: 'test_achievement',
            achievementName: 'Real-time Tester',
            achievementIcon: '🧪',
            rewardAmount: 100,
            timestamp: Date.now()
          });
        }, 3000);
        
        setTimeout(() => {
          app.handleSystemNotification({
            title: 'Platform Update',
            message: 'Real-time features are now active!',
            priority: 'high',
            timestamp: Date.now()
          });
        }, 4000);
        
        console.log('Real-time test events queued!');
      };
    });

    // Handle service worker registration for PWA features
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => console.log('SW registered'))
          .catch(error => console.log('SW registration failed'));
      });
    }
  </script>

  <!-- Clan Management React Component -->
  <script type="text/babel">
    const { useState, useEffect, useCallback, useMemo } = React;

    // Mock clan data for demonstration (in production, this would come from blockchain)
    const mockClanData = {
      id: 'mlg-elite-001',
      name: 'MLG Elite Champions',
      description: 'Premier MLG gaming clan focused on competitive play and token governance.',
      tier: 'gold',
      memberCount: 45,
      maxMembers: 100,
      stakingAmount: 1000,
      foundedDate: '2024-01-15',
      bannerImage: '/assets/clan-banner.jpg',
      emblemImage: '/assets/clan-emblem.png',
      tags: ['competitive', 'fps', 'moba', 'esports'],
      rules: [
        'Respect all clan members and maintain sportsmanship',
        'Participate actively in clan events and competitions',
        'Follow MLG token staking requirements for voting',
        'No toxic behavior or harassment tolerated'
      ],
      achievements: [
        { id: '001', name: 'Tournament Champions', description: 'Won 5 major tournaments', icon: '🏆' },
        { id: '002', name: 'Community Builder', description: 'Reached 100 members', icon: '👥' },
        { id: '003', name: 'Token Whale', description: 'Staked over 5000 MLG tokens', icon: '💎' }
      ],
      statistics: {
        totalMatches: 1247,
        winRate: 78.5,
        avgScore: 2845,
        totalMLGEarned: 12450,
        governanceParticipation: 89.2
      }
    };

    const mockMembers = [
      { id: '001', gamertag: 'xXEliteLeaderXx', role: 'owner', joinDate: '2024-01-15', status: 'online', contribution: 95, mlgStaked: 2500 },
      { id: '002', gamertag: 'ProGamer_2024', role: 'admin', joinDate: '2024-01-20', status: 'online', contribution: 88, mlgStaked: 1800 },
      { id: '003', gamertag: 'ClutchMaster', role: 'moderator', joinDate: '2024-02-01', status: 'idle', contribution: 92, mlgStaked: 1200 },
      { id: '004', gamertag: 'SniperElite99', role: 'officer', joinDate: '2024-02-10', status: 'online', contribution: 85, mlgStaked: 800 },
      { id: '005', gamertag: 'TacticalNinja', role: 'member', joinDate: '2024-02-15', status: 'offline', contribution: 76, mlgStaked: 400 },
      { id: '006', gamertag: 'RankUpKing', role: 'member', joinDate: '2024-03-01', status: 'online', contribution: 82, mlgStaked: 600 }
    ];

    const CLAN_NAVIGATION = {
      OVERVIEW: { id: 'overview', name: 'Overview', icon: '🏠' },
      MEMBERS: { id: 'members', name: 'Members', icon: '👥' },
      LEADERBOARD: { id: 'leaderboard', name: 'Leaderboard', icon: '🏆' },
      GOVERNANCE: { id: 'governance', name: 'Governance', icon: '🗳️' },
      ACHIEVEMENTS: { id: 'achievements', name: 'Achievements', icon: '🎖️' },
      SETTINGS: { id: 'settings', name: 'Settings', icon: '⚙️' }
    };

    // Main Clan Management Component
    const ClanManagementInterface = () => {
      const [activeTab, setActiveTab] = useState(CLAN_NAVIGATION.OVERVIEW.id);
      const [loading, setLoading] = useState(false);
      const [searchQuery, setSearchQuery] = useState('');
      const [sortBy, setSortBy] = useState('gamertag');

      // Filter members based on search query
      const filteredMembers = useMemo(() => {
        return mockMembers.filter(member =>
          member.gamertag.toLowerCase().includes(searchQuery.toLowerCase()) ||
          member.role.toLowerCase().includes(searchQuery.toLowerCase())
        ).sort((a, b) => {
          switch (sortBy) {
            case 'gamertag':
              return a.gamertag.localeCompare(b.gamertag);
            case 'role':
              return a.role.localeCompare(b.role);
            case 'contribution':
              return b.contribution - a.contribution;
            case 'mlgStaked':
              return b.mlgStaked - a.mlgStaked;
            default:
              return 0;
          }
        });
      }, [searchQuery, sortBy]);

      const getRoleColor = (role) => {
        const colors = {
          owner: 'text-yellow-400 bg-yellow-400/10',
          admin: 'text-red-400 bg-red-400/10',
          moderator: 'text-blue-400 bg-blue-400/10',
          officer: 'text-green-400 bg-green-400/10',
          member: 'text-gray-400 bg-gray-400/10',
          recruit: 'text-purple-400 bg-purple-400/10'
        };
        return colors[role] || colors.member;
      };

      const getStatusColor = (status) => {
        const colors = {
          online: 'text-green-400',
          idle: 'text-yellow-400',
          offline: 'text-gray-400'
        };
        return colors[status] || colors.offline;
      };

      const getTierBadge = (tier) => {
        const tiers = {
          bronze: { name: 'Bronze', color: 'text-orange-400 bg-orange-400/10', icon: '🥉' },
          silver: { name: 'Silver', color: 'text-gray-300 bg-gray-300/10', icon: '🥈' },
          gold: { name: 'Gold', color: 'text-yellow-400 bg-yellow-400/10', icon: '🥇' },
          diamond: { name: 'Diamond', color: 'text-cyan-400 bg-cyan-400/10', icon: '💎' }
        };
        return tiers[tier] || tiers.bronze;
      };

      const renderNavigation = () => (
        <div className="xbox-blade p-4 rounded-xl">
          <div className="flex items-center mb-6 pb-4 border-b border-gray-700">
            <div className="w-12 h-12 bg-gradient-to-br from-xbox-green to-gaming-accent rounded-full flex items-center justify-center text-2xl mr-4">
              🎮
            </div>
            <div>
              <h3 className="text-lg font-bold text-xbox-green">{mockClanData.name}</h3>
              <div className="flex items-center space-x-2">
                <span className={`px-2 py-1 rounded text-xs font-semibold ${getTierBadge(mockClanData.tier).color}`}>
                  {getTierBadge(mockClanData.tier).icon} {getTierBadge(mockClanData.tier).name}
                </span>
              </div>
            </div>
          </div>
          
          <nav className="space-y-2">
            {Object.values(CLAN_NAVIGATION).map((tab) => (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className={`w-full p-3 text-left flex items-center rounded-lg transition-all duration-200 ${
                  activeTab === tab.id
                    ? 'bg-xbox-green bg-opacity-20 text-xbox-green border border-xbox-green border-opacity-30'
                    : 'text-gray-300 hover:bg-gaming-surface hover:text-xbox-green'
                }`}
              >
                <span className="mr-3 text-lg">{tab.icon}</span>
                {tab.name}
              </button>
            ))}
          </nav>
        </div>
      );

      const renderOverview = () => (
        <div className="space-y-6">
          {/* Clan Stats Grid */}
          <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
            <div className="gaming-tile p-4 rounded-xl text-center">
              <div className="text-2xl text-xbox-green mb-2">👥</div>
              <div className="text-2xl font-bold">{mockClanData.memberCount}</div>
              <div className="text-sm text-gray-400">Members</div>
            </div>
            <div className="gaming-tile p-4 rounded-xl text-center">
              <div className="text-2xl text-achievement-gold mb-2">🏆</div>
              <div className="text-2xl font-bold">#{Math.floor(Math.random() * 50) + 1}</div>
              <div className="text-sm text-gray-400">Global Rank</div>
            </div>
            <div className="gaming-tile p-4 rounded-xl text-center">
              <div className="text-2xl text-gaming-accent mb-2">💰</div>
              <div className="text-2xl font-bold">{mockClanData.stakingAmount.toLocaleString()}</div>
              <div className="text-sm text-gray-400">MLG Staked</div>
            </div>
            <div className="gaming-tile p-4 rounded-xl text-center">
              <div className="text-2xl text-vault-purple mb-2">📊</div>
              <div className="text-2xl font-bold">{mockClanData.statistics.winRate}%</div>
              <div className="text-sm text-gray-400">Win Rate</div>
            </div>
          </div>

          {/* Recent Activity */}
          <div className="xbox-blade p-6 rounded-xl">
            <h3 className="text-xl font-bold text-xbox-green mb-4">📈 Recent Activity</h3>
            <div className="space-y-3">
              {[
                { icon: '🎯', text: 'ProGamer_2024 achieved a new personal best score', time: '5 minutes ago' },
                { icon: '👥', text: 'New member TacticalNinja joined the clan', time: '1 hour ago' },
                { icon: '🗳️', text: 'Governance proposal #005 passed with 89% approval', time: '3 hours ago' },
                { icon: '🏆', text: 'Clan ranked up to #12 in the global leaderboard', time: '1 day ago' }
              ].map((activity, index) => (
                <div key={index} className="flex items-start space-x-3 p-3 bg-gaming-surface rounded-lg">
                  <span className="text-xl">{activity.icon}</span>
                  <div className="flex-1">
                    <div className="text-gray-200">{activity.text}</div>
                    <div className="text-xs text-gray-400">{activity.time}</div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      );

      const renderMembers = () => (
        <div className="space-y-6">
          {/* Search and Filter Controls */}
          <div className="flex flex-col md:flex-row gap-4">
            <div className="flex-1">
              <input
                type="text"
                placeholder="Search members..."
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                className="w-full p-3 bg-gaming-surface border border-xbox-green border-opacity-30 rounded-lg text-white placeholder-gray-400 focus:border-xbox-green focus:outline-none transition-colors"
              />
            </div>
            <select
              value={sortBy}
              onChange={(e) => setSortBy(e.target.value)}
              className="p-3 bg-gaming-surface border border-xbox-green border-opacity-30 rounded-lg text-white focus:border-xbox-green focus:outline-none transition-colors"
            >
              <option value="gamertag">Sort by Gamertag</option>
              <option value="role">Sort by Role</option>
              <option value="contribution">Sort by Contribution</option>
              <option value="mlgStaked">Sort by MLG Staked</option>
            </select>
          </div>

          {/* Members List */}
          <div className="xbox-blade rounded-xl overflow-hidden">
            <div className="p-4 border-b border-gray-700">
              <h3 className="text-xl font-bold text-xbox-green">👥 Clan Members ({filteredMembers.length})</h3>
            </div>
            <div className="divide-y divide-gray-700">
              {filteredMembers.map((member) => (
                <div key={member.id} className="p-4 hover:bg-gaming-surface transition-colors">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-4">
                      <div className="w-12 h-12 bg-gradient-to-br from-xbox-green to-gaming-accent rounded-full flex items-center justify-center">
                        <span className="text-white font-bold">{member.gamertag.charAt(0)}</span>
                      </div>
                      <div>
                        <div className="font-semibold text-white">{member.gamertag}</div>
                        <div className="flex items-center space-x-2 text-sm">
                          <span className={`px-2 py-1 rounded ${getRoleColor(member.role)}`}>
                            {member.role.charAt(0).toUpperCase() + member.role.slice(1)}
                          </span>
                          <span className={`${getStatusColor(member.status)}`}>
                            ● {member.status}
                          </span>
                        </div>
                      </div>
                    </div>
                    <div className="text-right text-sm">
                      <div className="text-white font-semibold">{member.mlgStaked.toLocaleString()} MLG</div>
                      <div className="text-gray-400">Contribution: {member.contribution}%</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      );

      const renderLeaderboard = () => {
        const mockLeaderboardData = [
          { rank: 1, name: 'MLG Elite Champions', tier: 'diamond', score: 98450, members: 45, change: '+2' },
          { rank: 2, name: 'Apex Legends', tier: 'gold', score: 87230, members: 38, change: '-1' },
          { rank: 3, name: 'Gaming Titans', tier: 'gold', score: 82100, members: 42, change: '+1' },
          { rank: 4, name: 'Pro Gamers United', tier: 'silver', score: 78900, members: 29, change: '0' },
          { rank: 5, name: 'Elite Squad', tier: 'silver', score: 74520, members: 33, change: '+3' }
        ];

        const categories = [
          { id: 'overall', name: 'Overall Power', icon: '⚡' },
          { id: 'content', name: 'Content Curation', icon: '📹' },
          { id: 'governance', name: 'Governance', icon: '🗳️' },
          { id: 'community', name: 'Community', icon: '👥' },
          { id: 'tokens', name: 'Token Economics', icon: '💰' }
        ];

        return (
          <div className="space-y-6">
            {/* Category Tabs */}
            <div className="xbox-blade p-4 rounded-xl">
              <div className="flex flex-wrap gap-2">
                {categories.map((category) => (
                  <button
                    key={category.id}
                    className="px-4 py-2 bg-gaming-surface hover:bg-xbox-green hover:bg-opacity-20 rounded-lg transition-colors text-sm flex items-center space-x-2 border border-xbox-green border-opacity-30 hover:border-xbox-green"
                  >
                    <span>{category.icon}</span>
                    <span>{category.name}</span>
                  </button>
                ))}
              </div>
            </div>

            {/* Current Clan Position */}
            <div className="gaming-tile p-6 rounded-xl border border-xbox-green border-opacity-50">
              <h3 className="text-xl font-bold text-xbox-green mb-4">🎖️ Your Clan Position</h3>
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div className="text-center">
                  <div className="text-2xl font-bold text-yellow-400">#1</div>
                  <div className="text-sm text-gray-400">Global Rank</div>
                </div>
                <div className="text-center">
                  <div className="text-2xl font-bold text-green-400">98,450</div>
                  <div className="text-sm text-gray-400">Total Score</div>
                </div>
                <div className="text-center">
                  <div className="text-2xl font-bold text-blue-400">+2</div>
                  <div className="text-sm text-gray-400">Rank Change</div>
                </div>
                <div className="text-center">
                  <div className="text-2xl font-bold text-purple-400">💎</div>
                  <div className="text-sm text-gray-400">Diamond Tier</div>
                </div>
              </div>
            </div>

            {/* Leaderboard Table */}
            <div className="xbox-blade rounded-xl overflow-hidden">
              <div className="p-4 border-b border-gray-700">
                <h3 className="text-xl font-bold text-xbox-green">🏆 Global Clan Rankings - Overall Power</h3>
              </div>
              
              <div className="overflow-x-auto">
                <table className="w-full">
                  <thead className="bg-gaming-surface">
                    <tr>
                      <th className="px-4 py-3 text-left text-sm font-semibold text-gray-300">Rank</th>
                      <th className="px-4 py-3 text-left text-sm font-semibold text-gray-300">Clan</th>
                      <th className="px-4 py-3 text-left text-sm font-semibold text-gray-300">Tier</th>
                      <th className="px-4 py-3 text-left text-sm font-semibold text-gray-300">Score</th>
                      <th className="px-4 py-3 text-left text-sm font-semibold text-gray-300">Members</th>
                      <th className="px-4 py-3 text-left text-sm font-semibold text-gray-300">Change</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-700">
                    {mockLeaderboardData.map((clan) => (
                      <tr key={clan.rank} className={`hover:bg-gaming-surface transition-colors ${clan.rank === 1 ? 'bg-xbox-green bg-opacity-10' : ''}`}>
                        <td className="px-4 py-4">
                          <div className="flex items-center space-x-2">
                            <span className={`text-lg font-bold ${clan.rank <= 3 ? 'text-achievement-gold' : 'text-gray-400'}`}>
                              #{clan.rank}
                            </span>
                            {clan.rank === 1 && <span className="text-achievement-gold">👑</span>}
                          </div>
                        </td>
                        <td className="px-4 py-4">
                          <div className="flex items-center space-x-3">
                            <div className="w-8 h-8 bg-gradient-to-br from-xbox-green to-gaming-accent rounded-full flex items-center justify-center text-sm font-bold">
                              {clan.name.charAt(0)}
                            </div>
                            <div className={`font-semibold ${clan.rank === 1 ? 'text-xbox-green' : 'text-white'}`}>
                              {clan.name}
                            </div>
                          </div>
                        </td>
                        <td className="px-4 py-4">
                          <span className={`px-2 py-1 rounded text-xs font-semibold ${getTierBadge(clan.tier).color}`}>
                            {getTierBadge(clan.tier).icon} {getTierBadge(clan.tier).name}
                          </span>
                        </td>
                        <td className="px-4 py-4">
                          <span className="font-semibold text-white">{clan.score.toLocaleString()}</span>
                        </td>
                        <td className="px-4 py-4">
                          <span className="text-gray-300">{clan.members}</span>
                        </td>
                        <td className="px-4 py-4">
                          <span className={`font-semibold ${
                            clan.change.startsWith('+') ? 'text-green-400' : 
                            clan.change.startsWith('-') ? 'text-red-400' : 'text-gray-400'
                          }`}>
                            {clan.change}
                          </span>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>

            {/* Performance Insights */}
            <div className="grid md:grid-cols-2 gap-6">
              <div className="xbox-blade p-6 rounded-xl">
                <h4 className="text-lg font-bold text-xbox-green mb-4">📊 Performance Insights</h4>
                <div className="space-y-3">
                  <div className="flex justify-between items-center">
                    <span className="text-gray-300">Voting Activity</span>
                    <div className="flex items-center space-x-2">
                      <div className="w-16 h-2 bg-gaming-bg rounded-full">
                        <div className="w-14 h-2 bg-xbox-green rounded-full"></div>
                      </div>
                      <span className="text-sm text-xbox-green">87%</span>
                    </div>
                  </div>
                  <div className="flex justify-between items-center">
                    <span className="text-gray-300">Token Burns</span>
                    <div className="flex items-center space-x-2">
                      <div className="w-16 h-2 bg-gaming-bg rounded-full">
                        <div className="w-12 h-2 bg-gaming-accent rounded-full"></div>
                      </div>
                      <span className="text-sm text-gaming-accent">75%</span>
                    </div>
                  </div>
                  <div className="flex justify-between items-center">
                    <span className="text-gray-300">Governance</span>
                    <div className="flex items-center space-x-2">
                      <div className="w-16 h-2 bg-gaming-bg rounded-full">
                        <div className="w-15 h-2 bg-vault-purple rounded-full"></div>
                      </div>
                      <span className="text-sm text-vault-purple">92%</span>
                    </div>
                  </div>
                </div>
              </div>

              <div className="xbox-blade p-6 rounded-xl">
                <h4 className="text-lg font-bold text-xbox-green mb-4">🎯 Next Milestones</h4>
                <div className="space-y-3">
                  <div className="flex items-center space-x-3 p-3 bg-gaming-surface rounded-lg">
                    <span className="text-xl">🥇</span>
                    <div>
                      <div className="text-white font-semibold">Maintain #1 Position</div>
                      <div className="text-xs text-gray-400">Stay ahead by 5,000+ points</div>
                    </div>
                  </div>
                  <div className="flex items-center space-x-3 p-3 bg-gaming-surface rounded-lg">
                    <span className="text-xl">🔥</span>
                    <div>
                      <div className="text-white font-semibold">100K Score Milestone</div>
                      <div className="text-xs text-gray-400">1,550 points remaining</div>
                    </div>
                  </div>
                  <div className="flex items-center space-x-3 p-3 bg-gaming-surface rounded-lg">
                    <span className="text-xl">👥</span>
                    <div>
                      <div className="text-white font-semibold">50 Member Goal</div>
                      <div className="text-xs text-gray-400">5 more members needed</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const renderGovernance = () => (
        <div className="bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-green-500/30">
          <h3 className="text-xl font-bold text-green-400 mb-4">🗳️ Clan Governance</h3>
          <div className="text-center py-8">
            <div className="text-4xl mb-4">⚖️</div>
            <div className="text-lg text-gray-300 mb-2">DAO Governance System</div>
            <div className="text-sm text-gray-400 mb-4">
              This would integrate with the clan voting system from clan-voting.js
            </div>
            <button className="bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
              Create Proposal
            </button>
          </div>
        </div>
      );

      const renderAchievements = () => (
        <div className="space-y-6">
          <div className="bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-green-500/30">
            <h3 className="text-xl font-bold text-green-400 mb-4">🎖️ Clan Achievements</h3>
            <div className="grid md:grid-cols-2 gap-4">
              {mockClanData.achievements.map((achievement) => (
                <div key={achievement.id} className="p-4 bg-gray-700/30 rounded-lg border border-green-500/20">
                  <div className="flex items-center space-x-3">
                    <span className="text-2xl">{achievement.icon}</span>
                    <div>
                      <div className="font-semibold text-white">{achievement.name}</div>
                      <div className="text-sm text-gray-400">{achievement.description}</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      );

      const renderSettings = () => (
        <div className="bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-green-500/30">
          <h3 className="text-xl font-bold text-green-400 mb-4">⚙️ Clan Settings</h3>
          <div className="text-center py-8">
            <div className="text-4xl mb-4">🔧</div>
            <div className="text-lg text-gray-300 mb-2">Clan Configuration</div>
            <div className="text-sm text-gray-400 mb-4">
              Manage clan settings, roles, and permissions
            </div>
            <button className="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
              Open Settings
            </button>
          </div>
        </div>
      );

      return (
        <div className="min-h-screen text-white">
          <div className="grid lg:grid-cols-4 gap-6">
            {/* Navigation Sidebar */}
            <div className="lg:col-span-1">
              {renderNavigation()}
            </div>

            {/* Main Content */}
            <div className="lg:col-span-3">
              {activeTab === CLAN_NAVIGATION.OVERVIEW.id && renderOverview()}
              {activeTab === CLAN_NAVIGATION.MEMBERS.id && renderMembers()}
              {activeTab === CLAN_NAVIGATION.LEADERBOARD.id && renderLeaderboard()}
              {activeTab === CLAN_NAVIGATION.GOVERNANCE.id && renderGovernance()}
              {activeTab === CLAN_NAVIGATION.ACHIEVEMENTS.id && renderAchievements()}
              {activeTab === CLAN_NAVIGATION.SETTINGS.id && renderSettings()}
            </div>
          </div>

          {loading && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
              <div className="bg-gray-800 p-6 rounded-xl text-center">
                <div className="animate-spin text-4xl mb-4">⚙️</div>
                <div className="text-white">Processing...</div>
              </div>
            </div>
          )}
        </div>
      );
    };

    // Initialize Clan Management when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      // Wait a bit to ensure all dependencies are loaded
      setTimeout(() => {
        const clanRoot = document.getElementById('clan-management-root');
        if (clanRoot && typeof ReactDOM !== 'undefined') {
          ReactDOM.render(React.createElement(ClanManagementInterface), clanRoot);
        }
      }, 1000);
    });

    // Also initialize when clans section becomes active
    document.addEventListener('click', (e) => {
      if (e.target.dataset.section === 'clans' || e.target.closest('[data-section="clans"]')) {
        setTimeout(() => {
          const clanRoot = document.getElementById('clan-management-root');
          if (clanRoot && typeof ReactDOM !== 'undefined') {
            ReactDOM.render(React.createElement(ClanManagementInterface), clanRoot);
          }
        }, 100);
      }
    });
  </script>

  <!-- Integration Test Suite Injector -->
  <script src="platform-test-injector.js"></script>
  
  <!-- Accessibility Enhancement Patch -->
  <script src="accessibility-patch.js"></script>
</body>
</html>