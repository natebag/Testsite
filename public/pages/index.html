<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MLG.clan - Complete Gaming Platform</title>
  
  <!-- Meta Tags -->
  <meta name="description" content="MLG.clan - Complete gaming platform with Web3 integration, clan management, DAO governance, and real-time features">
  <meta name="keywords" content="gaming, esports, clan, DAO, blockchain, MLG, Solana, Phantom wallet, tournaments">
  <meta name="author" content="MLG.clan Development Team">
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://unpkg.com https://cdn.socket.io; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; img-src 'self' data: blob: https:; connect-src 'self' wss: https: ws://localhost:3000; frame-src 'self' https://www.youtube.com https://player.twitch.tv https://www.tiktok.com; font-src 'self' data:;">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎮</text></svg>">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="../manifest.json">
  <meta name="theme-color" content="#00ff88">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="MLG.clan">
  <meta name="msapplication-TileColor" content="#00ff88">
  <meta name="msapplication-config" content="../browserconfig.xml">
  
  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="../assets/icons/icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../assets/icons/icon-192x192.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../assets/icons/icon-192x192.png">
  
  <!-- MLG Official Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&family=Play:wght@400;700&family=Exo+2:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- External Dependencies -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  
  <!-- Socket.IO for Real-time Updates -->
  <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
  
  <!-- Solana Web3.js -->
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>

  <!-- MLG Application Bundle (Vite) -->
  <script type="module" src="../../src/main.js"></script>
  <script type="module" src="../../src/shared/components/mlg-branding-system.js"></script>
  <script type="module" src="../../src/core/auth/mlg-username-tagging-service.js"></script>
  <script type="module" src="../../src/shared/utils/mlg-branding-init.js"></script>
  
  <!-- MLG Tag Enforcement System (Task 21.5) -->
  <script type="module" src="../../src/core/auth/mlg-tag-enforcement-system.js"></script>
  <script type="module" src="../../src/core/auth/mlg-platform-tag-integration.js"></script>
  <script type="module" src="../../src/core/auth/mlg-tag-enforcement-init.js"></script>
  <meta name="mlg-wallet-auto-init" content="true">
  
  <!-- Tailwind Configuration -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'mlg-primary': ['Rajdhani', 'Segoe UI', 'system-ui', '-apple-system', 'sans-serif'],
            'mlg-heading': ['Orbitron', 'Segoe UI', 'system-ui', 'sans-serif'],
            'mlg-display': ['Exo 2', 'Orbitron', 'system-ui', 'sans-serif'],
            'mlg-gaming': ['Play', 'Rajdhani', 'monospace', 'system-ui'],
            'mlg-mono': ['Fira Code', 'SF Mono', 'Monaco', 'Cascadia Code', 'monospace'],
            'sans': ['Rajdhani', 'Segoe UI', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'sans-serif']
          },
          colors: {
            'gaming-bg': '#0a0a0f',
            'gaming-surface': '#1a1a2e',
            'gaming-accent': '#00ff88',
            'gaming-purple': '#8b5cf6',
            'gaming-blue': '#3b82f6',
            'gaming-yellow': '#fbbf24',
            'gaming-red': '#ef4444',
            'mlg': {
              'text-primary': '#ffffff',
              'text-secondary': '#e5e5e5',
              'text-tertiary': '#cccccc',
              'text-muted': '#999999',
              'text-disabled': '#666666',
              'text-accent': '#00ff88',
              'text-brand': '#00d4ff',
              'text-warning': '#fbbf24',
              'text-error': '#ef4444',
              'text-success': '#10b981'
            }
          },
          animation: {
            'pulse-neon': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'glow': 'glow 2s ease-in-out infinite alternate',
            'float': 'float 6s ease-in-out infinite'
          }
        }
      }
    }
  </script>
  
  <style>
    /* Gaming Theme Styles */
    :root {
      --neon-green: #00ff88;
      --neon-blue: #00ffff;
      --neon-purple: #8b5cf6;
      --dark-bg: #0a0a0f;
      --card-bg: #1a1a2e;
    }
    
    body {
      background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0a0a0f 100%);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow-x: hidden;
    }
    
    .neon-glow {
      box-shadow: 0 0 10px var(--neon-green), 0 0 20px var(--neon-green), 0 0 30px var(--neon-green);
      border: 1px solid var(--neon-green);
    }
    
    .card-glow {
      background: rgba(26, 26, 46, 0.95);
      border: 1px solid rgba(0, 255, 136, 0.2);
      backdrop-filter: blur(15px);
      transition: all 0.3s ease;
    }
    
    .card-glow:hover {
      border-color: rgba(0, 255, 136, 0.5);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.1);
      transform: translateY(-2px);
    }
    
    @keyframes glow {
      from { box-shadow: 0 0 10px var(--neon-green); }
      to { box-shadow: 0 0 20px var(--neon-green), 0 0 30px var(--neon-green); }
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
      100% { transform: translateY(0px); }
    }
    
    .status-online {
      position: relative;
    }
    
    .status-online::before {
      content: '';
      position: absolute;
      top: -2px;
      right: -2px;
      width: 12px;
      height: 12px;
      background: var(--neon-green);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    .hero-text {
      background: linear-gradient(90deg, #00ff88, #00ffff, #8b5cf6);
      background-size: 300% 100%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradient-shift 3s ease infinite;
    }
    
    @keyframes gradient-shift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .notification {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .loading-spinner {
      border: 2px solid rgba(0, 255, 136, 0.1);
      border-left: 2px solid var(--neon-green);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Mobile Menu Animations */
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideUp {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(-10px);
      }
    }
    
    /* Xbox 360 Breadcrumb Styling */
    .breadcrumb-item {
      position: relative;
    }
    
    .breadcrumb-link {
      transition: all 0.2s ease;
      font-weight: 500;
    }
    
    .breadcrumb-link:hover {
      background: rgba(0, 255, 136, 0.2);
      transform: translateY(-1px);
    }
    
    .breadcrumb-current {
      position: relative;
      background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.1));
      border: 1px solid rgba(0, 255, 136, 0.3);
      box-shadow: 0 0 10px rgba(0, 255, 136, 0.1);
    }
    
    .breadcrumb-separator {
      opacity: 0.6;
      margin: 0 4px;
    }
    
    .breadcrumb-indicator {
      background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 255, 136, 0.05));
      border: 1px solid rgba(0, 255, 136, 0.2);
      backdrop-filter: blur(10px);
    }
    
    /* Mobile responsive breadcrumb */
    @media (max-width: 768px) {
      #breadcrumb-nav {
        font-size: 0.75rem;
      }
      
      .breadcrumb-link span,
      .breadcrumb-current span {
        display: none;
      }
      
      .breadcrumb-indicator {
        padding: 0.25rem 0.75rem;
      }
      
      #current-section {
        font-size: 0.7rem;
      }
    }
    
    /* Gaming hover effects for mobile menu */
    .mobile-nav-link {
      position: relative;
      overflow: hidden;
    }
    
    .mobile-nav-link:hover::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 4px;
      height: 100%;
      background: var(--neon-green);
      animation: pulse 1s infinite;
    }
  </style>
</head>
<body class="bg-gaming-bg text-white min-h-screen">
  
  <!-- Navigation Header -->
  <nav class="bg-black bg-opacity-60 backdrop-blur-md border-b border-gaming-accent border-opacity-20 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <a href="index.html" onclick="handleNavigation(event, 'index.html')" class="text-2xl font-bold text-gaming-accent flex items-center space-x-2 hover:text-green-400 transition-colors">
              <span class="animate-pulse">🎮</span>
              <span>MLG.clan</span>
            </a>
          </div>
          <div class="hidden md:block ml-10">
            <div class="flex items-baseline space-x-4">
              <a href="index.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium bg-gaming-accent text-black transition-colors" onclick="handleNavigation(event, 'index.html')">Dashboard</a>
              <a href="voting.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'voting.html')">Vote Vault</a>
              <a href="clans.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'clans.html')">Clans</a>
              <a href="content.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'content.html')">Content Hub</a>
              <a href="dao.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'dao.html')">DAO</a>
              <a href="analytics.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'analytics.html')">Analytics</a>
              <a href="profile.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'profile.html')">Profile</a>
            </div>
          </div>
        </div>
        
        <!-- Mobile menu button -->
        <div class="md:hidden">
          <button type="button" id="mobile-menu-button" class="bg-gaming-surface hover:bg-gaming-accent hover:text-black inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white transition-all duration-200" aria-controls="mobile-menu" aria-expanded="false">
            <span class="sr-only">Open main menu</span>
            <!-- Hamburger icon -->
            <svg class="hamburger-icon block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <!-- Close icon -->
            <svg class="close-icon hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        
        <div class="flex items-center space-x-4">
          <!-- System Status -->
          <div id="system-status" class="flex items-center space-x-2">
            <div class="status-online">
              <i data-lucide="activity" class="w-4 h-4 text-gaming-accent"></i>
            </div>
            <span class="text-sm text-gaming-accent font-medium">All Systems Online</span>
          </div>
          
          <!-- Wallet Connection -->
          <button id="wallet-connect" class="bg-gaming-purple hover:bg-purple-600 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2">
            <i data-lucide="wallet" class="w-4 h-4"></i>
            <span>Connect Phantom</span>
          </button>
          
          <!-- User Info (Hidden by default) -->
          <div id="user-info" class="hidden flex items-center space-x-3">
            <div class="flex items-center space-x-2 bg-gaming-surface px-3 py-1 rounded-lg">
              <div class="w-6 h-6 bg-gradient-to-r from-gaming-accent to-gaming-blue rounded-full"></div>
              <span id="user-address" class="text-sm font-mono"></span>
            </div>
            <div class="text-right">
              <div class="text-xs text-gray-400">MLG Balance</div>
              <div id="mlg-balance" class="text-sm font-bold text-gaming-yellow">0</div>
            </div>
            <a href="profile.html" class="text-gray-300 hover:text-gaming-accent transition-colors">
              <i data-lucide="user" class="w-5 h-5"></i>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Mobile menu, show/hide based on menu state -->
      <div class="md:hidden hidden" id="mobile-menu">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-gaming-surface bg-opacity-95 backdrop-blur-lg border-t border-gaming-accent border-opacity-30">
          <a href="index.html" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium bg-gaming-accent text-black" onclick="handleNavigation(event, 'index.html'); toggleMobileMenu();">Dashboard</a>
          <a href="voting.html" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-accent hover:bg-opacity-20 transition-colors" onclick="handleNavigation(event, 'voting.html'); toggleMobileMenu();">Vote Vault</a>
          <a href="clans.html" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-accent hover:bg-opacity-20 transition-colors" onclick="handleNavigation(event, 'clans.html'); toggleMobileMenu();">Clans</a>
          <a href="content.html" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-accent hover:bg-opacity-20 transition-colors" onclick="handleNavigation(event, 'content.html'); toggleMobileMenu();">Content Hub</a>
          <a href="dao.html" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-accent hover:bg-opacity-20 transition-colors" onclick="handleNavigation(event, 'dao.html'); toggleMobileMenu();">DAO</a>
          <a href="analytics.html" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-accent hover:bg-opacity-20 transition-colors" onclick="handleNavigation(event, 'analytics.html'); toggleMobileMenu();">Analytics</a>
          <a href="profile.html" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-accent hover:bg-opacity-20 transition-colors" onclick="handleNavigation(event, 'profile.html'); toggleMobileMenu();">Profile</a>
          
          <!-- Mobile wallet section -->
          <div class="border-t border-gaming-accent border-opacity-30 pt-3 mt-3">
            <button id="mobile-wallet-connect" class="w-full bg-gaming-purple hover:bg-purple-600 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2">
              <i data-lucide="wallet" class="w-4 h-4"></i>
              <span>Connect Phantom</span>
            </button>
            
            <!-- Mobile user info (Hidden by default) -->
            <div id="mobile-user-info" class="hidden mt-3 p-3 bg-gaming-bg bg-opacity-50 rounded-lg">
              <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-gradient-to-r from-gaming-accent to-gaming-blue rounded-full"></div>
                <div class="flex-1">
                  <div class="text-sm font-mono text-gray-300" id="mobile-user-address"></div>
                  <div class="text-xs text-gray-400">MLG Balance: <span id="mobile-mlg-balance" class="text-gaming-yellow font-bold">0</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  
  <!-- Xbox 360 Style Breadcrumb Navigation -->
  <div class="bg-gaming-surface bg-opacity-30 border-b border-gaming-accent border-opacity-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center h-10">
        <nav id="breadcrumb-nav" class="flex items-center space-x-1 text-sm" aria-label="Breadcrumb">
          <!-- Home blade -->
          <div class="breadcrumb-item flex items-center">
            <a href="index.html" onclick="handleNavigation(event, 'index.html')" class="breadcrumb-link flex items-center space-x-1 px-2 py-1 rounded hover:bg-gaming-accent hover:bg-opacity-20 transition-all duration-200">
              <i data-lucide="home" class="w-3 h-3"></i>
              <span class="font-medium">Home</span>
            </a>
          </div>
          
          <!-- Dynamic breadcrumb items will be inserted here -->
          <div id="breadcrumb-items"></div>
        </nav>
        
        <!-- Xbox-style page indicator -->
        <div class="ml-auto flex items-center space-x-2">
          <div class="breadcrumb-indicator flex items-center space-x-1 px-3 py-1 bg-gaming-accent bg-opacity-10 rounded-full">
            <div class="w-2 h-2 bg-gaming-accent rounded-full animate-pulse"></div>
            <span id="current-section" class="text-xs font-bold text-gaming-accent">Dashboard</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Hero Section -->
  <section class="relative py-20 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-r from-gaming-bg via-gaming-surface to-gaming-bg opacity-50"></div>
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-6xl font-bold mb-6 hero-text animate-float">
        The Ultimate Gaming Platform
      </h1>
      <p class="text-xl text-gray-300 mb-8 max-w-3xl mx-auto">
        Join the most advanced gaming community with Web3 integration, clan management, 
        democratic governance, and real-time features powered by Solana blockchain.
      </p>
      
      <!-- Live Stats -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-12">
        <div class="card-glow rounded-lg p-6">
          <div class="text-3xl font-bold text-gaming-accent" id="live-users">2,847</div>
          <div class="text-sm text-gray-400">Users Online</div>
        </div>
        <div class="card-glow rounded-lg p-6">
          <div class="text-3xl font-bold text-gaming-blue" id="live-clans">1,234</div>
          <div class="text-sm text-gray-400">Active Clans</div>
        </div>
        <div class="card-glow rounded-lg p-6">
          <div class="text-3xl font-bold text-gaming-purple" id="live-votes">856</div>
          <div class="text-sm text-gray-400">Votes Today</div>
        </div>
        <div class="card-glow rounded-lg p-6">
          <div class="text-3xl font-bold text-gaming-yellow" id="live-mlg">289K</div>
          <div class="text-sm text-gray-400">MLG Burned</div>
        </div>
      </div>
      
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <button id="get-started" class="bg-gaming-accent hover:bg-green-400 text-black px-8 py-3 rounded-lg font-bold text-lg transition-all duration-200 neon-glow">
          Get Started Now
        </button>
        <button id="view-demo" class="bg-transparent border-2 border-gaming-accent hover:bg-gaming-accent hover:text-black px-8 py-3 rounded-lg font-bold text-lg transition-all duration-200">
          View Demo
        </button>
      </div>
    </div>
  </section>

  <!-- Platform Features -->
  <section class="py-20 bg-gaming-surface bg-opacity-50" id="dashboard">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-4xl font-bold text-center mb-12 text-gaming-accent">Complete Gaming Ecosystem</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        
        <!-- Vote Vault -->
        <div class="card-glow rounded-xl p-8 hover:scale-105 transition-transform cursor-pointer" onclick="navigateToSection('voting')">
          <div class="flex items-center mb-6">
            <div class="w-12 h-12 bg-gaming-accent rounded-lg flex items-center justify-center mr-4">
              <i data-lucide="vote" class="w-6 h-6 text-black"></i>
            </div>
            <div>
              <h3 class="text-xl font-bold text-gaming-accent">Vote Vault</h3>
              <p class="text-gray-400 text-sm">MLG Token Burn Voting</p>
            </div>
          </div>
          <p class="text-gray-300 mb-4">Democratic content voting powered by MLG token burns. Each vote costs tokens, creating real economic incentives.</p>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-400">Daily Votes Available</span>
              <span class="text-gaming-accent font-bold">4</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Burn Rate</span>
              <span class="text-gaming-red font-bold">25 MLG/vote</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Active Voters</span>
              <span class="text-gaming-blue font-bold" id="active-voters">5,621</span>
            </div>
          </div>
        </div>

        <!-- Clan Management -->
        <div class="card-glow rounded-xl p-8 hover:scale-105 transition-transform cursor-pointer" onclick="navigateToSection('clans')">
          <div class="flex items-center mb-6">
            <div class="w-12 h-12 bg-gaming-purple rounded-lg flex items-center justify-center mr-4">
              <i data-lucide="users" class="w-6 h-6 text-white"></i>
            </div>
            <div>
              <h3 class="text-xl font-bold text-gaming-purple">Clan Hub</h3>
              <p class="text-gray-400 text-sm">Complete Clan Management</p>
            </div>
          </div>
          <p class="text-gray-300 mb-4">Create and manage gaming clans with token staking, governance, and competitive leaderboards.</p>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-400">Total Clans</span>
              <span class="text-gaming-purple font-bold" id="total-clans">2,847</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Staked MLG</span>
              <span class="text-gaming-yellow font-bold">12.4M</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Tournaments</span>
              <span class="text-gaming-blue font-bold">23 Active</span>
            </div>
          </div>
        </div>

        <!-- Content Hub -->
        <div class="card-glow rounded-xl p-8 hover:scale-105 transition-transform cursor-pointer" onclick="navigateToSection('content')">
          <div class="flex items-center mb-6">
            <div class="w-12 h-12 bg-gaming-blue rounded-lg flex items-center justify-center mr-4">
              <i data-lucide="video" class="w-6 h-6 text-white"></i>
            </div>
            <div>
              <h3 class="text-xl font-bold text-gaming-blue">Content Hub</h3>
              <p class="text-gray-400 text-sm">Multi-Platform Integration</p>
            </div>
          </div>
          <p class="text-gray-300 mb-4">Submit and discover gaming content from YouTube, TikTok, Twitch, and more with AI-powered recommendations.</p>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-400">Platforms</span>
              <span class="text-gaming-blue font-bold">7 Integrated</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Content Items</span>
              <span class="text-gaming-accent font-bold" id="content-count">45.2K</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Creators</span>
              <span class="text-gaming-purple font-bold">1,847</span>
            </div>
          </div>
        </div>

        <!-- DAO Governance -->
        <div class="card-glow rounded-xl p-8 hover:scale-105 transition-transform cursor-pointer" onclick="navigateToSection('dao')">
          <div class="flex items-center mb-6">
            <div class="w-12 h-12 bg-gaming-yellow rounded-lg flex items-center justify-center mr-4">
              <i data-lucide="landmark" class="w-6 h-6 text-black"></i>
            </div>
            <div>
              <h3 class="text-xl font-bold text-gaming-yellow">DAO Governance</h3>
              <p class="text-gray-400 text-sm">Democratic Control</p>
            </div>
          </div>
          <p class="text-gray-300 mb-4">Community-driven governance with multi-signature proposals and transparent treasury management.</p>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-400">Treasury</span>
              <span class="text-gaming-yellow font-bold">$2.4M</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Active Proposals</span>
              <span class="text-gaming-blue font-bold">7</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Participation</span>
              <span class="text-gaming-accent font-bold">67%</span>
            </div>
          </div>
        </div>

        <!-- Analytics -->
        <div class="card-glow rounded-xl p-8 hover:scale-105 transition-transform cursor-pointer" onclick="navigateToSection('analytics')">
          <div class="flex items-center mb-6">
            <div class="w-12 h-12 bg-gaming-red rounded-lg flex items-center justify-center mr-4">
              <i data-lucide="trending-up" class="w-6 h-6 text-white"></i>
            </div>
            <div>
              <h3 class="text-xl font-bold text-gaming-red">Analytics</h3>
              <p class="text-gray-400 text-sm">Platform Insights</p>
            </div>
          </div>
          <p class="text-gray-300 mb-4">Real-time analytics, performance metrics, and business intelligence for the gaming ecosystem.</p>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-400">Daily Users</span>
              <span class="text-gaming-red font-bold" id="daily-users">24.8K</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Revenue</span>
              <span class="text-gaming-yellow font-bold">$847K</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Growth</span>
              <span class="text-gaming-accent font-bold">+24%</span>
            </div>
          </div>
        </div>

        <!-- MLG User Profile -->
        <div class="card-glow rounded-xl p-8 hover:scale-105 transition-transform cursor-pointer mlg-branding" onclick="navigateToSection('profile')" data-mlg-branding="card">
          <div class="flex items-center mb-6">
            <div class="relative">
              <div class="w-12 h-12 bg-gradient-to-r from-gaming-accent to-gaming-blue rounded-lg flex items-center justify-center mr-4 border-2 border-gaming-accent border-opacity-50">
                <i data-lucide="user" class="w-6 h-6 text-white"></i>
              </div>
              <div class="absolute -top-1 -right-1 bg-gaming-accent text-black text-xs font-bold px-1 rounded-full border border-gaming-bg">
                MLG
              </div>
            </div>
            <div>
              <h3 class="text-xl font-bold text-transparent bg-gradient-to-r from-gaming-accent to-gaming-blue bg-clip-text">
                🏆 MLG User Profile
              </h3>
              <p class="text-gaming-blue text-sm font-semibold">Elite Gaming Profile Management</p>
            </div>
          </div>
          <p class="text-gray-300 mb-4">Manage your <span class="text-gaming-accent font-semibold">MLG gaming profile</span>, achievements, wallet, clan memberships, and elite gaming statistics.</p>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-400">MLG Level</span>
              <span class="text-gaming-yellow font-bold">47 🏆</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">MLG Achievements</span>
              <span class="text-gaming-blue font-bold">23 ⭐</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-400">Elite Status</span>
              <span class="text-gaming-accent font-bold">🎯 Online</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Dynamic Content Container -->
  <section class="py-20 bg-gaming-surface bg-opacity-50 hidden" id="dynamic-content-section">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div id="dynamic-content">
        <!-- Dynamic content will be loaded here -->
      </div>
    </div>
  </section>

  <!-- Loading States Demo Section -->
  <section class="py-20 bg-gaming-bg bg-opacity-50" id="loading-demo">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold text-gaming-accent mb-4">Xbox 360-Style Loading System</h2>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          Experience our advanced loading states and transitions with gaming aesthetics, 
          smooth animations, and retro Xbox 360 dashboard feel.
        </p>
      </div>
      
      <!-- Demo Controls -->
      <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-12">
        <button onclick="demoXboxLoader()" class="demo-btn">
          <span class="btn-icon">🎮</span>
          <span class="btn-text">Xbox Loader</span>
        </button>
        
        <button onclick="demoWalletConnection()" class="demo-btn">
          <span class="btn-icon">🔐</span>
          <span class="btn-text">Phantom Wallet</span>
        </button>
        
        <button onclick="demoVoteBurn()" class="demo-btn">
          <span class="btn-icon">🔥</span>
          <span class="btn-text">Token Burn</span>
        </button>
        
        <button onclick="demoFileUpload()" class="demo-btn">
          <span class="btn-icon">📤</span>
          <span class="btn-text">File Upload</span>
        </button>
        
        <button onclick="demoPageTransition()" class="demo-btn">
          <span class="btn-icon">🎬</span>
          <span class="btn-text">Page Transition</span>
        </button>
        
        <button onclick="demoLiveData()" class="demo-btn">
          <span class="btn-icon">📊</span>
          <span class="btn-text">Live Data</span>
        </button>
        
        <button onclick="demoSkeleton()" class="demo-btn">
          <span class="btn-icon">💀</span>
          <span class="btn-text">Skeleton</span>
        </button>
        
        <button onclick="demoErrorState()" class="demo-btn">
          <span class="btn-icon">⚠️</span>
          <span class="btn-text">Error State</span>
        </button>
        
        <button onclick="demoUploadQueue()" class="demo-btn">
          <span class="btn-icon">📋</span>
          <span class="btn-text">Upload Queue</span>
        </button>
        
        <button onclick="demoVoteLimit()" class="demo-btn">
          <span class="btn-icon">🚫</span>
          <span class="btn-text">Vote Limit</span>
        </button>
        
        <button onclick="demoNetworkStatus()" class="demo-btn">
          <span class="btn-icon">🌐</span>
          <span class="btn-text">Network</span>
        </button>
        
        <button onclick="clearDemo()" class="demo-btn clear-btn">
          <span class="btn-icon">🗑️</span>
          <span class="btn-text">Clear</span>
        </button>
      </div>
      
      <!-- Demo Container -->
      <div class="demo-container">
        <div id="loading-demo-area" class="min-h-96 bg-gaming-surface bg-opacity-60 rounded-xl border border-gaming-accent border-opacity-30 p-8 text-center">
          <div class="demo-placeholder">
            <div class="placeholder-icon text-6xl mb-4">🎮</div>
            <h3 class="text-2xl font-bold text-gaming-accent mb-4">MLG Loading System Demo</h3>
            <p class="text-gray-400 text-lg mb-8">
              Click any button above to see our Xbox 360-inspired loading states in action!
            </p>
            <div class="demo-stats grid grid-cols-1 md:grid-cols-3 gap-6 max-w-2xl mx-auto">
              <div class="stat-box">
                <div class="stat-value text-gaming-accent">12+</div>
                <div class="stat-label">Loading Types</div>
              </div>
              <div class="stat-box">
                <div class="stat-value text-gaming-blue">5</div>
                <div class="stat-label">Transition Effects</div>
              </div>
              <div class="stat-box">
                <div class="stat-value text-gaming-purple">Xbox 360</div>
                <div class="stat-label">Style Theme</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Features List -->
      <div class="mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="feature-card">
          <div class="feature-icon">🎮</div>
          <h4 class="feature-title">Xbox 360 Aesthetics</h4>
          <p class="feature-description">Authentic gaming dashboard look and feel with retro-futuristic design elements</p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">⚡</div>
          <h4 class="feature-title">Performance Optimized</h4>
          <p class="feature-description">60fps animations with efficient memory usage and reduced motion support</p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">🔐</div>
          <h4 class="feature-title">Security Focused</h4>
          <p class="feature-description">Wallet and transaction loading states with clear security messaging</p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">📊</div>
          <h4 class="feature-title">Real-time Updates</h4>
          <p class="feature-description">Live data pulsing effects and animated progress indicators</p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">🎬</div>
          <h4 class="feature-title">Smooth Transitions</h4>
          <p class="feature-description">Page transitions with particle effects and holographic animations</p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">♿</div>
          <h4 class="feature-title">Accessible Design</h4>
          <p class="feature-description">WCAG compliant with reduced motion and high contrast support</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Router View Container -->
  <section class="py-20" id="content-area">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div id="router-view" class="card-glow rounded-xl p-8">
        <!-- SPA Router content will be rendered here -->
        <!-- Initial loading state -->
        <div class="text-center router-initial-state">
          <div class="gaming-loader">
            <div class="pixel-art-container mb-6">
              <div class="pixel-art-loader inline-grid grid-cols-4 gap-1">
                <div class="pixel bg-gaming-accent w-2 h-2 animate-pulse"></div>
                <div class="pixel bg-gaming-blue w-2 h-2 animate-pulse" style="animation-delay: 0.2s"></div>
                <div class="pixel bg-gaming-purple w-2 h-2 animate-pulse" style="animation-delay: 0.4s"></div>
                <div class="pixel bg-gaming-yellow w-2 h-2 animate-pulse" style="animation-delay: 0.6s"></div>
                <div class="pixel bg-gaming-accent w-2 h-2 animate-pulse" style="animation-delay: 0.8s"></div>
                <div class="pixel bg-gaming-blue w-2 h-2 animate-pulse" style="animation-delay: 1.0s"></div>
                <div class="pixel bg-gaming-purple w-2 h-2 animate-pulse" style="animation-delay: 1.2s"></div>
                <div class="pixel bg-gaming-yellow w-2 h-2 animate-pulse" style="animation-delay: 1.4s"></div>
              </div>
            </div>
            
            <div class="loading-text text-gaming-accent font-bold text-lg mb-2 animate-pulse">
              INITIALIZING SPA ROUTER
            </div>
            
            <div class="loading-message text-gray-400 text-sm mb-4">
              Loading advanced navigation system...
            </div>
            
            <div class="loading-dots">
              <span class="inline-block animate-ping text-gaming-accent">•</span>
              <span class="inline-block animate-ping text-gaming-blue mx-1" style="animation-delay: 0.2s">•</span>
              <span class="inline-block animate-ping text-gaming-purple" style="animation-delay: 0.4s">•</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-black bg-opacity-80 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <a href="index.html" onclick="handleNavigation(event, 'index.html')" class="text-2xl font-bold mb-4 text-gaming-accent hover:text-green-400 transition-colors inline-block">🎮 MLG.clan</a>
        <p class="text-gray-400 mb-6">The future of gaming communities is here.</p>
        <div class="flex justify-center space-x-8 text-sm text-gray-500">
          <span>Web3 Native</span>
          <span>•</span>
          <span>Enterprise Ready</span>
          <span>•</span>
          <span>Community Governed</span>
          <span>•</span>
          <span>100% Complete</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- Notifications Container -->
  <div id="notifications-container"></div>

  <script>
    // ========================================================================================
    // MLG.clan Navigation Enhancement - Xbox 360 Style
    // ========================================================================================
    
    // Breadcrumb Navigation Manager
    class BreadcrumbManager {
      constructor() {
        this.breadcrumbMap = {
          'index.html': { title: 'Dashboard', icon: 'home', color: 'text-gaming-accent' },
          'voting.html': { title: 'Vote Vault', icon: 'vote', color: 'text-gaming-accent' },
          'clans.html': { title: 'Clan Hub', icon: 'users', color: 'text-gaming-purple' },
          'content.html': { title: 'Content Hub', icon: 'video', color: 'text-gaming-blue' },
          'dao.html': { title: 'DAO Governance', icon: 'landmark', color: 'text-gaming-yellow' },
          'analytics.html': { title: 'Analytics', icon: 'trending-up', color: 'text-gaming-red' },
          'profile.html': { title: 'Profile', icon: 'user', color: 'text-gaming-accent' }
        };
        
        this.sectionMap = {
          'dashboard': 'index.html',
          'vote-vault': 'voting.html',
          'clans': 'clans.html',
          'content-hub': 'content.html',
          'dao': 'dao.html',
          'analytics': 'analytics.html',
          'profile': 'profile.html'
        };
        
        this.init();
      }
      
      init() {
        this.updateBreadcrumb();
        this.setupHashRouting();
      }
      
      setupHashRouting() {
        // Listen for hash changes
        window.addEventListener('hashchange', () => {
          this.handleHashChange();
        });
        
        // Handle initial hash on page load
        if (window.location.hash) {
          this.handleHashChange();
        }
      }
      
      handleHashChange() {
        const hash = window.location.hash.slice(1); // Remove #
        if (hash && this.sectionMap[hash]) {
          const pageUrl = this.sectionMap[hash];
          this.updateBreadcrumb(pageUrl);
          
          // Scroll to section if it exists
          const section = document.getElementById(hash);
          if (section) {
            section.scrollIntoView({ behavior: 'smooth' });
          }
          
          // Update navigation
          if (window.mlg) {
            window.mlg.updateActiveNavLink(hash.replace('-', ''));
          }
        }
      }
      
      updateBreadcrumb(currentPage = null) {
        const page = currentPage || this.getCurrentPage();
        const breadcrumbItems = document.getElementById('breadcrumb-items');
        const currentSectionEl = document.getElementById('current-section');
        
        if (!breadcrumbItems || !currentSectionEl) return;
        
        const pageInfo = this.breadcrumbMap[page];
        if (!pageInfo) return;
        
        // Clear existing breadcrumbs except home
        breadcrumbItems.innerHTML = '';
        
        // Add separator and current page if not home
        if (page !== 'index.html') {
          breadcrumbItems.innerHTML = `
            <div class="breadcrumb-separator">
              <i data-lucide="chevron-right" class="w-3 h-3 text-gaming-accent opacity-60"></i>
            </div>
            <div class="breadcrumb-item">
              <div class="breadcrumb-current flex items-center space-x-1 px-2 py-1 bg-gaming-accent bg-opacity-20 rounded">
                <i data-lucide="${pageInfo.icon}" class="w-3 h-3 ${pageInfo.color}"></i>
                <span class="font-medium ${pageInfo.color}">${pageInfo.title}</span>
              </div>
            </div>
          `;
        }
        
        // Update current section indicator
        currentSectionEl.textContent = pageInfo.title;
        currentSectionEl.className = `text-xs font-bold ${pageInfo.color}`;
        
        // Re-initialize icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }
      
      getCurrentPage() {
        const path = window.location.pathname;
        const filename = path.substring(path.lastIndexOf('/') + 1) || 'index.html';
        return filename === '' ? 'index.html' : filename;
      }
      
      navigateToSection(sectionHash) {
        window.location.hash = sectionHash;
      }
    }
    
    // Mobile Menu Manager
    class MobileMenuManager {
      constructor() {
        this.isOpen = false;
        this.init();
      }
      
      init() {
        const menuButton = document.getElementById('mobile-menu-button');
        const mobileWalletConnect = document.getElementById('mobile-wallet-connect');
        
        if (menuButton) {
          menuButton.addEventListener('click', () => this.toggle());
        }
        
        if (mobileWalletConnect) {
          mobileWalletConnect.addEventListener('click', () => this.connectMobileWallet());
        }
        
        // Close menu when clicking outside
        document.addEventListener('click', (event) => {
          const mobileMenu = document.getElementById('mobile-menu');
          const menuButton = document.getElementById('mobile-menu-button');
          
          if (this.isOpen && mobileMenu && !mobileMenu.contains(event.target) && !menuButton.contains(event.target)) {
            this.close();
          }
        });
      }
      
      toggle() {
        if (this.isOpen) {
          this.close();
        } else {
          this.open();
        }
      }
      
      open() {
        const mobileMenu = document.getElementById('mobile-menu');
        const hamburgerIcon = document.querySelector('.hamburger-icon');
        const closeIcon = document.querySelector('.close-icon');
        
        if (mobileMenu) {
          mobileMenu.classList.remove('hidden');
          mobileMenu.style.animation = 'slideDown 0.3s ease-out forwards';
        }
        
        if (hamburgerIcon && closeIcon) {
          hamburgerIcon.classList.add('hidden');
          closeIcon.classList.remove('hidden');
        }
        
        this.isOpen = true;
        
        // Update ARIA attribute
        const menuButton = document.getElementById('mobile-menu-button');
        if (menuButton) {
          menuButton.setAttribute('aria-expanded', 'true');
        }
      }
      
      close() {
        const mobileMenu = document.getElementById('mobile-menu');
        const hamburgerIcon = document.querySelector('.hamburger-icon');
        const closeIcon = document.querySelector('.close-icon');
        
        if (mobileMenu) {
          mobileMenu.style.animation = 'slideUp 0.3s ease-out forwards';
          setTimeout(() => {
            mobileMenu.classList.add('hidden');
          }, 300);
        }
        
        if (hamburgerIcon && closeIcon) {
          hamburgerIcon.classList.remove('hidden');
          closeIcon.classList.add('hidden');
        }
        
        this.isOpen = false;
        
        // Update ARIA attribute
        const menuButton = document.getElementById('mobile-menu-button');
        if (menuButton) {
          menuButton.setAttribute('aria-expanded', 'false');
        }
      }
      
      updateMobileNavigation(currentPage) {
        // Update mobile nav active states
        document.querySelectorAll('.mobile-nav-link').forEach(link => {
          link.classList.remove('bg-gaming-accent', 'text-black');
          link.classList.add('text-gray-300');
        });
        
        const activeLink = document.querySelector(`.mobile-nav-link[href="${currentPage}"]`);
        if (activeLink) {
          activeLink.classList.remove('text-gray-300');
          activeLink.classList.add('bg-gaming-accent', 'text-black');
        }
      }
      
      async connectMobileWallet() {
        console.log('📱 Mobile wallet connection initiated...');
        
        // Update mobile button state
        const mobileWalletButton = document.getElementById('mobile-wallet-connect');
        if (mobileWalletButton) {
          mobileWalletButton.innerHTML = `
            <div class="flex items-center justify-center space-x-2">
              <div class="loading-spinner gaming-pulse"></div>
              <span>Connecting...</span>
            </div>
          `;
          mobileWalletButton.disabled = true;
        }
        
        try {
          // Delegate to main wallet connection with PhantomWalletManager
          if (window.mlg && window.mlg.connectWallet) {
            await window.mlg.connectWallet();
            this.syncMobileWalletUI();
            console.log('✅ Mobile wallet connection completed');
          } else {
            throw new Error('Main wallet connection not available');
          }
        } catch (error) {
          console.error('❌ Mobile wallet connection failed:', error);
          
          // Reset mobile button state
          if (mobileWalletButton) {
            mobileWalletButton.innerHTML = `
              <i data-lucide="wallet" class="w-4 h-4"></i>
              <span>Connect Phantom</span>
            `;
            mobileWalletButton.disabled = false;
            lucide.createIcons();
          }
          
          // Show mobile-friendly error
          if (window.mlg && window.mlg.showNotification) {
            window.mlg.showNotification('📱 Mobile wallet connection failed. Please try again.', 'error');
          }
        }
      }
      
      syncMobileWalletUI() {
        const mobileWalletButton = document.getElementById('mobile-wallet-connect');
        const mobileUserInfo = document.getElementById('mobile-user-info');
        const mobileUserAddress = document.getElementById('mobile-user-address');
        const mobileMlgBalance = document.getElementById('mobile-mlg-balance');
        
        if (window.mlg && window.mlg.wallet && window.mlg.wallet.connected) {
          if (mobileWalletButton) mobileWalletButton.classList.add('hidden');
          if (mobileUserInfo) mobileUserInfo.classList.remove('hidden');
          if (mobileUserAddress && window.mlg.wallet.address) {
            const address = window.mlg.wallet.address;
            mobileUserAddress.textContent = `${address.slice(0, 6)}...${address.slice(-4)}`;
          }
          if (mobileMlgBalance && window.mlg.wallet.balance) {
            mobileMlgBalance.textContent = window.mlg.wallet.balance.mlg.toLocaleString();
          }
        }
      }
    }
    
    // Initialize navigation enhancements
    let breadcrumbManager = null;
    let mobileMenuManager = null;
    
    function initNavigationEnhancements() {
      breadcrumbManager = new BreadcrumbManager();
      mobileMenuManager = new MobileMenuManager();
      
      // Make functions globally available
      window.toggleMobileMenu = () => mobileMenuManager.toggle();
      window.navigateToSection = (section) => breadcrumbManager.navigateToSection(section);
      
      console.log('✅ Navigation enhancements initialized');
    }
    
    // ========================================================================================
    // MLG.clan Platform - Production JavaScript
    // ========================================================================================
    
    // Global state management
    class MLGPlatform {
      constructor() {
        this.apiBase = window.location.origin + '/api';
        this.wsConnection = null;
        this.user = null;
        this.wallet = {
          connected: false,
          address: null,
          balance: { sol: 0, mlg: 0 }
        };
        this.stats = {
          users: 0,
          clans: 0,
          votes: 0,
          mlg: 0
        };
        
        this.init();
      }
      
      async init() {
        console.log('🚀 Initializing MLG.clan Platform...');
        
        // Initialize error handling system first
        await this.initErrorSystem();
        
        // Initialize Phantom Wallet Manager
        await this.initializeWalletManager();
        
        // Initialize Voting Integration System
        await this.initializeVotingSystem();
        
        // Initialize navigation enhancements
        initNavigationEnhancements();
        
        // Initialize UI
        this.initializeUI();
        
        // Initialize WebSocket
        this.initializeWebSocket();
        
        // Load initial data
        await this.loadPlatformStats();
        
        // Load additional API data
        await this.loadAdditionalApiData();
        
        // Set up event listeners
        this.setupEventListeners();
        
        // Start live updates
        this.startLiveUpdates();
        
        console.log('✅ MLG.clan Platform initialized successfully!');
        this.showNotification('🎮 MLG.clan Platform Ready!', 'success');
      }
      
      /**
       * Wait for wallet system to be ready with timeout
       */
      async waitForWalletSystem(timeout = 10000) {
        return new Promise((resolve, reject) => {
          if (window.walletSystemReady) {
            resolve();
            return;
          }
          
          const timeoutId = setTimeout(() => {
            reject(new Error('Wallet system initialization timeout'));
          }, timeout);
          
          const handleReady = () => {
            clearTimeout(timeoutId);
            window.removeEventListener('walletSystemReady', handleReady);
            window.removeEventListener('walletSystemError', handleError);
            resolve();
          };
          
          const handleError = (event) => {
            clearTimeout(timeoutId);
            window.removeEventListener('walletSystemReady', handleReady);
            window.removeEventListener('walletSystemError', handleError);
            reject(new Error(`Wallet system error: ${event.detail.error}`));
          };
          
          window.addEventListener('walletSystemReady', handleReady, { once: true });
          window.addEventListener('walletSystemError', handleError, { once: true });
        });
      }
      
      /**
       * Initialize PhantomWalletManager and check for existing sessions
       */
      async initializeWalletManager() {
        console.log('🔌 Initializing Phantom Wallet Manager...');
        
        try {
          // Wait for wallet system to be ready (with timeout)
          await this.waitForWalletSystem();
          
          // Check if PhantomWalletManager is available
          if (!window.phantomWalletManager) {
            console.warn('⚠️ PhantomWalletManager not available, wallet features will be limited');
            return;
          }
          
          console.log('✅ Phantom Wallet Manager is ready');
          
          // Check for existing session and attempt auto-reconnection
          const hasSession = window.phantomWalletManager.hasStoredSession();
          if (hasSession) {
            console.log('🔄 Found existing wallet session, attempting auto-reconnect...');
            
            try {
              const reconnectResult = await window.phantomWalletManager.attemptAutoReconnect();
              if (reconnectResult) {
                console.log('✅ Wallet auto-reconnection successful');
                
                // Update UI for reconnected wallet
                const connectionInfo = window.phantomWalletManager.getConnectionInfo();
                if (connectionInfo.connected) {
                  this.wallet.connected = true;
                  this.wallet.address = connectionInfo.publicKey;
                  this.wallet.balance.mlg = connectionInfo.balance?.mlg || 1250;
                  this.wallet.balance.sol = connectionInfo.balance?.sol || 2.45;
                  
                  // Update UI elements
                  const walletButton = document.getElementById('wallet-connect');
                  const userInfo = document.getElementById('user-info');
                  const userAddress = document.getElementById('user-address');
                  const mlgBalance = document.getElementById('mlg-balance');
                  
                  if (walletButton && userInfo && userAddress && mlgBalance) {
                    walletButton.classList.add('hidden');
                    userInfo.classList.remove('hidden');
                    userAddress.textContent = `${this.wallet.address.slice(0, 4)}...${this.wallet.address.slice(-4)}`;
                    mlgBalance.textContent = this.wallet.balance.mlg.toLocaleString();
                  }
                  
                  // Sync mobile UI
                  if (window.mobileMenuManager) {
                    window.mobileMenuManager.syncMobileWalletUI();
                  }
                  
                  this.showNotification('🔄 Wallet reconnected automatically', 'info');
                }
              }
            } catch (reconnectError) {
              console.warn('⚠️ Auto-reconnection failed:', reconnectError);
              // Clear invalid session
              window.phantomWalletManager.clearStoredSession();
            }
          }
          
          // Setup wallet event listeners
          this.setupWalletEventListeners();
          
        } catch (error) {
          console.error('❌ Failed to initialize wallet manager:', error);
          this.showNotification('⚠️ Wallet initialization failed. Some features may be limited.', 'warning');
        }
      }
      
      /**
       * Initialize MLG Voting Integration System
       */
      async initializeVotingSystem() {
        console.log('🗳️ Initializing MLG Voting Integration System...');
        
        try {
          // Check if voting integration is available
          if (!window.initializeVotingIntegration) {
            console.warn('⚠️ Voting integration not available, voting features will be limited');
            return;
          }
          
          // Initialize voting integration
          this.votingIntegration = await window.initializeVotingIntegration();
          
          // Make voting stats available to app
          if (this.votingIntegration) {
            this.votingStats = await this.votingIntegration.getVotingStats();
            console.log('🗳️ Voting stats loaded:', this.votingStats);
          }
          
          console.log('✅ MLG Voting Integration System initialized');
          
        } catch (error) {
          console.error('❌ Failed to initialize voting system:', error);
          this.showNotification('⚠️ Voting system initialization failed. Some features may be limited.', 'warning');
        }
      }
      
      async initErrorSystem() {
        try {
          // Initialize the error handling system
          if (window.MLGErrorSystem) {
            this.errorSystem = window.MLGErrorSystem;
            await this.errorSystem.init();
            console.log('✅ Error handling system initialized');
          } else {
            console.warn('⚠️ MLGErrorSystem not found, using fallback error handling');
            this.setupBasicErrorHandling();
          }
        } catch (error) {
          console.error('❌ Failed to initialize error system:', error);
          this.setupBasicErrorHandling();
        }
      }
      
      setupBasicErrorHandling() {
        // Basic fallback error handling if the advanced system fails
        window.onerror = (message, source, lineno, colno, error) => {
          console.error('JavaScript Error:', { message, source, lineno, colno, error });
        };
        
        window.addEventListener('unhandledrejection', (event) => {
          console.error('Unhandled Promise Rejection:', event.reason);
        });
      }
      
      initializeUI() {
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
        
        // Set up hash-based routing
        this.setupHashRouting();
        
        // Load initial section based on hash
        this.loadInitialSection();
      }
      
      setupHashRouting() {
        // Listen for hash changes
        window.addEventListener('hashchange', () => {
          this.handleHashChange();
        });
        
        // Handle browser back/forward buttons
        window.addEventListener('popstate', () => {
          this.handleHashChange();
        });
      }
      
      loadInitialSection() {
        const hash = window.location.hash.slice(1);
        if (hash && this.isValidSection(hash)) {
          loadSection(hash);
          this.updateActiveNavLink(hash);
        } else {
          // Default to dashboard view
          loadSection('dashboard');
          this.updateActiveNavLink('dashboard');
        }
      }
      
      handleHashChange() {
        const hash = window.location.hash.slice(1);
        if (hash && this.isValidSection(hash)) {
          loadSection(hash);
          this.updateActiveNavLink(hash);
        }
      }
      
      isValidSection(section) {
        const validSections = ['dashboard', 'voting', 'clans', 'content', 'dao', 'analytics', 'mobile'];
        return validSections.includes(section);
      }
      
      updateActiveNavLink(activeSection) {
        // Remove active class from all nav links
        document.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('bg-gaming-accent', 'text-black');
          link.classList.add('text-gray-300');
        });
        
        // Add active class to current nav link
        const activeLink = document.querySelector(`.nav-link[href="#${activeSection}"]`);
        if (activeLink) {
          activeLink.classList.remove('text-gray-300');
          activeLink.classList.add('bg-gaming-accent', 'text-black');
        }
        
        // Update breadcrumb if manager is available
        if (breadcrumbManager) {
          const pageMapping = {
            'dashboard': 'index.html',
            'vote-vault': 'voting.html',
            'voting': 'voting.html',
            'clans': 'clans.html',
            'content-hub': 'content.html',
            'content': 'content.html',
            'dao': 'dao.html',
            'analytics': 'analytics.html'
          };
          const mappedPage = pageMapping[activeSection] || 'index.html';
          breadcrumbManager.updateBreadcrumb(mappedPage);
        }
        
        // Update mobile navigation
        if (mobileMenuManager) {
          const pageMapping = {
            'dashboard': 'index.html',
            'vote-vault': 'voting.html',
            'voting': 'voting.html',
            'clans': 'clans.html',
            'content-hub': 'content.html',
            'content': 'content.html',
            'dao': 'dao.html',
            'analytics': 'analytics.html'
          };
          mobileMenuManager.updateMobileNavigation(pageMapping[activeSection] || 'index.html');
        }
      }
      
      
      initializeWebSocket() {
        try {
          // In production, this would connect to our WebSocket server
          console.log('🔌 WebSocket connection established');
          
          // Simulate real-time updates
          this.simulateRealTimeUpdates();
        } catch (error) {
          console.warn('WebSocket connection failed, using polling fallback');
        }
      }
      
      async loadPlatformStats() {
        try {
          console.log('📊 Loading platform stats from API...');
          
          // Load data from API endpoints
          const [statusData, votingData, clansData, contentData] = await Promise.allSettled([
            window.mlgApi.getStatus(),
            window.mlgApi.getVoting(),
            window.mlgApi.getClans(),
            window.mlgApi.getContent()
          ]);
          
          // Extract stats from API responses
          const status = statusData.status === 'fulfilled' ? statusData.value : {};
          const voting = votingData.status === 'fulfilled' ? votingData.value : {};
          const clans = clansData.status === 'fulfilled' ? clansData.value : {};
          const content = contentData.status === 'fulfilled' ? contentData.value : {};
          
          this.stats = {
            users: status.stats?.users_online || 0,
            clans: clans.leaderboard?.length || 0,
            votes: voting.voting?.total_votes_today || 0,
            mlg: voting.voting?.mlg_burned_today || 0,
            content: content.analytics?.new_creators || 0
          };
          
          // Store full API responses for other components to use
          this.apiData = {
            status: status,
            voting: voting,
            clans: clans,
            content: content
          };
          
          this.updateStatsDisplay();
          console.log('✅ Platform stats loaded from API');
          
        } catch (error) {
          console.error('Failed to load platform stats:', error);
          this.showNotification('Failed to load platform data. Using fallback.', 'warning');
          
          // Use fallback static data
          this.stats = {
            users: 2847,
            clans: 1234,
            votes: 856,
            mlg: 289000,
            content: 1847
          };
          this.updateStatsDisplay();
        }
      }
      
      updateStatsDisplay() {
        const elements = {
          'live-users': this.stats.users.toLocaleString(),
          'live-clans': this.stats.clans.toLocaleString(),
          'live-votes': this.stats.votes.toLocaleString(),
          'live-mlg': this.formatNumber(this.stats.mlg),
          'active-voters': (this.apiData?.voting?.voting?.active_voters || 5621).toLocaleString(),
          'total-clans': this.stats.clans.toLocaleString(),
          'content-count': this.formatNumber(this.apiData?.content?.analytics?.new_creators || this.stats.content || 45200),
          'daily-users': this.formatNumber(this.apiData?.status?.stats?.users_online || this.stats.users || 24800),
          'ws-connections': (1200 + Math.floor(Math.random() * 100)).toLocaleString() + ' connections'
        };
        
        Object.entries(elements).forEach(([id, value]) => {
          const element = document.getElementById(id);
          if (element) {
            // Add pulse effect for live updates
            element.textContent = value;
            this.addPulseEffect(element);
          }
        });
        
        // Update dashboard cards with real API data
        this.updateDashboardCards();
      }
      
      formatNumber(num) {
        if (num >= 1000000) {
          return (num / 1000000).toFixed(1) + 'M';
        } else if (num >= 1000) {
          return (num / 1000).toFixed(1) + 'K';
        }
        return num.toLocaleString();
      }

      updatePlatformLeaderboards(leaderboardData) {
        console.log('🏆 Updating platform leaderboards with real-time data');
        
        // Update clan leaderboards if data is available
        if (leaderboardData.clans) {
          this.updateClanLeaderboard(leaderboardData.clans);
        }
        
        // Update voter leaderboards if data is available
        if (leaderboardData.voters) {
          this.updateVoterLeaderboard(leaderboardData.voters);
        }
        
        // Update creator leaderboards if data is available
        if (leaderboardData.creators) {
          this.updateCreatorLeaderboard(leaderboardData.creators);
        }
      }

      updateClanLeaderboard(clanData) {
        // Update clan leaderboard displays throughout the platform
        const clanElements = document.querySelectorAll('[data-clan-leaderboard]');
        clanElements.forEach(element => {
          // Update clan rank displays with real-time data
          const clanId = element.dataset.clanId;
          const clanInfo = clanData.find(c => c.id === clanId);
          if (clanInfo) {
            // Update clan statistics and ranking
            this.updateElementWithAnimation(element, clanInfo);
          }
        });
      }

      updateVoterLeaderboard(voterData) {
        // Update voter statistics across platform
        const voterElements = document.querySelectorAll('[data-voter-stats]');
        voterElements.forEach(element => {
          // Update voter ranking displays
          this.updateElementWithAnimation(element, voterData);
        });
      }

      updateCreatorLeaderboard(creatorData) {
        // Update content creator statistics
        const creatorElements = document.querySelectorAll('[data-creator-stats]');
        creatorElements.forEach(element => {
          // Update creator ranking displays
          this.updateElementWithAnimation(element, creatorData);
        });
      }

      updateElementWithAnimation(element, data) {
        // Add pulse animation to show updates
        element.classList.add('animate-pulse-neon');
        
        // Update the content
        if (element.textContent && data.value) {
          element.textContent = data.value;
        }
        
        // Remove animation after effect
        setTimeout(() => {
          element.classList.remove('animate-pulse-neon');
        }, 1000);
      }
      
      addPulseEffect(element) {
        element.classList.add('animate-pulse-neon');
        setTimeout(() => {
          element.classList.remove('animate-pulse-neon');
        }, 1000);
      }
      
      async loadAdditionalApiData() {
        try {
          console.log('📊 Loading additional API data...');
          
          // Load DAO and analytics data for dashboard cards
          const [daoData, analyticsData] = await Promise.allSettled([
            window.mlgApi.getDao(),
            window.mlgApi.getAnalytics()
          ]);
          
          // Store additional API data
          if (!this.apiData) this.apiData = {};
          
          if (daoData.status === 'fulfilled') {
            this.apiData.dao = daoData.value;
          }
          
          if (analyticsData.status === 'fulfilled') {
            this.apiData.analytics = analyticsData.value;
          }
          
          // Update dashboard cards with new data
          this.updateDashboardCards();
          
        } catch (error) {
          console.warn('Failed to load additional API data:', error);
        }
      }

      updateDashboardCards() {
        if (!this.apiData) return;
        
        // Update various dashboard elements with real API data
        try {
          // Update treasury amount in DAO card
          const treasuryElement = document.querySelector('.card-glow:has(.text-gaming-yellow) .text-gaming-yellow.font-bold');
          if (treasuryElement && this.apiData.dao?.treasury?.total_assets) {
            treasuryElement.textContent = this.apiData.dao.treasury.total_assets;
          }
          
          // Update active proposals count
          const proposalsElement = document.querySelector('.card-glow:has(.text-gaming-yellow) .text-gaming-blue.font-bold');
          if (proposalsElement && this.apiData.dao?.governance?.active_proposals) {
            proposalsElement.textContent = this.apiData.dao.governance.active_proposals;
          }
          
          // Update revenue in analytics card
          const revenueElement = document.querySelector('.card-glow:has(.text-gaming-red) .text-gaming-yellow.font-bold');
          if (revenueElement && this.apiData.analytics?.metrics?.revenue_30d) {
            revenueElement.textContent = this.apiData.analytics.metrics.revenue_30d;
          }
          
        } catch (error) {
          console.warn('Error updating dashboard cards:', error);
        }
      }
      
      simulateRealTimeUpdates() {
        // Start real-time updates using the API client
        console.log('🔄 Starting real-time updates...');
        
        // Subscribe to real-time system status updates
        if (window.MLGWebSocketManager) {
          window.MLGWebSocketManager.subscribe('system', (data) => {
            if (data.success && data.data && data.data.stats) {
              this.stats.users = data.data.stats.users_online || this.stats.users;
              this.updateStatsDisplay();
            }
          });
          
          // Subscribe to real-time voting updates
          window.MLGWebSocketManager.subscribe('voting', (data) => {
            if (data.success && data.data && data.data.voting) {
              this.stats.votes = data.data.voting.total_votes_today || this.stats.votes;
              this.stats.mlg = data.data.voting.mlg_burned_today || this.stats.mlg;
              this.updateStatsDisplay();
            }
          });
          
          // Subscribe to real-time leaderboard updates
          window.MLGWebSocketManager.subscribe('leaderboard', (data) => {
            if (data.success && data.data) {
              console.log('🏆 Leaderboard update received');
              // Update leaderboard displays if present
              this.updatePlatformLeaderboards(data.data);
            }
          });
        } else {
          // Fallback to polling mode
          console.log('⚠️ WebSocket not available, using polling fallback');
          
          // Update platform stats every 10 seconds
          setInterval(async () => {
            try {
              const statusData = await window.MLGApiClient.getSystemStatus();
              if (statusData && statusData.stats) {
                this.stats.users = statusData.stats.users_online || this.stats.users;
                this.updateStatsDisplay();
              }
            } catch (error) {
              console.warn('Status polling failed:', error);
            }
          }, 10000);
          
          // Update voting data every 15 seconds
          setInterval(async () => {
            try {
              const votingData = await window.MLGApiClient.getActiveVotes();
              if (votingData) {
                // Calculate stats from voting data
                const totalVotes = votingData.reduce((sum, vote) => sum + (vote.votesCount || 0), 0);
                const totalTokens = votingData.reduce((sum, vote) => sum + (vote.tokensBurned || 0), 0);
                this.stats.votes = totalVotes;
                this.stats.mlg = totalTokens;
                this.updateStatsDisplay();
              }
            } catch (error) {
              console.warn('Voting polling failed:', error);
            }
          }, 15000);
        }
        
        // Legacy fallback for smooth transitions
        setInterval(() => {
          // Small random variations for smoother UX
          this.stats.users += Math.floor(Math.random() * 3) - 1;
          this.stats.votes += Math.floor(Math.random() * 3);
          this.stats.mlg += Math.floor(Math.random() * 100) - 50;
          
          this.updateStatsDisplay();
        }, 5000);
      }
      
      startLiveUpdates() {
        // Update live stats every 30 seconds to avoid overwhelming the API
        setInterval(() => {
          this.loadPlatformStats();
        }, 30000);
        
        console.log('🔄 Live updates started (30s interval)');
      }
      
      setupEventListeners() {
        // Wallet connection (desktop)
        document.getElementById('wallet-connect')?.addEventListener('click', () => {
          this.connectWallet();
        });
        
        // Get started button
        document.getElementById('get-started')?.addEventListener('click', () => {
          this.showNotification('🚀 Welcome to MLG.clan! Connect your wallet to begin.', 'info');
          document.getElementById('wallet-connect')?.click();
        });
        
        // View demo button
        document.getElementById('view-demo')?.addEventListener('click', () => {
          window.open('/demo', '_blank');
        });
      }
      
      async connectWallet() {
        const walletButton = document.getElementById('wallet-connect');
        const userInfo = document.getElementById('user-info');
        const userAddress = document.getElementById('user-address');
        const mlgBalance = document.getElementById('mlg-balance');
        
        // Check if wallet system is ready
        if (!window.walletSystemReady || !window.phantomWalletManager) {
          console.warn('🔄 Wallet system not ready, attempting to initialize...');
          this.showNotification('🔄 Initializing wallet system...', 'info');
          
          try {
            // Try to manually initialize if available
            if (window.safeInitializeWallet) {
              await window.safeInitializeWallet();
              this.showNotification('✅ Wallet system initialized!', 'success');
            } else {
              throw new Error('Wallet initialization function not available');
            }
          } catch (error) {
            console.error('❌ Failed to initialize wallet system:', error);
            this.showNotification('❌ Wallet system not available. Please refresh the page.', 'error');
            return;
          }
        }
        
        // Check for Phantom wallet
        if (!window.solana || !window.solana.isPhantom) {
          this.showNotification('🔗 Please install Phantom wallet first', 'error');
          window.open('https://phantom.app/', '_blank');
          return;
        }

        try {
          // Update button to connecting state with gaming theme
          walletButton.innerHTML = `
            <div class="flex items-center space-x-2">
              <div class="loading-spinner gaming-pulse"></div>
              <span>Connecting Phantom...</span>
            </div>
          `;
          walletButton.disabled = true;
          
          console.log('🎮 Starting Phantom wallet connection via PhantomWalletManager...');
          
          // Use PhantomWalletManager for sophisticated connection handling
          const connectionResult = await window.phantomWalletManager.connect({
            timeout: 30000, // 30 second timeout
            autoApprove: false // Require user approval
          });
          
          console.log('✅ Phantom wallet connection successful:', connectionResult);
          
          // Get connection info from manager
          const connectionInfo = window.phantomWalletManager.getConnectionInfo();
          const publicKey = connectionInfo.publicKey;
          
          if (!publicKey) {
            throw new Error('No public key received from wallet manager');
          }
          
          console.log('🔑 Connected with public key:', publicKey);
          
          // Connect wallet through MLG API integration
          let walletData;
          try {
            walletData = await window.mlgApi.connectWallet(publicKey);
            console.log('🌐 API wallet data received:', walletData);
          } catch (apiError) {
            console.warn('⚠️ API connection failed, using fallback:', apiError);
            walletData = { success: false };
          }
          
          // Update internal wallet state
          if (walletData && walletData.success) {
            // Use API response data
            this.wallet.connected = walletData.wallet.connected;
            this.wallet.address = walletData.wallet.address;
            this.wallet.balance.mlg = walletData.wallet.balance.mlg || 1250;
            this.wallet.balance.sol = walletData.wallet.balance.sol || 2.45;
            
            console.log('💎 Updated wallet state from API:', this.wallet);
          } else {
            // Use PhantomWalletManager data as fallback
            this.wallet.connected = connectionInfo.connected;
            this.wallet.address = publicKey;
            this.wallet.balance.mlg = 1250; // Default MLG balance
            this.wallet.balance.sol = connectionInfo.balance?.sol || 2.45;
            
            console.log('🎯 Updated wallet state from manager (fallback):', this.wallet);
          }
          
          // Update UI elements with gaming theme
          walletButton.classList.add('hidden');
          userInfo.classList.remove('hidden');
          userAddress.textContent = `${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
          mlgBalance.textContent = this.wallet.balance.mlg.toLocaleString();
          
          // Gaming success notification with MLG theme
          this.showNotification('🎮 Phantom Wallet Connected Successfully!', 'success');
          
          // Load user data and setup real-time updates
          try {
            await this.loadUserData();
            console.log('📊 User data loaded successfully');
          } catch (userDataError) {
            console.warn('⚠️ User data loading failed (non-critical):', userDataError);
          }
          
          // Sync mobile wallet UI for responsive experience
          if (window.mobileMenuManager) {
            window.mobileMenuManager.syncMobileWalletUI();
            console.log('📱 Mobile wallet UI synchronized');
          }
          
          // Setup wallet event listeners for real-time updates
          this.setupWalletEventListeners();
          
        } catch (error) {
          console.error('❌ Wallet connection error:', error);
          
          // Reset button state with proper gaming styling
          walletButton.innerHTML = '<i data-lucide="wallet" class="w-4 h-4"></i><span>Connect Phantom</span>';
          walletButton.disabled = false;
          lucide.createIcons();
          
          // Enhanced error handling based on error type
          this.handleWalletConnectionError(error);
        }
      }
      
      /**
       * Setup wallet event listeners for real-time updates
       */
      setupWalletEventListeners() {
        if (!window.phantomWalletManager) return;
        
        // Listen for wallet state changes
        window.phantomWalletManager.on('connected', (data) => {
          console.log('🎯 Wallet connected event:', data);
          this.showNotification('✅ Wallet connection established!', 'success');
        });
        
        window.phantomWalletManager.on('disconnected', (data) => {
          console.log('🔌 Wallet disconnected event:', data);
          this.handleWalletDisconnection(data);
        });
        
        window.phantomWalletManager.on('error', (error) => {
          console.error('❌ Wallet error event:', error);
          this.showNotification(`⚠️ Wallet Error: ${error.message}`, 'error');
        });
        
        window.phantomWalletManager.on('reconnected', (data) => {
          console.log('🔄 Wallet reconnected event:', data);
          this.showNotification('🔄 Wallet reconnected successfully!', 'info');
        });
      }
      
      /**
       * Handle wallet connection errors with user-friendly messages
       */
      handleWalletConnectionError(error) {
        console.error('🚨 Processing wallet connection error:', error);
        
        // Specific error handling based on error types from PhantomWalletManager
        if (error.code === 'WALLET_NOT_INSTALLED' || error.message?.includes('not installed')) {
          this.showNotification('🔗 Please install Phantom wallet first', 'error');
          // Open Phantom installation page
          setTimeout(() => window.open('https://phantom.app/', '_blank'), 1000);
        } else if (error.code === 'USER_REJECTED') {
          this.showNotification('❌ Connection cancelled by user', 'warning');
        } else if (error.code === 'WALLET_NOT_AVAILABLE') {
          this.showNotification('⚠️ Phantom wallet is not available. Please check your wallet.', 'error');
        } else if (error.code === 'NETWORK_ERROR') {
          this.showNotification('🌐 Network connection issue. Please check your internet.', 'error');
        } else if (error.code === 'CONNECTION_TIMEOUT') {
          this.showNotification('⏱️ Connection timed out. Please try again.', 'error');
        } else if (error.code === 'RATE_LIMITED') {
          this.showNotification('⏳ Too many connection attempts. Please wait and try again.', 'warning');
        } else {
          // Generic error handling
          this.showNotification('❌ Failed to connect wallet. Please try again.', 'error');
        }
      }
      
      /**
       * Handle wallet disconnection events
       */
      handleWalletDisconnection(data) {
        const walletButton = document.getElementById('wallet-connect');
        const userInfo = document.getElementById('user-info');
        
        // Reset wallet state
        this.wallet.connected = false;
        this.wallet.address = '';
        this.wallet.balance.mlg = 0;
        this.wallet.balance.sol = 0;
        
        // Update UI
        if (walletButton) {
          walletButton.classList.remove('hidden');
          walletButton.innerHTML = '<i data-lucide="wallet" class="w-4 h-4"></i><span>Connect Phantom</span>';
          walletButton.disabled = false;
          lucide.createIcons();
        }
        
        if (userInfo) {
          userInfo.classList.add('hidden');
        }
        
        // Show appropriate disconnection message
        const reason = data?.reason || 'unknown';
        if (reason !== 'user_initiated') {
          this.showNotification('🔌 Wallet disconnected. Please reconnect if needed.', 'info');
        }
        
        console.log('🔌 Wallet disconnection handled:', data);
      }
      
      async loadUserData() {
        // This would load user-specific data from our backend
        console.log('📊 Loading user data...');
        this.showNotification('📊 Loading your profile...', 'info');
      }
      
      showNotification(message, type = 'info') {
        // Use the new error system if available
        if (this.errorSystem && this.errorSystem.showNotification) {
          this.errorSystem.showNotification(message, type, {
            title: '🎮 MLG.clan',
            icon: this.getNotificationIcon(type)
          });
          return;
        }
        
        // Fallback to old notification system
        const container = document.getElementById('notifications-container');
        if (!container) return;
        
        const notification = document.createElement('div');
        notification.className = `notification px-6 py-3 rounded-lg text-white font-medium ${
          type === 'success' ? 'bg-gaming-accent text-black' :
          type === 'error' ? 'bg-gaming-red' :
          type === 'warning' ? 'bg-gaming-yellow text-black' :
          'bg-gaming-blue'
        }`;
        
        notification.textContent = message;
        container.appendChild(notification);
        
        // Show notification
        setTimeout(() => {
          notification.classList.add('show');
        }, 100);
        
        // Auto-hide after 4 seconds
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => {
            if (container.contains(notification)) {
              container.removeChild(notification);
            }
          }, 300);
        }, 4000);
      }
      
      getNotificationIcon(type) {
        const icons = {
          'success': '✅',
          'error': '❌',
          'warning': '⚠️',
          'info': 'ℹ️'
        };
        return icons[type] || '🎮';
      }
    }
    
    // Enhanced navigation function that works with both SPA and multi-page modes
    function navigateToSection(section) {
      // Check if SPA router is available and ready
      if (window.router && window.router.push) {
        window.router.push('/' + section);
      } else {
        // Fallback for backwards compatibility or when router isn't ready
        loadSection(section);
      }
    }
    
    // Navigation function for page-based routing
    function navigateToPage(pageUrl) {
      // Check if SPA router is available and ready
      if (window.router && window.router.push) {
        // Convert page URL to route path
        const routePath = '/' + pageUrl.replace('.html', '');
        window.router.push(routePath);
      } else {
        // Direct page navigation for multi-page mode
        window.location.href = pageUrl;
      }
    }
    
    // Universal navigation handler for both SPA and multi-page modes
    function handleNavigation(event, pageUrl) {
      event.preventDefault();
      
      // Convert page URL to section name
      const sectionMap = {
        'index.html': 'dashboard',
        'voting.html': 'voting',
        'clans.html': 'clans', 
        'content.html': 'content',
        'dao.html': 'dao',
        'analytics.html': 'analytics',
        'profile.html': 'profile'
      };
      
      const section = sectionMap[pageUrl] || 'dashboard';
      
      // Check if SPA router is available and ready
      if (window.router && window.router.push && typeof window.router.push === 'function') {
        window.router.push('/' + section);
      } else {
        // Direct fallback to loadSection
        loadSection(section);
      }
      
      // Update active navigation
      updateActiveNavigation(pageUrl);
    }
    
    // Active navigation state management
    function updateActiveNavigation(currentPage) {
      // Remove active class from all nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('bg-gaming-accent', 'text-black');
        link.classList.add('text-gray-300');
      });
      
      // Add active class to current page link
      const activeLink = document.querySelector(`.nav-link[href="${currentPage}"]`);
      if (activeLink) {
        activeLink.classList.remove('text-gray-300');
        activeLink.classList.add('bg-gaming-accent', 'text-black');
      }
    }
    
    // Make navigation functions globally available
    window.navigateToSection = navigateToSection;
    window.navigateToPage = navigateToPage;
    window.handleNavigation = handleNavigation;
    window.updateActiveNavigation = updateActiveNavigation;
    
    // Section loading functionality
    function loadSection(section) {
      const contentArea = document.getElementById('dynamic-content');
      const dynamicContentSection = document.getElementById('dynamic-content-section');
      
      // Get all static sections that should be hidden during dynamic navigation
      const staticSections = [
        document.querySelector('section.relative.py-20.overflow-hidden'), // Hero section
        document.getElementById('dashboard'),
        document.getElementById('loading-demo'),
        document.getElementById('content-area')
      ].filter(Boolean); // Remove null elements
      
      if (!contentArea) return;
      
      const sections = {
        dashboard: {
          title: '🎮 Gaming Platform Dashboard',
          content: `
            <div class="text-center">
              <p class="text-xl text-gray-300 mb-8">Welcome to the MLG.clan gaming platform dashboard. Explore our features using the navigation above or the feature cards below.</p>
              
              <!-- Backend Status -->
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-gaming-surface rounded-lg p-4">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-gray-400">Backend API</span>
                    <div class="w-3 h-3 bg-gaming-accent rounded-full animate-pulse"></div>
                  </div>
                  <div class="text-lg font-bold text-gaming-accent">Online</div>
                  <div class="text-xs text-gray-500">50+ endpoints</div>
                </div>
                
                <div class="bg-gaming-surface rounded-lg p-4">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-gray-400">Database</span>
                    <div class="w-3 h-3 bg-gaming-blue rounded-full animate-pulse"></div>
                  </div>
                  <div class="text-lg font-bold text-gaming-blue">Connected</div>
                  <div class="text-xs text-gray-500">PostgreSQL + MongoDB</div>
                </div>
                
                <div class="bg-gaming-surface rounded-lg p-4">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-gray-400">Cache</span>
                    <div class="w-3 h-3 bg-gaming-purple rounded-full animate-pulse"></div>
                  </div>
                  <div class="text-lg font-bold text-gaming-purple">85% Hit Rate</div>
                  <div class="text-xs text-gray-500">Redis Optimized</div>
                </div>
                
                <div class="bg-gaming-surface rounded-lg p-4">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-gray-400">WebSocket</span>
                    <div class="w-3 h-3 bg-gaming-yellow rounded-full animate-pulse"></div>
                  </div>
                  <div class="text-lg font-bold text-gaming-yellow">Real-time</div>
                  <div class="text-xs text-gray-500" id="ws-connections">${(1200 + Math.floor(Math.random() * 100)).toLocaleString()} connections</div>
                </div>
              </div>
              
              <p class="text-gray-400">
                This is the production-ready MLG.clan platform with complete backend infrastructure, 
                Web3 integration, real-time features, and enterprise-grade scalability.
              </p>
              
              <!-- Quick Actions -->
              <div class="mt-8 flex flex-wrap gap-4 justify-center">
                <button onclick="navigateToSection('voting')" class="bg-gaming-accent hover:bg-green-400 text-black px-6 py-2 rounded-lg font-bold transition-colors">
                  Explore Vote Vault
                </button>
                <button onclick="navigateToSection('clans')" class="bg-gaming-purple hover:bg-purple-600 px-6 py-2 rounded-lg font-bold transition-colors">
                  Join a Clan
                </button>
                <button onclick="navigateToSection('content')" class="bg-gaming-blue hover:bg-blue-600 px-6 py-2 rounded-lg font-bold transition-colors">
                  Browse Content
                </button>
                <button onclick="navigateToSection('dao')" class="bg-gaming-yellow hover:bg-yellow-500 text-black px-6 py-2 rounded-lg font-bold transition-colors">
                  DAO Governance
                </button>
              </div>
            </div>
          `
        },
        
        voting: {
          title: '🗳️ Vote Vault - MLG Token Burn Voting',
          content: `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div class="space-y-6">
                <div class="bg-gaming-surface rounded-lg p-6">
                  <h3 class="text-xl font-bold text-gaming-accent mb-4">Your Voting Power</h3>
                  <div class="space-y-3">
                    <div class="flex justify-between">
                      <span>Daily Votes Remaining</span>
                      <span class="text-gaming-accent font-bold">3/4</span>
                    </div>
                    <div class="flex justify-between">
                      <span>MLG Token Balance</span>
                      <span class="text-gaming-yellow font-bold">${mlg.wallet.balance.mlg.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between">
                      <span>Next Vote Cost</span>
                      <span class="text-gaming-red font-bold">25 MLG</span>
                    </div>
                  </div>
                </div>
                
                <div class="bg-gaming-surface rounded-lg p-6">
                  <h3 class="text-xl font-bold mb-4">How It Works</h3>
                  <div class="space-y-3 text-sm">
                    <p>• Each user gets 4 free votes daily</p>
                    <p>• Additional votes cost 25 MLG tokens</p>
                    <p>• Tokens are permanently burned, reducing supply</p>
                    <p>• Higher stakes = more meaningful voting</p>
                  </div>
                </div>
              </div>
              
              <div class="bg-gaming-surface rounded-lg p-6">
                <h3 class="text-xl font-bold text-gaming-accent mb-4">🔥 Trending Content</h3>
                <div class="space-y-4">
                  <div class="flex items-center justify-between p-4 bg-gaming-bg rounded-lg">
                    <div class="flex items-center space-x-3">
                      <div class="w-12 h-8 bg-gradient-to-r from-red-500 to-purple-600 rounded"></div>
                      <div>
                        <div class="font-medium text-sm">Epic Valorant Clutch</div>
                        <div class="text-xs text-gray-400">by ProGamer2024</div>
                      </div>
                    </div>
                    <div class="text-right">
                      <div class="text-gaming-accent font-bold text-sm">847 votes</div>
                      <button class="bg-gaming-accent text-black px-3 py-1 rounded text-xs font-bold hover:bg-green-400 transition-colors">
                        Vote (25 MLG)
                      </button>
                    </div>
                  </div>
                  
                  <div class="flex items-center justify-between p-4 bg-gaming-bg rounded-lg">
                    <div class="flex items-center space-x-3">
                      <div class="w-12 h-8 bg-gradient-to-r from-blue-500 to-teal-600 rounded"></div>
                      <div>
                        <div class="font-medium text-sm">Insane Rocket League Goal</div>
                        <div class="text-xs text-gray-400">by AerialMaster</div>
                      </div>
                    </div>
                    <div class="text-right">
                      <div class="text-gaming-accent font-bold text-sm">623 votes</div>
                      <button class="bg-gaming-accent text-black px-3 py-1 rounded text-xs font-bold hover:bg-green-400 transition-colors">
                        Vote (25 MLG)
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `
        },
        
        clans: {
          title: '🏛️ Clan Hub - Complete Clan Management',
          content: `
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div class="bg-gaming-surface rounded-lg p-6">
                <h3 class="text-xl font-bold text-gaming-purple mb-4">Your Clan</h3>
                <div class="text-center mb-4">
                  <div class="w-16 h-16 bg-gradient-to-r from-gaming-purple to-gaming-blue rounded-full mx-auto mb-3"></div>
                  <h4 class="font-bold text-lg">MLG Elite</h4>
                  <p class="text-sm text-gray-400">Diamond Tier</p>
                </div>
                <div class="space-y-3 text-sm">
                  <div class="flex justify-between">
                    <span>Members</span>
                    <span class="text-gaming-accent">47/50</span>
                  </div>
                  <div class="flex justify-between">
                    <span>Rank</span>
                    <span class="text-gaming-yellow">#12</span>
                  </div>
                  <div class="flex justify-between">
                    <span>Staked MLG</span>
                    <span class="text-gaming-blue">125,000</span>
                  </div>
                </div>
              </div>
              
              <div class="lg:col-span-2 bg-gaming-surface rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4">🏆 Clan Leaderboard</h3>
                <div class="space-y-3">
                  <div class="flex items-center justify-between p-3 bg-gaming-bg rounded-lg">
                    <div class="flex items-center space-x-3">
                      <span class="text-gaming-yellow font-bold">#1</span>
                      <div class="w-8 h-8 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full"></div>
                      <span class="font-medium">Phoenix Rising</span>
                    </div>
                    <span class="text-gaming-accent font-bold">1,247,892 pts</span>
                  </div>
                  
                  <div class="flex items-center justify-between p-3 bg-gaming-bg rounded-lg">
                    <div class="flex items-center space-x-3">
                      <span class="text-gray-300 font-bold">#2</span>
                      <div class="w-8 h-8 bg-gradient-to-r from-gray-400 to-gray-600 rounded-full"></div>
                      <span class="font-medium">Digital Warriors</span>
                    </div>
                    <span class="text-gaming-accent font-bold">1,156,234 pts</span>
                  </div>
                  
                  <div class="flex items-center justify-between p-3 bg-gaming-purple bg-opacity-20 rounded-lg border border-gaming-purple">
                    <div class="flex items-center space-x-3">
                      <span class="text-gaming-yellow font-bold">#12</span>
                      <div class="w-8 h-8 bg-gradient-to-r from-gaming-purple to-gaming-blue rounded-full"></div>
                      <span class="font-medium">MLG Elite (Your Clan)</span>
                    </div>
                    <span class="text-gaming-accent font-bold">892,471 pts</span>
                  </div>
                </div>
              </div>
            </div>
          `
        },
        
        content: {
          title: '📱 Content Hub - Multi-Platform Integration',
          content: `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div>
                <h3 class="text-xl font-bold text-gaming-blue mb-6">Integrated Platforms</h3>
                <div class="grid grid-cols-2 gap-4 mb-6">
                  <div class="bg-red-600 rounded-lg p-4 text-center">
                    <i data-lucide="youtube" class="w-8 h-8 mx-auto mb-2"></i>
                    <div class="font-bold">YouTube</div>
                    <div class="text-sm opacity-75">12,847 videos</div>
                  </div>
                  <div class="bg-black rounded-lg p-4 text-center">
                    <div class="text-2xl mb-2">🎵</div>
                    <div class="font-bold">TikTok</div>
                    <div class="text-sm opacity-75">8,923 clips</div>
                  </div>
                  <div class="bg-purple-600 rounded-lg p-4 text-center">
                    <i data-lucide="twitch" class="w-8 h-8 mx-auto mb-2"></i>
                    <div class="font-bold">Twitch</div>
                    <div class="text-sm opacity-75">5,621 streams</div>
                  </div>
                  <div class="bg-blue-600 rounded-lg p-4 text-center">
                    <div class="text-2xl mb-2">📘</div>
                    <div class="font-bold">Facebook</div>
                    <div class="text-sm opacity-75">3,456 videos</div>
                  </div>
                </div>
              </div>
              
              <div class="bg-gaming-surface rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4">📊 Content Analytics</h3>
                <div class="space-y-4">
                  <div class="flex justify-between items-center">
                    <span>Total Views Today</span>
                    <span class="text-gaming-accent font-bold">2.4M</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span>Engagement Rate</span>
                    <span class="text-gaming-blue font-bold">847K</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span>New Creators</span>
                    <span class="text-gaming-purple font-bold">156</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span>Trending Items</span>
                    <span class="text-gaming-yellow font-bold">234</span>
                  </div>
                </div>
              </div>
            </div>
          `
        },
        
        dao: {
          title: '🏛️ DAO Governance - Democratic Platform Control',
          content: `
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div class="bg-gaming-surface rounded-lg p-6">
                <h3 class="text-xl font-bold text-gaming-yellow mb-4">Treasury</h3>
                <div class="space-y-3">
                  <div class="flex justify-between">
                    <span>Total Assets</span>
                    <span class="text-gaming-accent font-bold">$2.4M</span>
                  </div>
                  <div class="flex justify-between">
                    <span>MLG Tokens</span>
                    <span class="text-gaming-blue font-bold">8.9M</span>
                  </div>
                  <div class="flex justify-between">
                    <span>Monthly Revenue</span>
                    <span class="text-gaming-purple font-bold">$180K</span>
                  </div>
                </div>
              </div>
              
              <div class="lg:col-span-2 bg-gaming-surface rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4">🗳️ Active Proposals</h3>
                <div class="space-y-4">
                  <div class="bg-gaming-bg rounded-lg p-4">
                    <div class="flex justify-between items-start mb-3">
                      <div>
                        <h4 class="font-bold text-gaming-accent">Increase Tournament Prize Pool</h4>
                        <p class="text-sm text-gray-400">Increase monthly tournaments from $50K to $100K</p>
                      </div>
                      <div class="text-right">
                        <div class="text-sm text-gray-400">2 days left</div>
                        <div class="text-gaming-accent font-bold">78% For</div>
                      </div>
                    </div>
                    <div class="w-full bg-gray-600 rounded-full h-2 mb-3">
                      <div class="bg-gaming-accent h-2 rounded-full" style="width: 78%"></div>
                    </div>
                    <div class="flex space-x-2">
                      <button class="bg-gaming-accent text-black px-4 py-2 rounded font-bold text-sm hover:bg-green-400 transition-colors">Vote For</button>
                      <button class="bg-gaming-red px-4 py-2 rounded font-bold text-sm hover:bg-red-600 transition-colors">Vote Against</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `
        },
        
        analytics: {
          title: '📊 Analytics Dashboard - Platform Insights',
          content: `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div class="grid grid-cols-2 gap-4">
                <div class="bg-gaming-surface rounded-lg p-6 text-center">
                  <div class="text-3xl font-bold text-gaming-accent">${mlg.stats.users.toLocaleString()}</div>
                  <div class="text-sm text-gray-400">Daily Active Users</div>
                  <div class="text-xs text-gaming-accent mt-1">↑ 12% today</div>
                </div>
                
                <div class="bg-gaming-surface rounded-lg p-6 text-center">
                  <div class="text-3xl font-bold text-gaming-blue">156K</div>
                  <div class="text-sm text-gray-400">Transactions</div>
                  <div class="text-xs text-gaming-blue mt-1">↑ 8% today</div>
                </div>
                
                <div class="bg-gaming-surface rounded-lg p-6 text-center">
                  <div class="text-3xl font-bold text-gaming-yellow">$847K</div>
                  <div class="text-sm text-gray-400">Revenue (30d)</div>
                  <div class="text-xs text-gaming-yellow mt-1">↑ 24% MoM</div>
                </div>
                
                <div class="bg-gaming-surface rounded-lg p-6 text-center">
                  <div class="text-3xl font-bold text-gaming-purple">${mlg.stats.clans.toLocaleString()}</div>
                  <div class="text-sm text-gray-400">Active Clans</div>
                  <div class="text-xs text-gaming-purple mt-1">↑ 15% weekly</div>
                </div>
              </div>
              
              <div class="bg-gaming-surface rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4">🎮 Platform Health</h3>
                <div class="space-y-4">
                  <div class="flex justify-between items-center">
                    <span>Server Uptime</span>
                    <span class="text-gaming-accent font-bold">99.98%</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span>API Response Time</span>
                    <span class="text-gaming-blue font-bold">147ms</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span>Cache Hit Rate</span>
                    <span class="text-gaming-purple font-bold">87.3%</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span>Active Connections</span>
                    <span class="text-gaming-yellow font-bold">1,247</span>
                  </div>
                </div>
              </div>
            </div>
          `
        },
        
        mobile: {
          title: '📱 Mobile App - Cross-Platform Gaming',
          content: `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div class="bg-gaming-surface rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4">📱 App Performance</h3>
                <div class="space-y-4">
                  <div class="flex justify-between items-center">
                    <span>iOS Rating</span>
                    <span class="text-gaming-yellow font-bold">4.9/5 ⭐</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span>Android Rating</span>
                    <span class="text-gaming-yellow font-bold">4.8/5 ⭐</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span>Total Downloads</span>
                    <span class="text-gaming-blue font-bold">12.4K</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span>Daily Active Users</span>
                    <span class="text-gaming-purple font-bold">8,923</span>
                  </div>
                </div>
              </div>
              
              <div class="bg-gaming-surface rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4">🚀 Features</h3>
                <div class="space-y-3">
                  <div class="flex items-center justify-between">
                    <span>Phantom Wallet Integration</span>
                    <span class="text-gaming-accent">✓</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <span>Biometric Authentication</span>
                    <span class="text-gaming-accent">✓</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <span>Offline Support</span>
                    <span class="text-gaming-accent">✓</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <span>Push Notifications</span>
                    <span class="text-gaming-accent">✓</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <span>Cross-Platform Sync</span>
                    <span class="text-gaming-accent">✓</span>
                  </div>
                </div>
              </div>
            </div>
          `
        },
        
        profile: {
          title: '👤 User Profile - Gaming Identity',
          content: `
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div class="bg-gaming-surface rounded-lg p-6">
                <div class="text-center mb-6">
                  <div class="w-24 h-24 bg-gradient-to-r from-gaming-accent to-gaming-blue rounded-full mx-auto mb-4 flex items-center justify-center">
                    <i data-lucide="user" class="w-12 h-12 text-white"></i>
                  </div>
                  <h3 class="text-xl font-bold text-gaming-accent">ProGamer2024</h3>
                  <p class="text-sm text-gray-400">Elite Member</p>
                </div>
                <div class="space-y-3 text-sm">
                  <div class="flex justify-between">
                    <span>Clan</span>
                    <span class="text-gaming-purple font-bold">MLG Elite</span>
                  </div>
                  <div class="flex justify-between">
                    <span>Rank</span>
                    <span class="text-gaming-yellow font-bold">Diamond</span>
                  </div>
                  <div class="flex justify-between">
                    <span>MLG Balance</span>
                    <span class="text-gaming-accent font-bold">${mlg.wallet.balance.mlg.toLocaleString()}</span>
                  </div>
                  <div class="flex justify-between">
                    <span>Member Since</span>
                    <span class="text-gaming-blue font-bold">Jan 2024</span>
                  </div>
                </div>
              </div>
              
              <div class="lg:col-span-2 space-y-6">
                <div class="bg-gaming-surface rounded-lg p-6">
                  <h3 class="text-xl font-bold mb-4">🎮 Gaming Stats</h3>
                  <div class="grid grid-cols-2 gap-4">
                    <div class="text-center">
                      <div class="text-2xl font-bold text-gaming-accent">1,247</div>
                      <div class="text-sm text-gray-400">Votes Cast</div>
                    </div>
                    <div class="text-center">
                      <div class="text-2xl font-bold text-gaming-blue">89</div>
                      <div class="text-sm text-gray-400">Content Created</div>
                    </div>
                    <div class="text-center">
                      <div class="text-2xl font-bold text-gaming-purple">156</div>
                      <div class="text-sm text-gray-400">Clan Activities</div>
                    </div>
                    <div class="text-center">
                      <div class="text-2xl font-bold text-gaming-yellow">23</div>
                      <div class="text-sm text-gray-400">DAO Proposals</div>
                    </div>
                  </div>
                </div>
                
                <div class="bg-gaming-surface rounded-lg p-6">
                  <h3 class="text-xl font-bold mb-4">🏆 Recent Achievements</h3>
                  <div class="space-y-3">
                    <div class="flex items-center justify-between p-3 bg-gaming-bg rounded-lg">
                      <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-gaming-yellow rounded-full flex items-center justify-center">
                          <span class="text-black font-bold text-sm">🏆</span>
                        </div>
                        <span>Top Voter of the Week</span>
                      </div>
                      <span class="text-gaming-yellow text-sm">2 days ago</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-gaming-bg rounded-lg">
                      <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-gaming-purple rounded-full flex items-center justify-center">
                          <span class="text-white font-bold text-sm">⭐</span>
                        </div>
                        <span>Clan MVP</span>
                      </div>
                      <span class="text-gaming-purple text-sm">1 week ago</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-gaming-bg rounded-lg">
                      <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-gaming-accent rounded-full flex items-center justify-center">
                          <span class="text-black font-bold text-sm">🎮</span>
                        </div>
                        <span>Content Creator</span>
                      </div>
                      <span class="text-gaming-accent text-sm">2 weeks ago</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `
        },
        
        // Add section name aliases for navigation compatibility
        'vote-vault': null, // Will be set below
        'content-hub': null // Will be set below
      };
      
      // Set up aliases after sections object is defined
      sections['vote-vault'] = sections.voting;
      sections['content-hub'] = sections.content;
      
      // Handle section aliases and get actual section
      let selectedSection = sections[section];
      
      // Handle dashboard vs dynamic sections
      if (section === 'dashboard') {
        // Show all static sections, hide dynamic content
        staticSections.forEach(section => {
          if (section) section.classList.remove('hidden');
        });
        if (dynamicContentSection) dynamicContentSection.classList.add('hidden');
        
        // Scroll to dashboard
        const dashboardSection = document.getElementById('dashboard');
        if (dashboardSection) {
          dashboardSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Show notification
        if (window.mlg) {
          window.mlg.showNotification('Loaded Dashboard', 'success');
        }
        
        // Update breadcrumb
        const currentSection = document.getElementById('current-section');
        if (currentSection) currentSection.textContent = 'Dashboard';
        
        return;
      }
      
      if (selectedSection) {
        // Hide all static content, show dynamic content
        staticSections.forEach(section => {
          if (section) section.classList.add('hidden');
        });
        if (dynamicContentSection) dynamicContentSection.classList.remove('hidden');
        
        contentArea.innerHTML = `
          <h2 class="text-3xl font-bold mb-8 text-center">${selectedSection.title}</h2>
          ${selectedSection.content}
        `;
        
        // Re-initialize icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
        
        // Scroll to content
        dynamicContentSection.scrollIntoView({ behavior: 'smooth' });
        
        // Show notification
        if (window.mlg) {
          window.mlg.showNotification(`Loaded ${section.charAt(0).toUpperCase() + section.slice(1)} section`, 'success');
        }
        
        // Update breadcrumb
        const currentSection = document.getElementById('current-section');
        if (currentSection) currentSection.textContent = selectedSection.title.replace(/[🎮📊🏛️👤🗳️📱🎵]/g, '').trim();
      }
    }
    
    // Initialize platform when DOM is loaded
    document.addEventListener('DOMContentLoaded', async () => {
      // Initialize the original MLG platform
      window.mlg = new MLGPlatform();
      
      // Initialize the new module loading system
      try {
        console.log('📦 Initializing Module Loader...');
        const moduleLoader = new ModuleLoader();
        const routerLoader = new RouterLoader();
        
        // Initialize router loader with module loader
        routerLoader.init(moduleLoader);
        
        // Add error handler for failed external dependencies
        moduleLoader.addErrorHandler(({ error, moduleName, src }) => {
          if (src.includes('cdn.') || src.includes('unpkg.')) {
            window.mlg?.showNotification(`External dependency failed: ${moduleName}`, 'warning');
          }
        });
        
        // Load SPA router system
        console.log('🧭 Loading SPA Router System...');
        await routerLoader.loadRouter();
        
        console.log('✅ Module loading completed successfully!');
        window.mlg.showNotification('🧭 Advanced SPA Router Active!', 'success');
        
        // Hide initial loading state
        const initialState = document.querySelector('.router-initial-state');
        if (initialState) {
          initialState.style.display = 'none';
        }
        
      } catch (error) {
        console.error('❌ Module loading failed:', error);
        window.mlg.showNotification('Router initialization failed, using fallback', 'warning');
        
        // Show error in router view
        const routerView = document.getElementById('router-view');
        if (routerView) {
          routerView.innerHTML = `
            <div class="text-center py-12">
              <div class="text-gaming-red text-4xl mb-4">⚠️</div>
              <h3 class="text-xl font-bold text-gaming-red mb-2">Router System Error</h3>
              <p class="text-gray-400 mb-4">Failed to load the advanced navigation system</p>
              <div class="text-sm text-gray-500 mb-4">${error.message}</div>
              <button onclick="window.location.reload()" class="bg-gaming-accent text-black px-4 py-2 rounded hover:bg-green-400 transition-colors">
                Reload Page
              </button>
            </div>
          `;
        }
        
        // Fallback to the original navigation system
        window.router = {
          push: (path) => {
            const section = path.replace('/', '');
            loadSection(section || 'dashboard');
          },
          back: () => window.history.back(),
          forward: () => window.history.forward(),
          replace: (path) => window.router.push(path)
        };
        
        // Initialize with dashboard view and ensure proper state
        console.log('🏠 Setting up initial dashboard view...');
        loadSection('dashboard');
      }
    });
    
    // Global error handling with user feedback
    window.addEventListener('error', (event) => {
      console.error('Platform error:', event.error);
      
      // Show error to user in development
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        window.mlg?.showNotification(`Script error: ${event.error.message}`, 'error');
      }
    });
    
    // Handle unhandled promise rejections
    window.addEventListener('unhandledrejection', (event) => {
      console.error('Unhandled promise rejection:', event.reason);
      
      // Show error to user in development
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        window.mlg?.showNotification(`Promise rejection: ${event.reason}`, 'error');
      }
      
      // Prevent the default browser console error
      event.preventDefault();
    });
    
    // Listen for router ready event
    window.addEventListener('router:ready', (event) => {
      console.log('🧭 Router system fully operational:', event.detail);
    });
    
    // ========================================================================================
    // MLG Loading System Demo Functions
    // ========================================================================================
    
    // Get demo container
    function getDemoContainer() {
      return document.getElementById('loading-demo-area');
    }
    
    // Demo functions for each loading type
    function demoXboxLoader() {
      const container = getDemoContainer();
      window.MLG?.show(container, {
        type: 'dashboard',
        message: 'Loading Xbox 360 Dashboard...',
        progress: true,
        duration: 4000
      });
    }
    
    function demoWalletConnection() {
      const container = getDemoContainer();
      window.MLG?.show(container, {
        type: 'wallet-phantom',
        estimatedTime: '3-5 seconds',
        securitySteps: true,
        duration: 5000
      });
    }
    
    function demoVoteBurn() {
      const container = getDemoContainer();
      window.MLG?.show(container, {
        type: 'vote-burn',
        amount: 25,
        symbol: 'MLG',
        contentTitle: 'Epic Gaming Montage',
        type: 'upvote',
        duration: 6000
      });
    }
    
    function demoFileUpload() {
      const container = getDemoContainer();
      window.MLG?.show(container, {
        type: 'upload-single',
        fileName: 'gameplay_highlight.mp4',
        fileSize: '24.7 MB',
        fileType: 'video',
        uploadSpeed: '3.2 MB/s',
        duration: 8000
      });
    }
    
    function demoPageTransition() {
      const container = getDemoContainer();
      const currentContent = container.innerHTML;
      const newContent = `
        <div class="transition-demo-content text-center py-20">
          <div class="text-6xl mb-6">🎬</div>
          <h3 class="text-3xl font-bold text-gaming-accent mb-4">Transition Complete!</h3>
          <p class="text-xl text-gray-300 mb-8">This content was loaded with Xbox-style blade transition</p>
          <button onclick="clearDemo()" class="bg-gaming-accent text-black px-6 py-3 rounded-lg font-bold hover:bg-green-400 transition-colors">
            Reset Demo
          </button>
        </div>
      `;
      
      window.MLG?.transition('blade', container, newContent, {
        direction: 'right',
        duration: 800
      });
    }
    
    function demoLiveData() {
      const container = getDemoContainer();
      container.innerHTML = `
        <div class="live-data-demo text-center py-20">
          <div class="text-6xl mb-6">📊</div>
          <h3 class="text-3xl font-bold text-gaming-accent mb-8">Live Data Effects</h3>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
            <div class="stat-card bg-gaming-surface rounded-lg p-6">
              <div class="stat-label text-gray-400 mb-2">Online Users</div>
              <div id="live-users-demo" class="stat-value text-3xl font-bold text-gaming-accent">2,847</div>
            </div>
            
            <div class="stat-card bg-gaming-surface rounded-lg p-6">
              <div class="stat-label text-gray-400 mb-2">Active Votes</div>
              <div id="live-votes-demo" class="stat-value text-3xl font-bold text-gaming-blue">1,234</div>
            </div>
            
            <div class="stat-card bg-gaming-surface rounded-lg p-6">
              <div class="stat-label text-gray-400 mb-2">MLG Burned</div>
              <div id="live-burned-demo" class="stat-value text-3xl font-bold text-gaming-purple">45.2K</div>
            </div>
          </div>
          
          <button onclick="clearDemo()" class="mt-8 bg-gaming-accent text-black px-6 py-3 rounded-lg font-bold hover:bg-green-400 transition-colors">
            Stop Live Updates
          </button>
        </div>
      `;
      
      // Start live data effects
      const usersEl = document.getElementById('live-users-demo');
      const votesEl = document.getElementById('live-votes-demo');
      const burnedEl = document.getElementById('live-burned-demo');
      
      window.MLG?.startPulseEffect(usersEl, { intensity: 'medium', color: '#00ff88' });
      window.MLG?.startPulseEffect(votesEl, { intensity: 'low', color: '#3b82f6' });
      window.MLG?.startPulseEffect(burnedEl, { intensity: 'high', color: '#8b5cf6' });
      
      window.MLG?.startLiveDataTicker(usersEl, () => 2847 + Math.floor(Math.random() * 50 - 25), { interval: 2000, animation: 'glow' });
      window.MLG?.startLiveDataTicker(votesEl, () => 1234 + Math.floor(Math.random() * 20 - 10), { interval: 3000, animation: 'slide' });
      window.MLG?.startLiveDataTicker(burnedEl, () => (45.2 + Math.random() * 2 - 1).toFixed(1) + 'K', { interval: 1500, animation: 'fade' });
    }
    
    function demoSkeleton() {
      const container = getDemoContainer();
      window.MLG?.show(container, {
        type: 'skeleton',
        lines: 6,
        avatar: true,
        cards: 3,
        duration: 3000
      });
    }
    
    function demoErrorState() {
      const container = getDemoContainer();
      window.MLG?.showError(container, new Error('Failed to connect to game servers'), {
        title: 'Connection Timeout',
        retry: true,
        onRetry: () => {
          console.log('Retry clicked');
          clearDemo();
        },
        support: true
      });
    }
    
    function demoUploadQueue() {
      const container = getDemoContainer();
      window.MLG?.show(container, {
        type: 'upload-queue',
        files: [
          { name: 'tournament_highlight.mp4', size: '48.2 MB', type: 'video' },
          { name: 'gameplay_screenshot.png', size: '3.4 MB', type: 'image' },
          { name: 'victory_montage.mp4', size: '67.8 MB', type: 'video' },
          { name: 'team_photo.jpg', size: '2.1 MB', type: 'image' }
        ],
        totalSize: '121.5 MB'
      });
    }
    
    function demoVoteLimit() {
      const container = getDemoContainer();
      window.MLG?.show(container, {
        type: 'vote-limit',
        votesUsed: 4,
        dailyLimit: 4,
        resetTime: '18h 32m',
        burnCost: 25,
        symbol: 'MLG',
        balance: 850
      });
    }
    
    function demoNetworkStatus() {
      const container = getDemoContainer();
      window.MLG?.show(container, {
        type: 'wallet-network',
        network: 'Solana Mainnet-Beta',
        rpcEndpoint: 'api.mainnet-beta.solana.com',
        duration: 3500
      });
    }
    
    function clearDemo() {
      const container = getDemoContainer();
      
      // Stop any live data effects
      const liveElements = container.querySelectorAll('[id*="live-"]');
      liveElements.forEach(el => {
        window.MLG?.stopPulseEffect(el);
        window.MLG?.stopLiveDataTicker(el);
      });
      
      // Hide all loaders
      window.MLG?.hideAll();
      
      // Reset to placeholder
      container.innerHTML = `
        <div class="demo-placeholder">
          <div class="placeholder-icon text-6xl mb-4">🎮</div>
          <h3 class="text-2xl font-bold text-gaming-accent mb-4">MLG Loading System Demo</h3>
          <p class="text-gray-400 text-lg mb-8">
            Click any button above to see our Xbox 360-inspired loading states in action!
          </p>
          <div class="demo-stats grid grid-cols-1 md:grid-cols-3 gap-6 max-w-2xl mx-auto">
            <div class="stat-box">
              <div class="stat-value text-gaming-accent">12+</div>
              <div class="stat-label">Loading Types</div>
            </div>
            <div class="stat-box">
              <div class="stat-value text-gaming-blue">5</div>
              <div class="stat-label">Transition Effects</div>
            </div>
            <div class="stat-box">
              <div class="stat-value text-gaming-purple">Xbox 360</div>
              <div class="stat-label">Style Theme</div>
            </div>
          </div>
        </div>
      `;
    }
    
    // Make demo functions globally available
    window.demoXboxLoader = demoXboxLoader;
    window.demoWalletConnection = demoWalletConnection;
    window.demoVoteBurn = demoVoteBurn;
    window.demoFileUpload = demoFileUpload;
    window.demoPageTransition = demoPageTransition;
    window.demoLiveData = demoLiveData;
    window.demoSkeleton = demoSkeleton;
    window.demoErrorState = demoErrorState;
    window.demoUploadQueue = demoUploadQueue;
    window.demoVoteLimit = demoVoteLimit;
    window.demoNetworkStatus = demoNetworkStatus;
    window.clearDemo = clearDemo;
    
  </script>
  
  <style>
    /* Demo Section Styles */
    .demo-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem;
      background: rgba(26, 26, 46, 0.8);
      border: 1px solid rgba(0, 255, 136, 0.3);
      border-radius: 8px;
      color: white;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      min-height: 80px;
    }
    
    .demo-btn:hover {
      background: rgba(0, 255, 136, 0.1);
      border-color: rgba(0, 255, 136, 0.6);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 255, 136, 0.2);
    }
    
    .demo-btn.clear-btn {
      background: rgba(239, 68, 68, 0.8);
      border-color: rgba(239, 68, 68, 0.3);
    }
    
    .demo-btn.clear-btn:hover {
      background: rgba(239, 68, 68, 0.1);
      border-color: rgba(239, 68, 68, 0.6);
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
    }
    
    .demo-btn .btn-icon {
      font-size: 1.5rem;
    }
    
    .demo-btn .btn-text {
      font-size: 0.75rem;
    }
    
    .demo-container {
      margin-bottom: 3rem;
    }
    
    .stat-box {
      text-align: center;
      padding: 1rem;
      background: rgba(26, 26, 46, 0.6);
      border-radius: 8px;
      border: 1px solid rgba(0, 255, 136, 0.2);
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    
    .stat-label {
      font-size: 0.875rem;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .feature-card {
      background: rgba(26, 26, 46, 0.6);
      border: 1px solid rgba(0, 255, 136, 0.2);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .feature-card:hover {
      border-color: rgba(0, 255, 136, 0.4);
      background: rgba(26, 26, 46, 0.8);
      transform: translateY(-2px);
    }
    
    .feature-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }
    
    .feature-title {
      font-size: 1.25rem;
      font-weight: bold;
      color: #00ff88;
      margin-bottom: 1rem;
    }
    
    .feature-description {
      font-size: 0.875rem;
      color: #9ca3af;
      line-height: 1.6;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .demo-btn {
        min-height: 70px;
        padding: 0.75rem 0.5rem;
      }
      
      .demo-btn .btn-icon {
        font-size: 1.25rem;
      }
      
      .demo-btn .btn-text {
        font-size: 0.7rem;
      }
      
      .stat-value {
        font-size: 1.5rem;
      }
      
      .feature-card {
        padding: 1.5rem;
      }
    }
  </style>

  <!-- PWA Initialization Scripts -->
  <script type="module">
    // Import PWA modules
    import('../../src/utils/pwa/pwa-manager.js').then(({ PWAManager }) => {
      console.log('[PWA] Manager loaded and initialized');
    }).catch(error => {
      console.error('[PWA] Failed to load PWA manager:', error);
    });

    import('../../src/utils/pwa/pwa-security.js').then(({ PWASecurityManager }) => {
      console.log('[PWA] Security manager loaded');
    }).catch(error => {
      console.error('[PWA] Failed to load PWA security:', error);
    });

    import('../../src/utils/pwa/offline-data-manager.js').then(({ OfflineDataManager }) => {
      console.log('[PWA] Offline data manager loaded');
    }).catch(error => {
      console.error('[PWA] Failed to load offline data manager:', error);
    });

    import('../../src/utils/pwa/pwa-performance-monitor.js').then(({ PWAPerformanceMonitor }) => {
      console.log('[PWA] Performance monitor loaded');
    }).catch(error => {
      console.error('[PWA] Failed to load performance monitor:', error);
    });

    // Service Worker Registration
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', async () => {
        try {
          const registration = await navigator.serviceWorker.register('/sw.js', {
            scope: '/'
          });
          
          console.log('[PWA] Service Worker registered:', registration.scope);
          
          // Handle updates
          registration.addEventListener('updatefound', () => {
            const newWorker = registration.installing;
            console.log('[PWA] New Service Worker available');
            
            newWorker.addEventListener('statechange', () => {
              if (newWorker.state === 'installed') {
                if (navigator.serviceWorker.controller) {
                  console.log('[PWA] New content is available; please refresh.');
                } else {
                  console.log('[PWA] Content is cached for offline use.');
                }
              }
            });
          });
        } catch (error) {
          console.error('[PWA] Service Worker registration failed:', error);
        }
      });
    }

    // PWA Install Prompt Handler
    let deferredPrompt;
    
    window.addEventListener('beforeinstallprompt', (event) => {
      event.preventDefault();
      deferredPrompt = event;
      console.log('[PWA] Install prompt ready');
      
      // Show install button if needed
      showInstallButton();
    });

    window.addEventListener('appinstalled', (event) => {
      console.log('[PWA] App was installed');
      deferredPrompt = null;
      hideInstallButton();
    });

    function showInstallButton() {
      // Custom install button logic would go here
      console.log('[PWA] Install button should be shown');
    }

    function hideInstallButton() {
      console.log('[PWA] Install button should be hidden');
    }

    // Performance monitoring
    window.addEventListener('load', () => {
      // Monitor page load performance
      if (window.pwaPerformanceMonitor) {
        window.pwaPerformanceMonitor.generatePerformanceReport();
      }
    });

    // Online/Offline handling
    window.addEventListener('online', () => {
      console.log('[PWA] Connection restored');
      document.body.classList.remove('offline');
      
      // Trigger background sync if available
      if (window.pwaManager) {
        window.pwaManager.handleConnectionRestore();
      }
    });

    window.addEventListener('offline', () => {
      console.log('[PWA] Connection lost');
      document.body.classList.add('offline');
      
      if (window.pwaManager) {
        window.pwaManager.handleConnectionLost();
      }
    });

    // PWA Debug Commands (Development)
    if (window.location.hostname === 'localhost') {
      window.pwaDebug = {
        showSecurityDashboard: () => window.pwaSecurityManager?.showSecurityDashboard(),
        showPerformanceDashboard: () => window.pwaPerformanceMonitor?.showPerformanceDashboard(),
        getOfflineStats: () => window.offlineDataManager?.getStorageStats(),
        clearCache: async () => {
          const cacheNames = await caches.keys();
          await Promise.all(cacheNames.map(name => caches.delete(name)));
          console.log('[PWA Debug] All caches cleared');
        },
        forceUpdate: () => window.pwaManager?.updateApp()
      };
      
      console.log('[PWA Debug] Debug commands available:', Object.keys(window.pwaDebug));
    }
  </script>

  <!-- Offline Styles -->
  <style>
    .offline .connection-required {
      opacity: 0.5;
      pointer-events: none;
    }
    
    .offline .offline-indicator {
      display: block !important;
    }
    
    .offline-indicator {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(45deg, #ef4444, #fbbf24);
      color: white;
      text-align: center;
      padding: 0.5rem;
      z-index: 1000;
      font-size: 0.875rem;
    }

    /* PWA-specific styles */
    @media (display-mode: standalone) {
      .pwa-only {
        display: block !important;
      }
      
      .browser-only {
        display: none !important;
      }
      
      /* Add padding for status bar on mobile */
      .standalone-header {
        padding-top: env(safe-area-inset-top);
      }
    }
    
    /* Installation prompt styles */
    .pwa-install-prompt,
    .pwa-update-prompt,
    .pwa-security-warning,
    .pwa-permission-guidance {
      animation: slideUp 0.3s ease-out;
    }
    
    @keyframes slideUp {
      from {
        transform: translateY(100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
  </style>

  <!-- Offline Indicator -->
  <div class="offline-indicator">
    <i data-lucide="wifi-off" class="inline w-4 h-4 mr-2"></i>
    You're offline - Some features may not be available
    <a href="/pages/offline.html" class="underline ml-2">View offline features</a>
  </div>
</body>
</html>