<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DAO Governance - Democratic Platform Control | MLG.clan</title>
  
  <!-- Meta Tags -->
  <meta name="description" content="DAO Governance - Community-driven governance with multi-signature proposals and transparent treasury management.">
  <meta name="keywords" content="DAO, governance, blockchain, democracy, proposals, treasury, MLG, community">
  <meta name="author" content="MLG.clan Development Team">
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://unpkg.com https://cdn.socket.io; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; img-src 'self' data: blob: https:; connect-src 'self' wss: https: ws://localhost:3000; frame-src 'self' https://www.youtube.com https://player.twitch.tv https://www.tiktok.com; font-src 'self' data:;">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèõÔ∏è</text></svg>">
  
  <!-- External Dependencies -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  
  <!-- Socket.IO for Real-time Updates -->
  <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
  
  <!-- Solana Web3.js -->
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  
  <!-- API Client -->
  <script src="src/js/api-client.js"></script>
  <script src="src/js/mlg-websocket-manager.js"></script>
  
  <!-- Voting Integration System -->
  <script type="module">
    import { getVotingIntegration, initializeVotingIntegration } from './src/js/mlg-voting-integration.js';
    import { getWalletManager } from './src/wallet/phantom-wallet.js';
    
    // Make voting system available globally for this page
    window.getVotingIntegration = getVotingIntegration;
    window.getWalletManager = getWalletManager;
    
    // Initialize voting when page loads
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        console.log('üèõÔ∏è Initializing voting system for DAO page...');
        
        // Initialize wallet manager if not already available
        if (!window.phantomWalletManager) {
          window.phantomWalletManager = getWalletManager();
        }
        
        // Initialize voting integration
        window.MLGVotingIntegration = await initializeVotingIntegration();
        console.log('‚úÖ DAO voting system ready');
        
      } catch (error) {
        console.error('‚ùå Failed to initialize DAO voting system:', error);
      }
    });
  </script>

  <!-- Tailwind Configuration -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'gaming-bg': '#0a0a0f',
            'gaming-surface': '#1a1a2e',
            'gaming-accent': '#00ff88',
            'gaming-purple': '#8b5cf6',
            'gaming-blue': '#3b82f6',
            'gaming-yellow': '#fbbf24',
            'gaming-red': '#ef4444'
          },
          animation: {
            'pulse-neon': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'glow': 'glow 2s ease-in-out infinite alternate',
            'float': 'float 6s ease-in-out infinite'
          }
        }
      }
    }
  </script>
  
  <style>
    /* Gaming Theme Styles */
    :root {
      --neon-green: #00ff88;
      --neon-blue: #00ffff;
      --neon-purple: #8b5cf6;
      --dark-bg: #0a0a0f;
      --card-bg: #1a1a2e;
    }
    
    body {
      background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0a0a0f 100%);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow-x: hidden;
    }
    
    .neon-glow {
      box-shadow: 0 0 10px var(--neon-green), 0 0 20px var(--neon-green), 0 0 30px var(--neon-green);
      border: 1px solid var(--neon-green);
    }
    
    .card-glow {
      background: rgba(26, 26, 46, 0.95);
      border: 1px solid rgba(0, 255, 136, 0.2);
      backdrop-filter: blur(15px);
      transition: all 0.3s ease;
    }
    
    .card-glow:hover {
      border-color: rgba(0, 255, 136, 0.5);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.1);
      transform: translateY(-2px);
    }
    
    .dao-card {
      background: rgba(26, 26, 46, 0.95);
      border: 1px solid rgba(251, 191, 36, 0.2);
      backdrop-filter: blur(15px);
      transition: all 0.3s ease;
    }
    
    .dao-card:hover {
      border-color: rgba(251, 191, 36, 0.5);
      box-shadow: 0 0 20px rgba(251, 191, 36, 0.1);
      transform: translateY(-2px);
    }
    
    .status-online {
      position: relative;
    }
    
    .status-online::before {
      content: '';
      position: absolute;
      top: -2px;
      right: -2px;
      width: 12px;
      height: 12px;
      background: var(--neon-green);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    @keyframes glow {
      from { box-shadow: 0 0 10px var(--neon-green); }
      to { box-shadow: 0 0 20px var(--neon-green), 0 0 30px var(--neon-green); }
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
      100% { transform: translateY(0px); }
    }
    
    .progress-bar {
      background: linear-gradient(to right, #00ff88, #3b82f6);
      transition: width 0.3s ease;
    }
  </style>
</head>
<body class="bg-gaming-bg text-white min-h-screen">
  
  <!-- Navigation Header -->
  <nav class="bg-black bg-opacity-60 backdrop-blur-md border-b border-gaming-accent border-opacity-20 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <a href="index.html" onclick="handleNavigation(event, 'index.html')" class="text-2xl font-bold text-gaming-accent flex items-center space-x-2 hover:text-green-400 transition-colors">
              <span class="animate-pulse">üéÆ</span>
              <span>MLG.clan</span>
            </a>
          </div>
          <div class="hidden md:block ml-10">
            <div class="flex items-baseline space-x-4">
              <a href="index.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'index.html')">Dashboard</a>
              <a href="voting.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'voting.html')">Vote Vault</a>
              <a href="clans.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'clans.html')">Clans</a>
              <a href="content.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'content.html')">Content Hub</a>
              <a href="dao.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium bg-gaming-yellow text-black transition-colors" onclick="handleNavigation(event, 'dao.html')">DAO</a>
              <a href="analytics.html" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-gaming-accent hover:bg-gaming-surface transition-colors" onclick="handleNavigation(event, 'analytics.html')">Analytics</a>
            </div>
          </div>
        </div>
        
        <div class="flex items-center space-x-4">
          <!-- System Status -->
          <div id="system-status" class="flex items-center space-x-2">
            <div class="status-online">
              <i data-lucide="activity" class="w-4 h-4 text-gaming-accent"></i>
            </div>
            <span class="text-sm text-gaming-accent font-medium">All Systems Online</span>
          </div>
          
          <!-- Wallet Connection -->
          <button id="wallet-connect" class="bg-gaming-purple hover:bg-purple-600 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2">
            <i data-lucide="wallet" class="w-4 h-4"></i>
            <span>Connect Phantom</span>
          </button>
          
          <!-- User Info (Hidden by default) -->
          <div id="user-info" class="hidden flex items-center space-x-3">
            <div class="flex items-center space-x-2 bg-gaming-surface px-3 py-1 rounded-lg">
              <div class="w-6 h-6 bg-gradient-to-r from-gaming-accent to-gaming-blue rounded-full"></div>
              <span id="user-address" class="text-sm font-mono"></span>
            </div>
            <div class="text-right">
              <div class="text-xs text-gray-400">MLG Balance</div>
              <div id="mlg-balance" class="text-sm font-bold text-gaming-yellow">0</div>
            </div>
            <a href="profile.html" onclick="handleNavigation(event, 'profile.html')" class="text-gray-300 hover:text-gaming-accent transition-colors">
              <i data-lucide="user" class="w-5 h-5"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- DAO Header -->
  <section class="relative py-16 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-r from-gaming-bg via-gaming-surface to-gaming-bg opacity-50"></div>
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-5xl font-bold mb-6 text-gaming-yellow animate-float">
        üèõÔ∏è DAO Governance
      </h1>
      <p class="text-xl text-gray-300 mb-8 max-w-3xl mx-auto">
        Community-driven governance with multi-signature proposals and transparent treasury management.
      </p>
      
      <!-- DAO Stats -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
        <div class="card-glow rounded-lg p-6">
          <div class="text-3xl font-bold text-gaming-yellow" id="treasury-value">$2.4M</div>
          <div class="text-sm text-gray-400">Treasury</div>
        </div>
        <div class="card-glow rounded-lg p-6">
          <div class="text-3xl font-bold text-gaming-blue" id="active-proposals">7</div>
          <div class="text-sm text-gray-400">Active Proposals</div>
        </div>
        <div class="card-glow rounded-lg p-6">
          <div class="text-3xl font-bold text-gaming-accent" id="participation">67%</div>
          <div class="text-sm text-gray-400">Participation</div>
        </div>
        <div class="card-glow rounded-lg p-6">
          <div class="text-3xl font-bold text-gaming-purple" id="total-voters">12,847</div>
          <div class="text-sm text-gray-400">Total Voters</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      
      <!-- Treasury Overview -->
      <div class="mb-16">
        <h2 class="text-3xl font-bold text-gaming-yellow mb-8 text-center">Treasury Overview</h2>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          
          <!-- Treasury Balance -->
          <div class="dao-card rounded-xl p-8">
            <div class="text-center mb-6">
              <div class="w-16 h-16 bg-gaming-yellow rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="coins" class="w-8 h-8 text-black"></i>
              </div>
              <h3 class="text-2xl font-bold text-gaming-yellow">Total Assets</h3>
            </div>
            
            <div class="space-y-4">
              <div class="flex justify-between items-center">
                <span class="text-gray-300">USD Value</span>
                <span class="text-2xl font-bold text-gaming-yellow">$2,400,000</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-300">MLG Tokens</span>
                <span class="text-gaming-blue font-bold">8.9M MLG</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-300">SOL Balance</span>
                <span class="text-gaming-purple font-bold">12,450 SOL</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-300">USDC Reserve</span>
                <span class="text-gaming-accent font-bold">850,000 USDC</span>
              </div>
            </div>
          </div>

          <!-- Revenue Streams -->
          <div class="dao-card rounded-xl p-8">
            <div class="text-center mb-6">
              <div class="w-16 h-16 bg-gaming-accent rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="trending-up" class="w-8 h-8 text-black"></i>
              </div>
              <h3 class="text-2xl font-bold text-gaming-accent">Revenue Sources</h3>
            </div>
            
            <div class="space-y-4">
              <div class="flex justify-between items-center">
                <span class="text-gray-300">Vote Vault Burns</span>
                <span class="text-gaming-red font-bold">$45K/mo</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-300">Clan Staking Fees</span>
                <span class="text-gaming-purple font-bold">$32K/mo</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-300">Tournament Entry</span>
                <span class="text-gaming-blue font-bold">$28K/mo</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-300">NFT Royalties</span>
                <span class="text-gaming-yellow font-bold">$18K/mo</span>
              </div>
            </div>
            
            <div class="mt-6 pt-4 border-t border-gray-600">
              <div class="flex justify-between items-center">
                <span class="text-white font-bold">Total Monthly</span>
                <span class="text-2xl font-bold text-gaming-accent">$123K</span>
              </div>
            </div>
          </div>

          <!-- Spending Allocation -->
          <div class="dao-card rounded-xl p-8">
            <div class="text-center mb-6">
              <div class="w-16 h-16 bg-gaming-blue rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="pie-chart" class="w-8 h-8 text-white"></i>
              </div>
              <h3 class="text-2xl font-bold text-gaming-blue">Budget Allocation</h3>
            </div>
            
            <div class="space-y-4">
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-gray-300">Development</span>
                  <span class="text-gaming-blue font-bold">40%</span>
                </div>
                <div class="w-full bg-gray-600 rounded-full h-2">
                  <div class="progress-bar h-2 rounded-full" style="width: 40%"></div>
                </div>
              </div>
              
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-gray-300">Marketing</span>
                  <span class="text-gaming-purple font-bold">25%</span>
                </div>
                <div class="w-full bg-gray-600 rounded-full h-2">
                  <div class="bg-gaming-purple h-2 rounded-full" style="width: 25%"></div>
                </div>
              </div>
              
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-gray-300">Operations</span>
                  <span class="text-gaming-yellow font-bold">20%</span>
                </div>
                <div class="w-full bg-gray-600 rounded-full h-2">
                  <div class="bg-gaming-yellow h-2 rounded-full" style="width: 20%"></div>
                </div>
              </div>
              
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-gray-300">Reserve</span>
                  <span class="text-gaming-red font-bold">15%</span>
                </div>
                <div class="w-full bg-gray-600 rounded-full h-2">
                  <div class="bg-gaming-red h-2 rounded-full" style="width: 15%"></div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Active Proposals -->
      <div class="mb-16">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-3xl font-bold text-gaming-accent">Active Proposals</h2>
          <button class="bg-gaming-accent hover:bg-green-400 text-black px-6 py-3 rounded-lg font-bold transition-colors">
            Create Proposal
          </button>
        </div>

        <div class="space-y-6">
          
          <!-- Proposal 1 -->
          <div class="card-glow rounded-xl p-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
              
              <div class="lg:col-span-2">
                <div class="flex items-start justify-between mb-4">
                  <div>
                    <h3 class="text-xl font-bold text-white mb-2">Increase Tournament Prize Pool to $100K Monthly</h3>
                    <p class="text-gray-400 mb-4">Proposal to double our monthly tournament prize pool from $50K to $100K to attract more competitive players and increase platform engagement.</p>
                    <div class="flex items-center space-x-4 text-sm text-gray-500">
                      <span>Proposed by: CommunityLeader</span>
                      <span>‚Ä¢</span>
                      <span>2 days remaining</span>
                      <span>‚Ä¢</span>
                      <span>Proposal #47</span>
                    </div>
                  </div>
                </div>
                
                <div class="space-y-3">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-400">Voting Progress</span>
                    <span class="text-gaming-accent font-bold">78% For ‚Ä¢ 22% Against</span>
                  </div>
                  <div class="w-full bg-gray-600 rounded-full h-3">
                    <div class="bg-gaming-accent h-3 rounded-full" style="width: 78%"></div>
                  </div>
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-400 vote-count" data-content-id="proposal-1-total">8,924 total votes</span>
                    <span class="text-gray-400">Quorum: 85% reached</span>
                  </div>
                </div>
              </div>

              <div class="flex flex-col justify-center space-y-4">
                <div class="text-center mb-4">
                  <div class="text-3xl font-bold text-gaming-accent mb-1 vote-count" data-content-id="proposal-1-support">78%</div>
                  <div class="text-sm text-gray-400">Support</div>
                </div>
                <div class="space-y-2">
                  <button class="w-full bg-gaming-accent hover:bg-green-400 text-black px-6 py-3 rounded-lg font-bold transition-colors vote-btn" data-content-id="proposal-1-for" data-cost="10" data-vote="for" data-proposal="1">
                    Vote For (Cost: 10 MLG)
                  </button>
                  <button class="w-full bg-gaming-red hover:bg-red-600 px-6 py-3 rounded-lg font-bold transition-colors vote-btn" data-content-id="proposal-1-against" data-cost="10" data-vote="against" data-proposal="1">
                    Vote Against (Cost: 10 MLG)
                  </button>
                </div>
              </div>

            </div>
          </div>

          <!-- Proposal 2 -->
          <div class="card-glow rounded-xl p-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
              
              <div class="lg:col-span-2">
                <div class="flex items-start justify-between mb-4">
                  <div>
                    <h3 class="text-xl font-bold text-white mb-2">Implement NFT Marketplace Integration</h3>
                    <p class="text-gray-400 mb-4">Add native NFT marketplace functionality to allow trading of gaming assets, collectibles, and clan badges directly on the platform.</p>
                    <div class="flex items-center space-x-4 text-sm text-gray-500">
                      <span>Proposed by: DevTeam</span>
                      <span>‚Ä¢</span>
                      <span>5 days remaining</span>
                      <span>‚Ä¢</span>
                      <span>Proposal #46</span>
                    </div>
                  </div>
                </div>
                
                <div class="space-y-3">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-400">Voting Progress</span>
                    <span class="text-gaming-blue font-bold">65% For ‚Ä¢ 35% Against</span>
                  </div>
                  <div class="w-full bg-gray-600 rounded-full h-3">
                    <div class="bg-gaming-blue h-3 rounded-full" style="width: 65%"></div>
                  </div>
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-400 vote-count" data-content-id="proposal-2-total">6,342 total votes</span>
                    <span class="text-gray-400">Quorum: 62% reached</span>
                  </div>
                </div>
              </div>

              <div class="flex flex-col justify-center space-y-4">
                <div class="text-center mb-4">
                  <div class="text-3xl font-bold text-gaming-blue mb-1 vote-count" data-content-id="proposal-2-support">65%</div>
                  <div class="text-sm text-gray-400">Support</div>
                </div>
                <div class="space-y-2">
                  <button class="w-full bg-gaming-accent hover:bg-green-400 text-black px-6 py-3 rounded-lg font-bold transition-colors vote-btn" data-content-id="proposal-2-for" data-cost="10" data-vote="for" data-proposal="2">
                    Vote For (Cost: 10 MLG)
                  </button>
                  <button class="w-full bg-gaming-red hover:bg-red-600 px-6 py-3 rounded-lg font-bold transition-colors vote-btn" data-content-id="proposal-2-against" data-cost="10" data-vote="against" data-proposal="2">
                    Vote Against (Cost: 10 MLG)
                  </button>
                </div>
              </div>

            </div>
          </div>

          <!-- Proposal 3 -->
          <div class="card-glow rounded-xl p-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
              
              <div class="lg:col-span-2">
                <div class="flex items-start justify-between mb-4">
                  <div>
                    <h3 class="text-xl font-bold text-white mb-2">Reduce Clan Creation Fee to 500 MLG</h3>
                    <p class="text-gray-400 mb-4">Lower the barrier to entry for new clans by reducing the creation fee from 1,000 MLG to 500 MLG tokens.</p>
                    <div class="flex items-center space-x-4 text-sm text-gray-500">
                      <span>Proposed by: NewGamerCollective</span>
                      <span>‚Ä¢</span>
                      <span>1 week remaining</span>
                      <span>‚Ä¢</span>
                      <span>Proposal #45</span>
                    </div>
                  </div>
                </div>
                
                <div class="space-y-3">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-400">Voting Progress</span>
                    <span class="text-gaming-purple font-bold">52% For ‚Ä¢ 48% Against</span>
                  </div>
                  <div class="w-full bg-gray-600 rounded-full h-3">
                    <div class="bg-gaming-purple h-3 rounded-full" style="width: 52%"></div>
                  </div>
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-400 vote-count" data-content-id="proposal-3-total">4,182 total votes</span>
                    <span class="text-gray-400">Quorum: 41% reached</span>
                  </div>
                </div>
              </div>

              <div class="flex flex-col justify-center space-y-4">
                <div class="text-center mb-4">
                  <div class="text-3xl font-bold text-gaming-purple mb-1 vote-count" data-content-id="proposal-3-support">52%</div>
                  <div class="text-sm text-gray-400">Support</div>
                </div>
                <div class="space-y-2">
                  <button class="w-full bg-gaming-accent hover:bg-green-400 text-black px-6 py-3 rounded-lg font-bold transition-colors vote-btn" data-content-id="proposal-3-for" data-cost="10" data-vote="for" data-proposal="3">
                    Vote For (Cost: 10 MLG)
                  </button>
                  <button class="w-full bg-gaming-red hover:bg-red-600 px-6 py-3 rounded-lg font-bold transition-colors vote-btn" data-content-id="proposal-3-against" data-cost="10" data-vote="against" data-proposal="3">
                    Vote Against (Cost: 10 MLG)
                  </button>
                </div>
              </div>

            </div>
          </div>

        </div>
        
        <div class="mt-8 text-center">
          <button class="bg-gaming-surface hover:bg-gaming-blue px-8 py-3 rounded-lg font-bold transition-colors">
            View All Proposals
          </button>
        </div>
      </div>

      <!-- Governance Stats -->
      <div class="card-glow rounded-xl p-8">
        <h3 class="text-2xl font-bold text-gaming-accent mb-6 text-center">Governance Analytics</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          
          <div class="bg-gaming-surface rounded-lg p-6 text-center">
            <div class="text-3xl font-bold text-gaming-yellow mb-2">89</div>
            <div class="text-sm text-gray-400 mb-1">Total Proposals</div>
            <div class="text-xs text-gaming-accent">+7 this month</div>
          </div>
          
          <div class="bg-gaming-surface rounded-lg p-6 text-center">
            <div class="text-3xl font-bold text-gaming-blue mb-2">73%</div>
            <div class="text-sm text-gray-400 mb-1">Approval Rate</div>
            <div class="text-xs text-gaming-accent">‚Üë 5% this quarter</div>
          </div>
          
          <div class="bg-gaming-surface rounded-lg p-6 text-center">
            <div class="text-3xl font-bold text-gaming-purple mb-2">67%</div>
            <div class="text-sm text-gray-400 mb-1">Avg Participation</div>
            <div class="text-xs text-gaming-accent">‚Üë 12% this month</div>
          </div>
          
          <div class="bg-gaming-surface rounded-lg p-6 text-center">
            <div class="text-3xl font-bold text-gaming-red mb-2">$1.2M</div>
            <div class="text-sm text-gray-400 mb-1">Funds Allocated</div>
            <div class="text-xs text-gaming-accent">This quarter</div>
          </div>
          
        </div>
      </div>

    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-black bg-opacity-80 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <a href="index.html" onclick="handleNavigation(event, 'index.html')" class="text-2xl font-bold mb-4 text-gaming-accent hover:text-green-400 transition-colors inline-block">üéÆ MLG.clan</a>
        <p class="text-gray-400 mb-6">The future of gaming communities is here.</p>
        <div class="flex justify-center space-x-8 text-sm text-gray-500">
          <span>Web3 Native</span>
          <span>‚Ä¢</span>
          <span>Enterprise Ready</span>
          <span>‚Ä¢</span>
          <span>Community Governed</span>
          <span>‚Ä¢</span>
          <span>100% Complete</span>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Initialize DAO platform
    class DAOPlatform {
      constructor() {
        this.stats = {
          treasury: 2400000,
          activeProposals: 7,
          participation: 67,
          totalVoters: 12847
        };
        this.userVotes = {
          mlgBalance: 1250,
          votesThisMonth: 3
        };
        this.daoData = null;
        this.init();
      }
      
      async init() {
        console.log('üèõÔ∏è Initializing DAO Platform...');
        
        this.initializeUI();
        this.setupEventListeners();
        
        // Load data from API
        await this.loadDAOData();
        
        this.startRealTimeUpdates();
        console.log('‚úÖ DAO Platform initialized successfully!');
      }
      
      initializeUI() {
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }
      
      setupEventListeners() {
        // Vote buttons
        document.querySelectorAll('.vote-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const vote = e.target.dataset.vote;
            const proposal = e.target.dataset.proposal;
            this.castDAOVote(proposal, vote);
          });
        });

        // Create proposal button
        document.querySelector('button:has-text("Create Proposal")') || 
        document.querySelectorAll('button').forEach(btn => {
          if (btn.textContent.includes('Create Proposal')) {
            btn.addEventListener('click', () => {
              this.showNotification('üìù Proposal creation interface coming soon!', 'info');
            });
          }
        });
      }
      
      async castDAOVote(proposalId, voteType) {
        const voteCost = 10;
        
        if (this.userVotes.mlgBalance >= voteCost) {
          this.userVotes.mlgBalance -= voteCost;
          this.userVotes.votesThisMonth++;
          
          this.showNotification(`‚úÖ Vote cast ${voteType === 'for' ? 'FOR' : 'AGAINST'} proposal #${proposalId}!`, 'success');
          
          // Update vote counts (simulate)
          this.updateProposalVotes(proposalId, voteType);
        } else {
          this.showNotification('‚ùå Insufficient MLG tokens for DAO vote!', 'error');
        }
      }
      
      updateProposalVotes(proposalId, voteType) {
        // Find and update the proposal's vote display
        // This is a simplified simulation
        console.log(`Updated proposal ${proposalId} with ${voteType} vote`);
      }
      
      async loadDAOData() {
        try {
          console.log('üìä Loading DAO data from API...');
          
          // Show loading state
          window.mlgApi?.showLoading('main', {
            message: 'Loading DAO data...',
            type: 'dashboard'
          });
          
          // Load DAO data from API
          const response = await window.mlgApi.getDao();
          
          if (response.success) {
            this.daoData = response;
            
            // Update stats from API data
            if (response.treasury) {
              this.stats.treasury = parseFloat(response.treasury.total_assets.replace(/[^\d.]/g, '')) * 1000000 || this.stats.treasury;
            }
            
            if (response.governance) {
              this.stats.activeProposals = response.governance.active_proposals || this.stats.activeProposals;
              this.stats.participation = response.governance.participation_rate || this.stats.participation;
              this.stats.totalVoters = response.governance.total_voters || this.stats.totalVoters;
            }
            
            if (response.user_voting) {
              this.userVotes.mlgBalance = response.user_voting.mlg_holdings || this.userVotes.mlgBalance;
              this.userVotes.votesThisMonth = response.user_voting.proposals_voted || this.userVotes.votesThisMonth;
            }
            
            // Update display
            this.updateStatsDisplay();
            
            // Update proposals
            this.updateProposalsList(response.proposals || []);
            
            console.log('‚úÖ DAO data loaded from API');
          } else {
            throw new Error('API response not successful');
          }
          
        } catch (error) {
          console.error('Failed to load DAO data:', error);
          
          // Show error notification
          this.showNotification('Failed to load DAO data. Using fallback.', 'warning');
          
          // Use fallback data
          this.updateStatsDisplay();
        } finally {
          // Hide loading state
          window.mlgApi?.hideLoading('main');
        }
      }
      
      updateStatsDisplay() {
        // Update DOM with current stats
        const elements = {
          'treasury-value': this.daoData?.treasury?.total_assets || ('$' + (this.stats.treasury / 1000000).toFixed(1) + 'M'),
          'active-proposals': this.stats.activeProposals,
          'participation': this.stats.participation + '%',
          'total-voters': this.stats.totalVoters.toLocaleString(),
          'user-mlg-holdings': this.userVotes.mlgBalance.toLocaleString(),
          'user-votes-month': this.userVotes.votesThisMonth
        };
        
        Object.entries(elements).forEach(([id, value]) => {
          const element = document.getElementById(id);
          if (element) {
            element.textContent = value;
            // Add pulse effect for updates
            element.classList.add('animate-pulse-neon');
            setTimeout(() => {
              element.classList.remove('animate-pulse-neon');
            }, 1000);
          }
        });
      }
      
      updateProposalsList(proposals) {
        if (!proposals || proposals.length === 0) return;
        
        console.log('üó≥Ô∏è Updating proposals list:', proposals);
        
        // Update proposal cards if they exist
        proposals.forEach((proposal, index) => {
          const proposalElement = document.querySelector(`[data-proposal-id="${proposal.id}"]`);
          const proposalTitleElement = document.querySelector(`[data-proposal="${index}"] .proposal-title`);
          const proposalSupportElement = document.querySelector(`[data-proposal="${index}"] .proposal-support`);
          const proposalStatusElement = document.querySelector(`[data-proposal="${index}"] .proposal-status`);
          
          if (proposalTitleElement) proposalTitleElement.textContent = proposal.title;
          if (proposalSupportElement) proposalSupportElement.textContent = `${proposal.support_percentage}% Support`;
          if (proposalStatusElement) proposalStatusElement.textContent = `${proposal.ends_in_days} days left`;
        });
      }
      
      startRealTimeUpdates() {
        // Start real-time updates using the API client
        console.log('üîÑ Starting real-time DAO updates...');
        
        // Update DAO data every 30 seconds
        window.mlgApi?.startRealTimeUpdates('/dao', (data) => {
          if (data.success) {
            this.daoData = data;
            
            // Update stats from real-time data
            if (data.governance) {
              this.stats.activeProposals = data.governance.active_proposals;
              this.stats.participation = data.governance.participation_rate;
              this.stats.totalVoters = data.governance.total_voters;
            }
            
            if (data.user_voting) {
              this.userVotes.mlgBalance = data.user_voting.mlg_holdings;
              this.userVotes.votesThisMonth = data.user_voting.proposals_voted;
            }
            
            this.updateStatsDisplay();
            this.updateProposalsList(data.proposals || []);
          }
        }, 30000);
      }
      
      showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white font-medium z-50 transition-all transform translate-x-full ${
          type === 'success' ? 'bg-gaming-accent text-black' :
          type === 'error' ? 'bg-gaming-red' :
          type === 'warning' ? 'bg-gaming-yellow text-black' :
          'bg-gaming-blue'
        }`;
        
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.classList.remove('translate-x-full');
        }, 100);
        
        setTimeout(() => {
          notification.classList.add('translate-x-full');
          setTimeout(() => {
            if (document.body.contains(notification)) {
              document.body.removeChild(notification);
            }
          }, 300);
        }, 4000);
      }
    }
    
    // Universal navigation handler for both SPA and multi-page modes
    function handleNavigation(event, pageUrl) {
      // Check if SPA router is available and ready
      if (window.router && window.router.push && typeof window.router.push === 'function') {
        event.preventDefault();
        const routePath = '/' + pageUrl.replace('.html', '').replace('index', 'dashboard');
        window.router.push(routePath);
      }
      // If no SPA router, let the default link behavior happen (multi-page navigation)
    }
    
    // Active navigation state management
    function updateActiveNavigation(currentPage) {
      // Remove active class from all nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('bg-gaming-accent', 'text-black', 'bg-gaming-yellow', 'text-white');
        link.classList.add('text-gray-300');
      });
      
      // Add active class to current page link with appropriate styling
      const activeLink = document.querySelector(`.nav-link[href="${currentPage}"]`);
      if (activeLink) {
        activeLink.classList.remove('text-gray-300');
        if (currentPage === 'dao.html') {
          activeLink.classList.add('bg-gaming-yellow', 'text-black');
        } else {
          activeLink.classList.add('bg-gaming-accent', 'text-black');
        }
      }
    }
    
    // Make navigation functions globally available
    window.handleNavigation = handleNavigation;
    window.updateActiveNavigation = updateActiveNavigation;
    
    // Initialize when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      new DAOPlatform();
    });
  </script>
</body>
</html>